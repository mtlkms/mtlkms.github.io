(function(){"use strict";var t={4850:function(t,e,a){var n=a(9242),s=a(3396),i=a(7139);const r={id:"sidebar"};function o(t,e,a,o,l,h){const c=(0,s.up)("AppMenu"),u=(0,s.up)("NavBar"),d=(0,s.up)("router-view"),g=(0,s.up)("LoadingEffect");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",{onClick:e[0]||(e[0]=t=>h.toggleMenu()),id:"sidebar-bg"},null,512),[[n.F8,l.isMenuOpen]])])),_:1}),(0,s.Wm)(n.uT,{name:"fade-in-left"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",r,[(0,s.Wm)(c)],512),[[n.F8,l.isMenuOpen]])])),_:1}),(0,s._)("div",{id:"main",class:(0,i.C_)({noMarginLeft:!l.isMenuOpen})},[(0,s.Wm)(u,{onToggleMenu:e[1]||(e[1]=t=>h.toggleMenu())}),(0,s.Wm)(d,null,{default:(0,s.w5)((({Component:t})=>[(0,s.Wm)(n.uT,{name:"fade-in-fast",mode:"out-in"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t)))])),_:2},1024)])),_:1})],2),(0,s.Wm)(g)],64)}var l=a(65);const h=t=>((0,s.dD)("data-v-619cd3ae"),t=t(),(0,s.Cn)(),t),c={id:"appmenu-top"},u={key:0},d=h((()=>(0,s._)("img",{src:"/img/icons/180.png",class:"avatar d-block mx-auto"},null,-1))),g=h((()=>(0,s._)("h3",null,"MTLKMS",-1))),m=h((()=>(0,s._)("hr",null,null,-1))),p=h((()=>(0,s._)("p",null,"Học hành chăm chỉ :(",-1))),w=[d,g,m,p],_={key:1},y=["src"],v=h((()=>(0,s._)("hr",null,null,-1))),D={key:0},f=(0,s.Uk)(" Bạn đang học môn "),k={key:1},T=h((()=>(0,s._)("hr",null,null,-1))),b=h((()=>(0,s._)("p",null,"Bạn còn 99 mục tiêu hằng ngày chưa hoàn tất!",-1))),L={class:"material-icons"};function M(t,e,a,n,r,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",c,[t.isLogin?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("img",{src:t.user.avatarURL,class:"avatar d-block mx-auto"},null,8,y),(0,s._)("h3",null,"Xin chào "+(0,i.zw)(t.user.name)+"!",1),v,(0,s._)("p",null,[t.learningDiary?((0,s.wg)(),(0,s.iD)("span",D,[f,(0,s.Wm)(l,{to:"/study-diary/"+t.learningDiary.sdtag},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.learningDiary.name),1)])),_:1},8,["to"])])):((0,s.wg)(),(0,s.iD)("span",k," Bạn hiện chưa học gì! "))]),T,b])):((0,s.wg)(),(0,s.iD)("div",u,w))]),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.links,((e,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a},[t.isLogin==e.auth?((0,s.wg)(),(0,s.j4)(l,{key:0,to:e.path,class:(0,i.C_)({active:o.isActive(e),link:!0})},{default:(0,s.w5)((()=>[(0,s._)("span",L,(0,i.zw)(e.icon),1),(0,s.Uk)(" "+(0,i.zw)(e.name),1)])),_:2},1032,["to","class"])):(0,s.kq)("",!0)])))),128))])])}var I={name:"AppMenu",data(){return{links:[{name:"Trang Chủ",path:"/",icon:"home",auth:!0},{name:"Cá Nhân",path:"/profile",icon:"person",auth:!0},{name:"Nhật Ký Thời Gian Học",path:"/study-diary",icon:"assignment",auth:!0},{name:"Các Vịt Khác",path:"/users",icon:"people",auth:!0},{name:"Hướng Dẫn",path:"/guide",icon:"library_books",auth:!0},{name:"Đăng Nhập",path:"/login",icon:"login",auth:!1},{name:"Đăng Ký",path:"/register",icon:"person",auth:!1},{name:"Đăng Xuất",path:"/logout",icon:"logout",auth:!0}]}},methods:{isActive(t){let e=this.$route.path.split("/");return t.path.replace("/","")==e[1]}},computed:{...(0,l.rn)(["user","isLogin","learningDiary"])}},S=a(89);const U=(0,S.Z)(I,[["render",M],["__scopeId","data-v-619cd3ae"]]);var C=U;const x={id:"navbar"};function P(t,e,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("span",{onClick:e[0]||(e[0]=e=>t.$emit("toggleMenu")),class:"material-icons"},"menu"),(0,s._)("p",null,(0,i.zw)(t.title),1)])}var z={name:"NavBar",data(){return{}},computed:{...(0,l.rn)(["title"])}};const N=(0,S.Z)(z,[["render",P],["__scopeId","data-v-b6330b7c"]]);var E=N;const V=t=>((0,s.dD)("data-v-8eb54cee"),t=t(),(0,s.Cn)(),t),O={class:"main"},j=V((()=>(0,s._)("div",{class:"static-bar"},null,-1))),A=V((()=>(0,s._)("div",{class:"move-bar"},null,-1))),F=[j,A];function K(t,e,a,i,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",O,F,512),[[n.F8,t.isLoading]])])),_:1})])}var W={name:"LoadingEffect",data(){return{}},computed:{...(0,l.rn)(["isLoading"])}};const H=(0,S.Z)(W,[["render",K],["__scopeId","data-v-8eb54cee"]]);var $=H,R={name:"App",components:{AppMenu:C,LoadingEffect:$,NavBar:E},created(){this.isLogin||"/login"===location.pathname||"/register"===location.pathname||"/forget-password"===location.pathname||(this.setRedirect(location.pathname+location.search),this.$router.push("/login")),innerWidth>768&&(this.isMenuOpen=!0),window.addEventListener("resize",(()=>{innerWidth>768?this.isMenuOpen=!0:this.isMenuOpen=!1})),sessionStorage.clear()},data(){return{isMenuOpen:!1}},methods:{...(0,l.OI)(["setRedirect"]),toggleMenu(){this.isMenuOpen=!this.isMenuOpen}},computed:{...(0,l.rn)(["isLogin"])},watch:{$route:{immediate:!0,handler(){innerWidth<768&&(this.isMenuOpen=!1)}}}};const B=(0,S.Z)(R,[["render",o]]);var q=B,Z=a(5431);(0,Z.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var Y=a(678),G={title:"Góc Nhỏ Của Nhà Vịt - MTLKMS",isLogin:!1,isLoading:!1,redirect:null,user:{id:"",name:"",email:"",username:"",slogan:"",created_at:"",avatarURL:""},learningDiary:!1,users:{}};class J{constructor(){this.host="https://mtlkms.vitcon.cf"}get(t){return fetch(this.host+t,{method:"GET",credentials:"include"})}getAvatarURL(t){return this.host+"/user/"+t+"/avatar"}post(t,e){return fetch(this.host+t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}put(t,e){return fetch(this.host+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}delete(t,e){return fetch(this.host+t,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}updateAvatar(t){return fetch(`${this.host}/user/avatar`,{method:"PUT",credentials:"include",body:t})}}var X=new J,Q={setTitle(t,e){document.title=e,t.title=e},setIsLogin(t,e){t.isLogin=e},setIsLoading(t,e){t.isLoading=e},setUserData(t,e){t.user=e},setLearningDiary(t,e){t.learningDiary=e},setAvatarURL(t,e){let a=X.getAvatarURL(e);t.user.avatarURL=a},setRedirect(t,e){t.redirect=e},setUsers(t,e){e.forEach((e=>{t.users[e.username]=e}))}},tt=(a(1703),{async login({commit:t},e){t("setIsLoading",!0);try{const a=await X.post("/login",e),n=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(n.error);return t("setIsLogin",!0),t("setUserData",n.user),t("setAvatarURL",n.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async checkLogin({commit:t}){t("setIsLoading",!0);try{let e=await X.get("/check-login"),a=await e.json();if(t("setIsLoading",!1),200!==e.status)throw new Error("Check login failed");return t("setIsLogin",!0),t("setUserData",a.user),t("setAvatarURL",a.user.username),!0}catch(e){throw t("setIsLoading",!1),e}},async getLearningDiary({commit:t,state:e},a){t("setIsLoading",!0);try{let n=a||e.user.id,s=await X.get("/study-diary/diary/"+n),i=await s.json();if(t("setIsLoading",!1),200!=s.status)throw new Error(i.error);return a?i.data:(t("setLearningDiary",i.data),!0)}catch(n){throw t("setIsLoading",!1),n}},async register({commit:t},e){t("setIsLoading",!0);try{const a=await X.post("/register",e),n=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(n.error);return t("setIsLogin",!0),t("setUserData",n.user),t("setAvatarURL",n.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async updateProfile({commit:t},e){t("setIsLoading",!0);try{const a=await X.put("/user",e),n=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(n.error);return t("setUserData",n.user),t("setAvatarURL",n.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async updatePassword({commit:t},e){t("setIsLoading",!0);try{const a=await X.put("/user/password",e),n=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(n.error);return!0}catch(a){throw t("setIsLoading",!1),a}},async fetchUsers({commit:t,state:e}){if(Object.keys(e.users).length>0)return!0;t("setIsLoading",!0);try{let e=await X.get("/user"),a=await e.json();if(t("setIsLoading",!1),200==e.status)return t("setUsers",a.data),!0;throw new Error(a.error)}catch(a){throw t("setIsLoading",!1),a}}}),et={getUserName:t=>t.user.name,getUserUsername:t=>t.user.username,getUserSlogan:t=>t.user.slogan};const at=(0,l.MT)({state:G,mutations:Q,actions:tt,getters:et});var nt=at;const st=t=>((0,s.dD)("data-v-69cc8de0"),t=t(),(0,s.Cn)(),t),it={class:"container container-sm"},rt=st((()=>(0,s._)("h2",{class:"mb-4"},"Đăng nhập",-1))),ot={class:"input"},lt=st((()=>(0,s._)("span",{class:"material-icons"},"person",-1))),ht=st((()=>(0,s._)("p",null,"Username",-1))),ct={class:"input"},ut=st((()=>(0,s._)("span",{class:"material-icons"},"lock",-1))),dt=st((()=>(0,s._)("p",null,"Password",-1))),gt={class:"footer"},mt=st((()=>(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"login"),(0,s.Uk)(" Đăng nhập ")],-1))),pt=(0,s.Uk)("Chưa có tài khoản? "),wt=(0,s.Uk)("[Đăng Ký]"),_t=(0,s.Uk)("[Quên Mật Khẩu]");function yt(t,e,a,r,o,l){const h=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",it,[(0,s._)("form",{action:"",method:"POST",onSubmit:e[2]||(e[2]=(0,n.iM)((t=>l.submitForm()),["prevent"]))},[rt,(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",{class:(0,i.C_)(["log",o.isSuccess?"success":"error"])},[(0,s._)("p",null,(0,i.zw)(o.apiLog),1),(0,s._)("p",null,(0,i.zw)(o.log),1)],2),[[n.F8,o.log]])])),_:1}),(0,s._)("label",ot,[lt,(0,s.wy)((0,s._)("input",{type:"text",name:"username",required:"",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.username=t)},null,512),[[n.nr,o.form.username]]),ht]),(0,s._)("label",ct,[ut,(0,s.wy)((0,s._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.password=t)},null,512),[[n.nr,o.form.password]]),dt]),(0,s._)("div",gt,[mt,(0,s._)("div",null,[(0,s._)("p",null,[pt,(0,s.Wm)(h,{to:"/register"},{default:(0,s.w5)((()=>[wt])),_:1})]),(0,s._)("p",null,[(0,s.Wm)(h,{to:"/forget-password"},{default:(0,s.w5)((()=>[_t])),_:1})])])])],32)])}var vt={name:"LoginView",created(){this.checkIfLoggedIn()},data(){return{form:{username:"",password:""},isSuccess:!1,apiLog:"",log:""}},computed:{...(0,l.rn)(["isLogin","redirect"])},methods:{...(0,l.nv)(["login","checkLogin","getLearningDiary"]),...(0,l.OI)(["setRedirect"]),async submitForm(){try{let e=await this.login(this.form);if(!e)return;this.isSuccess=!0,this.apiLog="",this.log="Đăng nhập thành công";try{await this.getLearningDiary()}catch(t){console.log("Bạn không đang học môn nào - ",t.message)}this.$router.push("/")}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}},showLog(){"Username not found or password is incorrect"==this.apiLog?this.log="Tên đăng nhập hoặc mật khẩu không chính xác":this.log="Đã có lỗi xảy ra"},runRedirect(){this.redirect&&"/login"!=this.redirect&&"/register"!=this.redirect&&"/forget-password"!=this.redirect?(this.$router.push(this.redirect),this.setRedirect(null)):this.$router.push("/")},async checkIfLoggedIn(){this.isLogin&&this.runRedirect(),await this.checkLogin();try{await this.getLearningDiary()}catch(t){console.log("Bạn không đang học môn nào - ",t.message)}this.runRedirect()}}};const Dt=(0,S.Z)(vt,[["render",yt],["__scopeId","data-v-69cc8de0"]]);var ft=Dt;const kt=t=>((0,s.dD)("data-v-5698d18a"),t=t(),(0,s.Cn)(),t),Tt={class:"container container-sm"},bt=kt((()=>(0,s._)("h2",{class:"mb-4"},"Đăng ký",-1))),Lt={class:"input"},Mt=kt((()=>(0,s._)("span",{class:"material-icons"},"label",-1))),It=kt((()=>(0,s._)("p",null,"Tên hiển thị",-1))),St={class:"input"},Ut=kt((()=>(0,s._)("span",{class:"material-icons"},"person",-1))),Ct=kt((()=>(0,s._)("p",null,"Tên đăng nhập",-1))),xt={class:"input"},Pt=kt((()=>(0,s._)("span",{class:"material-icons"},"email",-1))),zt=kt((()=>(0,s._)("p",null,"Email",-1))),Nt={class:"input"},Et=kt((()=>(0,s._)("span",{class:"material-icons"},"lock",-1))),Vt=kt((()=>(0,s._)("p",null,"Mật khẩu",-1))),Ot={class:"input"},jt=kt((()=>(0,s._)("span",{class:"material-icons"},"lock",-1))),At=kt((()=>(0,s._)("p",null,"Re-password",-1))),Ft={class:"footer"},Kt=kt((()=>(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"send"),(0,s.Uk)(" Đăng ký ")],-1))),Wt=(0,s.Uk)("Đã có tài khoản? "),Ht=(0,s.Uk)("[Đăng Nhập]"),$t=(0,s.Uk)("[Quên Mật Khẩu]");function Rt(t,e,a,r,o,l){const h=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("form",{action:"",method:"POST",onSubmit:e[5]||(e[5]=(0,n.iM)((t=>l.submitForm()),["prevent"]))},[bt,(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",{class:(0,i.C_)(["log",o.isSuccess?"success":"error"])},[(0,s._)("p",null,(0,i.zw)(o.apiLog),1),(0,s._)("p",null,(0,i.zw)(o.log),1)],2),[[n.F8,o.log]])])),_:1}),(0,s._)("label",Lt,[Mt,(0,s.wy)((0,s._)("input",{type:"text",name:"name",required:"",placeholder:"Tên hiển thị","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t)},null,512),[[n.nr,o.form.name]]),It]),(0,s._)("label",St,[Ut,(0,s.wy)((0,s._)("input",{type:"text",name:"username",required:"",placeholder:"Tên đăng nhập","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.username=t)},null,512),[[n.nr,o.form.username]]),Ct]),(0,s._)("label",xt,[Pt,(0,s.wy)((0,s._)("input",{type:"email",name:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.email=t)},null,512),[[n.nr,o.form.email]]),zt]),(0,s._)("label",Nt,[Et,(0,s.wy)((0,s._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.password=t)},null,512),[[n.nr,o.form.password]]),Vt]),(0,s._)("label",Ot,[jt,(0,s.wy)((0,s._)("input",{type:"password",name:"repassword",required:"",placeholder:"Nhập lại mật khẩu","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.repassword=t)},null,512),[[n.nr,o.form.repassword]]),At]),(0,s._)("div",Ft,[Kt,(0,s._)("div",null,[(0,s._)("p",null,[Wt,(0,s.Wm)(h,{to:"/login"},{default:(0,s.w5)((()=>[Ht])),_:1})]),(0,s._)("p",null,[(0,s.Wm)(h,{to:"/forget-password"},{default:(0,s.w5)((()=>[$t])),_:1})])])])],32)])}var Bt={name:"RegisterView",data(){return{form:{name:"",username:"",email:"",password:"",repassword:""},apiLog:"",log:"",isSuccess:!1}},methods:{...(0,l.nv)(["register"]),...(0,l.OI)(["setIsLoading"]),async submitForm(){if(this.form.password!==this.form.repassword)return this.log="Mật khẩu không khớp",void(this.isSuccess=!1);try{let t=await this.register(this.form);if(!t)return;this.isSuccess=!0,this.apiLog="",this.log="Đăng ký thành công",this.$router.push("/")}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}},showLog(){"Invalid name"==this.apiLog?this.log="Tên phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Invalid email"==this.apiLog?this.log="Email không đúng định dạng":"Invalid username"==this.apiLog?this.log="Tên đăng nhập phải từ 3 đến 20 kí tự, không bao gồm khoảng trống và kí tự đặc biệt":"Invalid password"==this.apiLog?this.log="Mật khẩu phải lớn hơn 6 kí tự, bao gồm chữ cái viết thường, viết hoa, số và kí tự đặc biệt":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'username')/gi.test(this.apiLog)?this.log="Tên đăng nhập đã tồn tại":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'email')/gi.test(this.apiLog)?this.log="Email đã tồn tại":this.log="Đã có lỗi xảy ra"}}};const qt=(0,S.Z)(Bt,[["render",Rt],["__scopeId","data-v-5698d18a"]]);var Zt=qt;const Yt={class:"container container-sm"},Gt=(0,s._)("h2",{class:"mb-4"},"Đăng xuất",-1),Jt=(0,s._)("p",null,"Bạn có chắc muốn đăng xuất không?",-1),Xt=(0,s._)("span",{class:"material-icons mr-2"},"logout",-1),Qt=(0,s.Uk)(" Đăng xuất "),te=[Xt,Qt];function ee(t,e,a,n,i,r){return(0,s.wg)(),(0,s.iD)("div",Yt,[Gt,Jt,(0,s._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>r.logout&&r.logout(...t))},te)])}var ae={name:"LogoutView",data(){return{}},methods:{...(0,l.OI)(["setIsLoading"]),logout(){this.setIsLoading(!0),X.get("/logout").then((()=>{location.href="/login"})).catch((()=>{this.setIsLoading(!1)}))}}};const ne=(0,S.Z)(ae,[["render",ee]]);var se=ne;const ie={class:"container container-sm"},re=(0,s._)("h3",null,"Email của bạn:",-1),oe=(0,s._)("p",{class:"text-secondary"},"Một mã xác nhận sẽ được gửi tới email của bạn. Nếu không tìm thấy, vui lòng kiểm tra bao gồm hòm thư spam.",-1),le={class:"input"},he=(0,s._)("span",{class:"material-icons"},"mail",-1),ce=(0,s._)("p",null,"Email",-1),ue=(0,s._)("button",{class:"btn btn-primary mt-4"},[(0,s._)("span",{class:"material-icons mr-2"},"send"),(0,s.Uk)(" Next ")],-1),de=(0,s._)("h3",null,"Nhập mã xác nhận",-1),ge=(0,s._)("p",{class:"text-secondary"},"Nhập mã xác nhận vừa được gửi đến email của bạn. Mã xác nhận có hiệu lực trong 5 phút.",-1),me={class:"input"},pe=(0,s._)("span",{class:"material-icons"},"code",-1),we=(0,s._)("p",null,"Code",-1),_e=(0,s._)("br",null,null,-1),ye=(0,s._)("hr",null,null,-1),ve=(0,s._)("br",null,null,-1),De=(0,s._)("h3",null,"Đổi mật khẩu",-1),fe=(0,s._)("p",{class:"text-secondary"},"Mật khẩu phải từ 6 ký tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt.",-1),ke={class:"input"},Te=(0,s._)("span",{class:"material-icons"},"lock",-1),be=(0,s._)("p",null,"New Password",-1),Le={class:"input"},Me=(0,s._)("span",{class:"material-icons"},"lock",-1),Ie=(0,s._)("p",null,"Re-Password",-1),Se=(0,s._)("button",{class:"btn btn-primary mt-4"},[(0,s._)("span",{class:"material-icons mr-2"},"send"),(0,s.Uk)(" Next ")],-1);function Ue(t,e,a,i,r,o){const l=(0,s.up)("message-popup");return(0,s.wg)(),(0,s.iD)("div",ie,[(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[r.isStartSendEmail?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("form",{key:0,action:"",onSubmit:e[1]||(e[1]=(0,n.iM)(((...t)=>o.sendEmail&&o.sendEmail(...t)),["prevent"]))},[re,oe,(0,s._)("label",le,[he,(0,s.wy)((0,s._)("input",{name:"email",type:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[0]||(e[0]=t=>r.email=t)},null,512),[[n.nr,r.email]]),ce]),ue],32))])),_:1}),(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[r.isSendEmail?((0,s.wg)(),(0,s.iD)("form",{key:0,action:"",onSubmit:e[5]||(e[5]=(0,n.iM)(((...t)=>o.updatePassword&&o.updatePassword(...t)),["prevent"]))},[de,ge,(0,s._)("label",me,[pe,(0,s.wy)((0,s._)("input",{name:"verificationCode",type:"text",required:"",placeholder:"Code","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.verificationCode=t)},null,512),[[n.nr,r.form.verificationCode]]),we]),_e,ye,ve,De,fe,(0,s._)("label",ke,[Te,(0,s.wy)((0,s._)("input",{type:"password",required:"",placeholder:"New Password","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.newPassword=t)},null,512),[[n.nr,r.form.newPassword]]),be]),(0,s._)("label",Le,[Me,(0,s.wy)((0,s._)("input",{type:"password",required:"",placeholder:"Re-Password","onUpdate:modelValue":e[4]||(e[4]=t=>r.form.rePassword=t)},null,512),[[n.nr,r.form.rePassword]]),Ie]),Se],32)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(l,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}const Ce={class:"popup"},xe={class:"container container-sm"},Pe={class:"d-flex justify-content-center align-items-center"},ze={class:"material-icons mr-2"};function Ne(t,e,a,r,o,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",Ce,[(0,s._)("div",{class:"popup-bg",onClick:e[0]||(e[0]=t=>l.close())}),(0,s._)("div",xe,[(0,s._)("div",{class:(0,i.C_)(a.type)},[(0,s._)("div",Pe,[(0,s._)("span",ze,(0,i.zw)(l.icon),1),(0,s._)("h3",null,(0,i.zw)(a.title),1)]),(0,s._)("span",{class:"material-icons btn-close",onClick:e[1]||(e[1]=t=>l.close())},"close")],2),(0,s._)("div",null,[(0,s._)("p",null,(0,i.zw)(a.message),1)])])],512),[[n.F8,o.display]])])),_:1})])}var Ee={name:"MessagePopup",props:{title:{type:String,default:""},message:{type:String,default:""},type:{type:String,default:"success"},isDisplay:{type:Boolean,default:!1}},data(){return{display:!1}},methods:{close(){this.display=!1}},watch:{isDisplay(){this.display=!0}},computed:{icon(){switch(this.type){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";default:return"check_circle"}}}};const Ve=(0,S.Z)(Ee,[["render",Ne]]);var Oe=Ve,je={name:"ForgetPwdView",components:{MessagePopup:Oe},data(){return{isStartSendEmail:!1,isSendEmail:!1,email:"",form:{verificationCode:"",newPassword:"",rePassword:""},message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{...(0,l.OI)(["setIsLoading"]),async sendEmail(){try{this.isStartSendEmail=!0,this.setIsLoading(!0);let t=await X.post("/forget-password",{email:this.email}),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.error);this.isSendEmail=!0}catch(t){this.isStartSendEmail=!1,this.setIsLoading(!1),"Email not found"==t.message?this.showMessage("Lỗi","Không tìm thấy người dùng","error"):this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error")}},async updatePassword(){if(this.form.newPassword!==this.form.rePassword)throw this.showMessage("Lỗi","Mật khẩu không khớp","warning"),new Error("Password does not match");try{this.setIsLoading(!0);let t=await X.put("/forget-password",{email:this.email,validateCode:this.form.verificationCode,newPassword:this.form.newPassword}),e=await t.json();if(this.setIsLoading(!1),200!=t.status)throw new Error(e.error);this.showMessage("Thành công!","Cập nhật mật khẩu mới thành công!","success"),setTimeout((()=>{location.href="/login"}),3e3)}catch(t){this.setIsLoading(!1);let e="";e="Email not found"==t.message?"Không tìm thấy người dùng":"Code has expired"==t.message?"Mã bảo mật đã hết hạn":"Code is not valid"==t.message?"Mã bảo mật không chính xác":"Update Password failed"==t.message?"Cập nhật mật khẩu không thành công, vui lòng thử lại sau":"Invalid password"==t.message?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Không thể kết nối đến máy chủ",this.showMessage("Lỗi",e,"error")}},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay}}};const Ae=(0,S.Z)(je,[["render",Ue]]);var Fe=Ae,Ke=[{path:"/login",name:"login",component:ft,meta:{title:"Đăng Nhập - MTLKMS"}},{path:"/register",name:"register",component:Zt,meta:{title:"Đăng Ký - MTLKMS"}},{path:"/logout",name:"logout",component:se,meta:{title:"Đăng Xuất - MTLKMS"}},{path:"/forget-password",name:"forget-password",component:Fe,meta:{title:"Quên mật khẩu"}}];const We={class:"container container-md"},He=(0,s._)("hr",null,null,-1),$e=(0,s._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function Re(t,e,a,n,i,r){const o=(0,s.up)("Profile"),l=(0,s.up)("ContributionDiary");return(0,s.wg)(),(0,s.iD)("div",We,[(0,s.Wm)(o),He,$e,(0,s.Wm)(l)])}const Be=t=>((0,s.dD)("data-v-2ec6e405"),t=t(),(0,s.Cn)(),t),qe={class:"main"},Ze=["src","alt"],Ye={class:"text-secondary"},Ge={key:0,class:"text-secondary"},Je={key:1},Xe=(0,s.Uk)("[Edit Profile]"),Qe={key:2},ta=Be((()=>(0,s._)("br",null,null,-1))),ea=[ta],aa=Be((()=>(0,s._)("th",null,"Hôm nay:",-1))),na=Be((()=>(0,s._)("th",null,"Tuần:",-1))),sa=Be((()=>(0,s._)("th",null,"Tháng:",-1))),ia=Be((()=>(0,s._)("th",null,"Năm:",-1))),ra=Be((()=>(0,s._)("th",null,"Tổng:",-1)));function oa(t,e,a,n,r,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",qe,[(0,s._)("img",{src:o.getAvatarURL(),alt:r.user.username,class:"avatar-xl"},null,8,Ze),(0,s._)("div",null,[(0,s._)("h3",null,(0,i.zw)(r.user.name),1),(0,s._)("p",Ye,(0,i.zw)(r.user.username)+" - Tham gia "+(0,i.zw)(o.convertTimestampToLocalDate(r.user.created_at)),1),r.auth?((0,s.wg)(),(0,s.iD)("p",Ge,(0,i.zw)(r.user.email),1)):(0,s.kq)("",!0),(0,s._)("p",null,(0,i.zw)(r.user.slogan),1),r.auth?((0,s.wg)(),(0,s.iD)("p",Je,[(0,s.Wm)(l,{to:"/profile/edit"},{default:(0,s.w5)((()=>[Xe])),_:1})])):((0,s.wg)(),(0,s.iD)("p",Qe,ea))]),(0,s._)("table",null,[(0,s._)("tr",null,[aa,(0,s._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_today)),1)]),(0,s._)("tr",null,[na,(0,s._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_week)),1)]),(0,s._)("tr",null,[sa,(0,s._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_month)),1)]),(0,s._)("tr",null,[ia,(0,s._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_year)),1)]),(0,s._)("tr",null,[ra,(0,s._)("td",null,(0,i.zw)(o.caculateTime(r.user.time_total)),1)])])])}var la={name:"UserProfile",props:{userData:{type:Object}},created(){this.userData?this.user=this.userData:(this.user=this.$store.state.user,this.auth=!0)},data(){return{user:{},auth:!1}},methods:{convertTimestampToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},getAvatarURL(){return X.getAvatarURL(this.user.username)},caculateTime(t){if(null==t)return"0 giờ (0 phút)";let e=(t/60).toFixed(2);return`${e} giờ (${t} phút)`}}};const ha=(0,S.Z)(la,[["render",oa],["__scopeId","data-v-2ec6e405"]]);var ca=ha;const ua=t=>((0,s.dD)("data-v-5f978479"),t=t(),(0,s.Cn)(),t),da={class:"text-center"},ga={class:"date"},ma={class:"mr-2"},pa={key:0},wa=(0,s.Uk)(" Bạn đã học "),_a=(0,s.Uk)(" trong tháng này "),ya={key:1},va={class:"color-help"},Da={style:{"max-width":"100%","overflow-x":"scroll"}},fa=ua((()=>(0,s._)("tr",null,[(0,s._)("th",{title:"Tổng thời gian học của tuần"},"Week"),(0,s._)("th",null,"Sun"),(0,s._)("th",null,"Mon"),(0,s._)("th",null,"Tue"),(0,s._)("th",null,"Wed"),(0,s._)("th",null,"Thu"),(0,s._)("th",null,"Fri"),(0,s._)("th",null,"Sat")],-1))),ka={key:0},Ta={class:"text-secondary"},ba=ua((()=>(0,s._)("br",null,null,-1))),La=ua((()=>(0,s._)("br",null,null,-1))),Ma=ua((()=>(0,s._)("br",null,null,-1))),Ia=["title","onClick"],Sa={key:1,class:"text-secondary mt-1"},Ua=ua((()=>(0,s._)("br",null,null,-1))),Ca=ua((()=>(0,s._)("hr",null,null,-1))),xa={key:2},Pa=ua((()=>(0,s._)("br",null,null,-1))),za=ua((()=>(0,s._)("br",null,null,-1))),Na=ua((()=>(0,s._)("br",null,null,-1))),Ea=[Pa,za,Na],Va={style:{"margin-bottom":"7rem"}},Oa={class:"mb-4"},ja=ua((()=>(0,s._)("hr",null,null,-1))),Aa={key:0,style:{"margin-bottom":"40vh"}},Fa={class:"ml-3"},Ka={key:0},Wa=(0,s.Uk)(" Đã học: "),Ha={key:1},$a=(0,s.Uk)(" Đã học: "),Ra=(0,s.Uk)("Bắt đầu: "),Ba=(0,s.Uk)("Kết thúc: "),qa=["innerHTML"],Za=ua((()=>(0,s._)("br",null,null,-1))),Ya=ua((()=>(0,s._)("hr",null,null,-1))),Ga=ua((()=>(0,s._)("br",null,null,-1)));function Ja(t,e,a,r,o,l){const h=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",da,[(0,s._)("div",ga,[(0,s._)("p",ma,"Tháng "+(0,i.zw)(o.month),1),(0,s._)("p",null,"Năm "+(0,i.zw)(o.year),1)]),this.timeMonth>0?((0,s.wg)(),(0,s.iD)("p",pa,[wa,(0,s._)("b",null,(0,i.zw)((this.timeMonth/60).toFixed(2))+" giờ ("+(0,i.zw)(this.timeMonth)+" phút) ",1),_a])):((0,s.wg)(),(0,s.iD)("p",ya," Chưa có dữ liệu thống kê cho tháng này ")),(0,s._)("div",null,[(0,s._)("span",{onClick:e[0]||(e[0]=t=>l.toBeforeMonth()),class:"material-icons btn-icon mr-2"},"navigate_before"),(0,s.wy)((0,s._)("input",{type:"month","onUpdate:modelValue":e[1]||(e[1]=t=>o.date=t),class:"mb-4",style:{display:"inline-block",position:"relative",top:"-5px"}},null,512),[[n.nr,o.date]]),(0,s._)("span",{onClick:e[2]||(e[2]=t=>l.toNextMonth()),class:"material-icons btn-icon ml-2"},"navigate_next")]),(0,s._)("div",va,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.dayColors,((t,e)=>((0,s.wg)(),(0,s.iD)("span",{key:e,style:(0,i.j5)({backgroundColor:t})},null,4)))),128))])]),(0,s._)("div",Da,[(0,s._)("table",null,[fa,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.diaries.data,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("td",null,[""!=o.diaries.timeWeek[e]?((0,s.wg)(),(0,s.iD)("div",ka,[(0,s._)("p",{style:(0,i.j5)(l.weekStyle(o.diaries.timeWeek[e]))}," Tuần "+(0,i.zw)(e+1),5),(0,s._)("span",Ta,[(0,s.Uk)((0,i.zw)(o.diaries.timeWeek[e])+"' ",1),ba,(0,s.Uk)(" ("+(0,i.zw)((o.diaries.timeWeek[e]/60).toFixed(1))+"h) ",1)]),La,Ma])):(0,s.kq)("",!0)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,((t,a)=>((0,s.wg)(),(0,s.iD)("td",{key:a},[""!=t.day?((0,s.wg)(),(0,s.iD)("p",{key:0,title:"Ngày "+t.day,onClick:n=>l.setShowDay(e,a,t.day),style:(0,i.j5)({backgroundColor:l.dayBackground(t.diary.length),outline:t.isActive?"1px solid #000":"none",boxShadow:t.isToday?"3px 3px 1px #ff907f":"none",color:t.diary.length>8?"#fff":"#000"})},(0,i.zw)(t.day),13,Ia)):(0,s.kq)("",!0),"number"==typeof t.time?((0,s.wg)(),(0,s.iD)("div",Sa,[(0,s.Uk)((0,i.zw)(t.time)+"' ",1),Ua,(0,s.Uk)(" ("+(0,i.zw)((t.time/60).toFixed(1))+"h) ",1),Ca])):((0,s.wg)(),(0,s.iD)("div",xa,Ea))])))),128))])))),128))])]),(0,s._)("div",Va,[(0,s._)("h2",Oa,(0,i.zw)(o.showDay.title)+" - "+(0,i.zw)(o.showDay.diary.length)+" diary",1),ja,0==o.showDay.diary.length?((0,s.wg)(),(0,s.iD)("div",Aa," Bạn không học gì vào ngày này ")):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(o.showDay.diary,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("div",Fa,[0==a.tag?((0,s.wg)(),(0,s.iD)("p",Ka,[Wa,(0,s._)("b",null,[(0,s.Uk)((0,i.zw)(l.caculateTime(t.start_at,t.stop_at))+" ",1),(0,s.Wm)(h,{to:"/study-diary/"+t.sdtag},{default:(0,s.w5)((()=>[(0,s.Uk)(" trong môn "+(0,i.zw)(t.name),1)])),_:2},1032,["to"])])])):((0,s.wg)(),(0,s.iD)("p",Ha,[$a,(0,s._)("b",null,(0,i.zw)(l.caculateTime(t.start_at,t.stop_at)),1)])),(0,s._)("p",null,[Ra,(0,s._)("b",null,(0,i.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1)]),(0,s._)("p",null,[Ba,(0,s._)("b",null,(0,i.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,s._)("p",{class:"quote",innerHTML:l.parseMarkdown(t.log)},null,8,qa)]),Za,Ya,Ga])))),128))])])}var Xa=a(5792),Qa=a(3617),tn=a.n(Qa),en=a(5068);a(9029);en.TU.setOptions({highlight:function(t,e){const a=Xa.Z.getLanguage(e)?e:"plaintext";return Xa.Z.highlight(t,{language:a}).value},langPrefix:"hljs language-"});var an={name:"ContributionDiary",props:{userID:{type:Number,default:0},tag:{type:Number,default:0},refeshToogle:{type:Boolean,default:!1}},created(){this.adjustDate()},data(){return{diaries:[],showDay:{title:"Hôm nay",day:0,diary:[]},month:this.$route.query.month||(new Date).getMonth()+1,year:this.$route.query.year||(new Date).getFullYear(),date:"",timeMonth:0,dayColors:["#ffffff","#ccffe9","#99ffd4","#65ffbf","#32ffa9","#00ff94","#00e585","#00cc76","#00b268","#009959","#007f4a","#00663b","#004c2c","#00331d","#00190e","#000000"]}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),async getDiaries(){let t="/study-diary/diary/",e=this.userID||this.user.id;if(0!=this.tag?t+=`${e}/${this.year}/${this.month}/${this.tag}`:t+=`${e}/${this.year}/${this.month}`,!this.loadSessionData(t)){this.setIsLoading(!0);let e=await X.get(t),a=await e.json();if(this.setIsLoading(!1),200!=e.status)throw new Error(a.error);this.showDay.diary=[],this.putDiary(a.data.diaries,a.data.times),this.saveSessionData(t,a.data)}},putDiary(t,e){let a=[[],[],[],[],[],[],[]],n={timeWeek:["","","","","",""],data:[[[],[0],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],a]},s=t.length>0?new Date(t[0].stop_at):new Date(this.year,this.month-1,1),i=new Date(s.getFullYear(),s.getMonth(),1).getDay(),r=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),o=1;for(let u=0;u<n.data.length;u++)for(let t=0;t<n.data[u].length;t++){let e=o-i;if(e>0&&e<=r){let a=!1;this.month==(new Date).getMonth()+1&&this.year==(new Date).getFullYear()&&(new Date).getDate()==e&&(a=!0),n.data[u][t]={day:e,isActive:!1,time:null,diary:[],isToday:a}}else n.data[u][t]={day:"",diary:[]};o++}let l=0,h=0,c=(new Date).getDate();t&&t.forEach((t=>{let e=new Date(t.stop_at),a=e.getDate(),s=e.getDay(),i=new Date(e.getFullYear(),e.getMonth(),1).getDay(),r=Math.ceil((a+i)/7)-1;n.data[r][s].diary.push(t),e.toDateString()==(new Date).toDateString()&&(l=r,h=s,c=a)})),this.timeMonth=0,e&&this.putTimes(n,e),this.diaries=n,this.setShowDay(l,h,c)},putTimes(t,e){e.forEach((e=>{let a=new Date(e.created_at),n=a.getDate(),s=a.getDay(),i=new Date(a.getFullYear(),a.getMonth(),1).getDay(),r=Math.ceil((n+i)/7)-1;0==e.type?t.data[r][s].time=e.time:1==e.type?t.timeWeek[r]=e.time:2==e.type&&(this.timeMonth=e.time)}))},parseMarkdown(t){let e=en.TU.parse(t),a=tn().sanitize(e,{FORBID_TAGS:["style"],FORBID_ATTR:["style"]});return a},caculateTime(t,e){let a=new Date(t),n=new Date(e),s=n.getTime()-a.getTime(),i=Math.round(s/6e4),r=(i/60).toFixed(2);return`${i} phút (${r} giờ)`},setShowDay(t,e,a){this.showDay.diary=this.diaries.data[t][e].diary,this.showDay.day=a,this.showDay.title=`${a}/${this.month}/${this.year}`;for(let n=0;n<this.diaries.data.length;n++)for(let t=0;t<this.diaries.data[n].length;t++)this.diaries.data[n][t].isActive=!1;this.diaries.data[t][e].isActive=!0},dayBackground(t){let e=this.dayColors[t];return e||this.dayColors[this.dayColors.length-1]},weekStyle(t){let e={backgroundColor:"#fff",color:"#000",cursor:"default",padding:".5rem .25rem"},a=Math.ceil(t/60/2);return this.dayColors[a]?e.backgroundColor=this.dayColors[a]:e.backgroundColor=this.dayColors[this.dayColors.length],a>8&&(e.color="#fff"),e},saveSessionData(t,e){sessionStorage.setItem(t,JSON.stringify(e))},loadSessionData(t){let e=sessionStorage.getItem(t);if(!e)return!1;let a=JSON.parse(e);return this.showDay.diary=[],this.putDiary(a.diaries,a.times),!0},toNextMonth(){this.month++,this.month>12&&(this.month=1,this.year++),this.adjustDate()},toBeforeMonth(){this.month--,this.month<1&&(this.month=12,this.year--),this.adjustDate()},formatMonth(t){return t=String(t),t.length>1?t:"0"+t},adjustDate(t,e){t=t||this.month,e=e||this.year;let a=e+"-"+this.formatMonth(t);this.date=a}},watch:{refeshToogle:{handler(){this.getDiaries()},deep:!0},date:{handler(t){let e=t.split("-");this.year=e[0],this.month=e[1],this.getDiaries()}}}};const nn=(0,S.Z)(an,[["render",Ja],["__scopeId","data-v-5f978479"]]);var sn=nn,rn={name:"ProfileView",components:{Profile:ca,ContributionDiary:sn},data(){return{}},methods:{}};const on=(0,S.Z)(rn,[["render",Re]]);var ln=on;const hn={class:"container container-sm"},cn={class:"breadcrumb"},un=(0,s.Uk)("Cá Nhân"),dn=(0,s.Uk)("Sửa Thông Tin Cá Nhân"),gn=["src","alt"],mn=(0,s._)("br",null,null,-1),pn=(0,s._)("p",null,"Cập nhật ảnh đại diện",-1),wn={class:"input"},_n=(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"file_upload"),(0,s.Uk)(" Upload ")],-1),yn=(0,s._)("hr",null,null,-1),vn=(0,s._)("p",null,"Cập nhật thông tin cá nhân",-1),Dn={class:"input"},fn=(0,s._)("span",{class:"material-icons"},"label",-1),kn=(0,s._)("p",null,"Tên hiển thị",-1),Tn={class:"input"},bn=(0,s._)("span",{class:"material-icons"},"favorite",-1),Ln=(0,s._)("p",null,"Châm ngôn",-1),Mn=(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"save"),(0,s.Uk)(" Save ")],-1),In=(0,s._)("hr",null,null,-1),Sn=(0,s._)("p",null,"Cập nhật mật khẩu",-1),Un={class:"input"},Cn=(0,s._)("span",{class:"material-icons"},"lock",-1),xn=(0,s._)("p",null,"Mật khẩu cũ",-1),Pn={class:"input"},zn=(0,s._)("span",{class:"material-icons"},"lock",-1),Nn=(0,s._)("p",null,"Mật khẩu mới",-1),En={class:"input"},Vn=(0,s._)("span",{class:"material-icons"},"lock",-1),On=(0,s._)("p",null,"Xác nhận mật khẩu",-1),jn=(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"save"),(0,s.Uk)(" Save ")],-1);function An(t,e,a,i,r,o){const l=(0,s.up)("router-link"),h=(0,s.up)("message-popup");return(0,s.wg)(),(0,s.iD)("div",hn,[(0,s._)("div",cn,[(0,s.Wm)(l,{to:"/profile"},{default:(0,s.w5)((()=>[un])),_:1}),(0,s.Wm)(l,{to:"/profile/edit"},{default:(0,s.w5)((()=>[dn])),_:1})]),(0,s._)("form",{action:"",onSubmit:e[1]||(e[1]=(0,n.iM)((t=>o.updateAvatar()),["prevent"]))},[(0,s._)("img",{src:r.avatarPreview,alt:t.user.username,class:"d-block mx-auto avatar-xl"},null,8,gn),mn,pn,(0,s._)("label",wn,[(0,s._)("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>o.onchangeAvatar&&o.onchangeAvatar(...t))},null,32)]),_n],32),yn,(0,s._)("form",{action:"",onSubmit:e[4]||(e[4]=(0,n.iM)((t=>o.startUpdateProfile()),["prevent"]))},[vn,(0,s._)("label",Dn,[fn,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.name=t),placeholder:"Tên hiển thị"},null,512),[[n.nr,r.form.name]]),kn]),(0,s._)("label",Tn,[bn,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.slogan=t),placeholder:"Châm ngôn"},null,512),[[n.nr,r.form.slogan]]),Ln]),Mn],32),In,(0,s._)("form",{action:"",onSubmit:e[8]||(e[8]=(0,n.iM)((t=>o.startUpdatePassword()),["prevent"]))},[Sn,(0,s._)("label",Un,[Cn,(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=t=>r.passwordForm.oldPassword=t),placeholder:"Mật khẩu cũ"},null,512),[[n.nr,r.passwordForm.oldPassword]]),xn]),(0,s._)("label",Pn,[zn,(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=t=>r.passwordForm.newPassword=t),placeholder:"Mật khẩu mới"},null,512),[[n.nr,r.passwordForm.newPassword]]),Nn]),(0,s._)("label",En,[Vn,(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=t=>r.rePassword=t),placeholder:"Xác nhận mật khẩu"},null,512),[[n.nr,r.rePassword]]),On]),jn],32),(0,s.Wm)(h,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}var Fn={name:"EditProfileView",components:{MessagePopup:Oe},data(){return{form:{name:this.getUserName(),slogan:this.getUserSlogan()},passwordForm:{oldPassword:"",newPassword:""},rePassword:"",avatarPreview:X.getAvatarURL(this.getUserUsername()),avatarFile:null,isLoading:!1,message:{title:"",message:"",type:"",isDisplay:!1}}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),...(0,l.nv)(["updateProfile","updatePassword"]),...(0,l.Se)(["getUserName","getUserSlogan","getUserUsername"]),updateAvatar(){if(!this.avatarFile)return void this.showMessage("Lỗi","Vui lòng chọn ảnh đại diện","error");let t=new FormData;t.append("avatar",this.avatarFile),this.setIsLoading(!0),X.updateAvatar(t).then((t=>{200==t.status?location.reload():(this.setIsLoading(!1),this.showMessage("Lỗi!","Có lỗi xảy ra, vui lòng thử lại","error"))})).catch((t=>{this.setIsLoading(!1),console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))},async startUpdateProfile(){if(!this.form.name||!this.form.slogan)return void this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning");let t;try{t=await this.updateProfile(this.form)}catch(e){console.log(e.message);let t="";t="Invalid name"==e.message?"Tên hiển thị phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",t,"error")}t&&this.showMessage("Thành công","Cập nhật thông tin thành công","success")},async startUpdatePassword(){if(this.passwordForm.oldPassword&&this.passwordForm.newPassword)if(this.passwordForm.newPassword==this.rePassword)try{if(!await this.updatePassword(this.passwordForm))return;this.showMessage("Thành công","Cập nhật mật khẩu thành công","success"),this.$router.push("/profile")}catch(t){console.log(t.message);let e="";e="Invalid password"==t.message?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Old password is incorrect"==t.message?"Mật khẩu cũ không chính xác":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",e,"error")}else this.showMessage("Lỗi","Mật khẩu mới và xác nhận mật khẩu không khớp","warning");else this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning")},onchangeAvatar(t){let e=t.target.files||t.dataTransfer.files;e.length&&this.convertAvatar(e[0])},convertAvatar(t){let e=document.createElement("canvas"),a=e.getContext("2d"),n=document.createElement("img"),s=256;e.width=s,e.height=s,n.src=URL.createObjectURL(t),n.onload=()=>{if(URL.revokeObjectURL(n.src),n.width>n.height){let t=n.height/s,e=n.width/t;a.drawImage(n,0,0,e,s)}else{let t=n.width/s,e=n.height/t;a.drawImage(n,0,0,s,e)}this.avatarPreview=e.toDataURL(),fetch(this.avatarPreview).then((t=>{t.arrayBuffer().then((t=>{this.avatarFile=new File([t],"avatar",{type:"image/png"})}))}))}},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay}}};const Kn=(0,S.Z)(Fn,[["render",An]]);var Wn=Kn,Hn=[{path:"/profile",name:"profile",component:ln,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}},{path:"/profile/edit",name:"edit-profile",component:Wn,meta:{title:"Chỉnh Sửa Thông Tin Cá Nhân - MTLKMS"}}];const $n=t=>((0,s.dD)("data-v-520cd6b8"),t=t(),(0,s.Cn)(),t),Rn={class:"container"},Bn=$n((()=>(0,s._)("h3",null,"Đang học",-1))),qn={key:0},Zn={key:1,class:"grid-list"},Yn={class:"title"},Gn={class:"material-icons mr-2"},Jn=$n((()=>(0,s._)("div",null,[(0,s._)("button",null,[(0,s._)("span",{class:"material-icons"},"edit")]),(0,s._)("button",null,[(0,s._)("span",{class:"material-icons"},"delete_forever")])],-1))),Xn={class:"body"},Qn={class:"d-flex justify-space-between align-items-center"},ts=$n((()=>(0,s._)("h3",null,"Thẻ Lĩnh Vực",-1))),es=$n((()=>(0,s._)("span",{class:"material-icons mr-2"},"add",-1))),as=(0,s.Uk)(" Thêm "),ns=[es,as],ss={key:2},is={key:3,class:"grid-list"},rs={class:"title"},os={class:"material-icons mr-2"},ls=["onClick"],hs=$n((()=>(0,s._)("span",{class:"material-icons"},"edit",-1))),cs=[hs],us=["onClick"],ds=$n((()=>(0,s._)("span",{class:"material-icons"},"delete_forever",-1))),gs=[ds],ms={class:"body"},ps={class:"popup"},ws={class:"container container-sm"},_s={class:"d-flex justify-content-center align-items-center"},ys=$n((()=>(0,s._)("span",{class:"material-icons mr-2"},"edit",-1))),vs=$n((()=>(0,s._)("p",null,"Preview: ",-1))),Ds={class:"title"},fs={class:"d-flex align-items-center"},ks={class:"material-icons mr-2"},Ts=$n((()=>(0,s._)("button",null,[(0,s._)("span",{class:"material-icons"},"edit")],-1))),bs={class:"body"},Ls=$n((()=>(0,s._)("br",null,null,-1))),Ms=$n((()=>(0,s._)("hr",null,null,-1))),Is={class:"mb-3 mt-3"},Ss={class:"mr-3"},Us=$n((()=>(0,s._)("span",{class:"mr-3"},"Màu nền",-1))),Cs=$n((()=>(0,s._)("span",{class:"mr-3"},"Màu chữ",-1))),xs=$n((()=>(0,s._)("hr",null,null,-1))),Ps={class:"mt-3 mb-3"},zs=$n((()=>(0,s._)("p",null,"Icon: ",-1))),Ns=["onClick"],Es=$n((()=>(0,s._)("hr",null,null,-1))),Vs={class:"mt-3 mb-4"},Os=$n((()=>(0,s._)("p",null,"Tên: ",-1))),js={class:"input"},As=$n((()=>(0,s._)("span",{class:"material-icons"},"tag",-1))),Fs=$n((()=>(0,s._)("p",null,"Tên thẻ",-1))),Ks=$n((()=>(0,s._)("button",{class:"btn btn-primary"},[(0,s._)("span",{class:"material-icons mr-2"},"save"),(0,s.Uk)(" Lưu ")],-1))),Ws={class:"popup"},Hs={class:"container container-sm"},$s={class:"d-flex justify-content-center align-items-center"},Rs=$n((()=>(0,s._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),Bs=(0,s.Uk)("Bạn có chắc muốn xóa thẻ "),qs=(0,s.Uk)(" không?"),Zs=$n((()=>(0,s._)("p",null,"Thẻ này sẽ bị xóa vĩnh viễn.",-1))),Ys={class:"mt-3 mb-3"},Gs=$n((()=>(0,s._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),Js=(0,s.Uk)(" Xóa "),Xs=[Gs,Js];function Qs(t,e,a,r,o,l){const h=(0,s.up)("router-link"),c=(0,s.up)("MessagePopup");return(0,s.wg)(),(0,s.iD)("div",Rn,[Bn,0==o.learningTags.length?((0,s.wg)(),(0,s.iD)("div",qn," Bạn hiện chưa học gì ")):((0,s.wg)(),(0,s.iD)("div",Zn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.learningTags,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,s._)("div",Yn,[(0,s.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,s.w5)((()=>[(0,s._)("span",Gn,(0,i.zw)(t.icon),1),(0,s._)("b",null,(0,i.zw)(t.name),1)])),_:2},1032,["to","id"]),Jn]),(0,s._)("div",Xn,[(0,s._)("p",null,"Hôm nay: "+(0,i.zw)(l.showTime(t.time_today)),1),(0,s._)("p",null,"Tuần này: "+(0,i.zw)(l.showTime(t.time_week)),1),(0,s._)("p",null,"Tháng này: "+(0,i.zw)(l.showTime(t.time_month)),1),(0,s._)("p",null,"Năm nay: "+(0,i.zw)(l.showTime(t.time_year)),1),(0,s._)("p",null,"Tổng thời gian học: "+(0,i.zw)(l.showTime(t.time_total)),1)])],4)])))),128))])),(0,s._)("div",Qn,[ts,(0,s._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.openCreateTagPopup&&l.openCreateTagPopup(...t))},ns)]),0==o.tags.length?((0,s.wg)(),(0,s.iD)("div",ss," Bạn chưa tạo thẻ nào ")):((0,s.wg)(),(0,s.iD)("div",is,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tags,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,s._)("div",rs,[(0,s.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,s.w5)((()=>[(0,s._)("span",os,(0,i.zw)(t.icon),1),(0,s._)("b",null,(0,i.zw)(t.name),1)])),_:2},1032,["to","id"]),(0,s._)("div",null,[(0,s._)("button",{onClick:t=>l.openEditTagPopup(e)},cs,8,ls),(0,s._)("button",{onClick:t=>l.openDeleteTagPopup(e)},gs,8,us)])]),(0,s._)("div",ms,[(0,s._)("p",null,"Hôm nay: "+(0,i.zw)(l.showTime(t.time_today)),1),(0,s._)("p",null,"Tuần này: "+(0,i.zw)(l.showTime(t.time_week)),1),(0,s._)("p",null,"Tháng này: "+(0,i.zw)(l.showTime(t.time_month)),1),(0,s._)("p",null,"Năm nay: "+(0,i.zw)(l.showTime(t.time_year)),1),(0,s._)("p",null,"Tổng: "+(0,i.zw)(l.showTime(t.time_total)),1)])],4)])))),128))])),(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",ps,[(0,s._)("div",{class:"popup-bg",onClick:e[1]||(e[1]=t=>o.editTagData.isDisplay=!1)}),(0,s._)("div",ws,[(0,s._)("div",null,[(0,s._)("div",_s,[ys,(0,s._)("h3",null,(0,i.zw)(o.editTagData.title),1)]),(0,s._)("span",{class:"material-icons btn-close",onClick:e[2]||(e[2]=t=>o.editTagData.isDisplay=!1)},"close")]),(0,s._)("div",null,[vs,(0,s._)("div",{class:"grid-item",style:(0,i.j5)({backgroundColor:o.editTagData.bgColor,color:o.editTagData.textColor})},[(0,s._)("div",Ds,[(0,s._)("div",fs,[(0,s._)("span",ks,(0,i.zw)(o.editTagData.icon),1),(0,s._)("b",null,(0,i.zw)(o.editTagData.name),1)]),Ts]),(0,s._)("div",bs,[(0,s._)("p",null,"Hôm nay: "+(0,i.zw)(o.editTagData.times.today)+" giờ",1),(0,s._)("p",null,"Tuần này: "+(0,i.zw)(o.editTagData.times.week)+" giờ",1),(0,s._)("p",null,"Tháng này: "+(0,i.zw)(o.editTagData.times.month)+" giờ",1),(0,s._)("p",null,"Năm nay: "+(0,i.zw)(o.editTagData.times.year)+" giờ",1),(0,s._)("p",null,"Tổng: "+(0,i.zw)(o.editTagData.times.total)+" giờ",1)])],4),Ls,Ms,(0,s._)("form",{action:"",onSubmit:e[6]||(e[6]=(0,n.iM)(((...t)=>l.submitEditTag&&l.submitEditTag(...t)),["prevent"]))},[(0,s._)("div",Is,[(0,s._)("span",Ss,[Us,(0,s.wy)((0,s._)("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>o.editTagData.bgColor=t),required:""},null,512),[[n.nr,o.editTagData.bgColor]])]),(0,s._)("span",null,[Cs,(0,s.wy)((0,s._)("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=t=>o.editTagData.textColor=t),required:""},null,512),[[n.nr,o.editTagData.textColor]])])]),xs,(0,s._)("div",Ps,[zs,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.icons,((t,e)=>((0,s.wg)(),(0,s.iD)("span",{key:e},[(0,s._)("span",{class:"material-icons btn-icon",onClick:e=>o.editTagData.icon=t},(0,i.zw)(t),9,Ns)])))),128))]),Es,(0,s._)("div",Vs,[Os,(0,s._)("label",js,[As,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>o.editTagData.name=t),placeholder:"Tên thẻ",required:""},null,512),[[n.nr,o.editTagData.name]]),Fs])]),Ks],32)])])],512),[[n.F8,o.editTagData.isDisplay]])])),_:1}),(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",Ws,[(0,s._)("div",{class:"popup-bg",onClick:e[7]||(e[7]=t=>o.deleteTagData.isDisplay=!1)}),(0,s._)("div",Hs,[(0,s._)("div",null,[(0,s._)("div",$s,[Rs,(0,s._)("h3",null,(0,i.zw)(o.deleteTagData.title),1)]),(0,s._)("span",{class:"material-icons btn-close",onClick:e[8]||(e[8]=t=>o.deleteTagData.isDisplay=!1)},"close")]),(0,s._)("div",null,[(0,s._)("p",null,[Bs,(0,s._)("b",null,(0,i.zw)(o.deleteTagData.name),1),qs]),Zs,(0,s._)("div",Ys,[(0,s._)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>l.deleteTag&&l.deleteTag(...t))},Xs)])])])],512),[[n.F8,o.deleteTagData.isDisplay]])])),_:1}),(0,s.Wm)(c,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}var ti={name:"SDListView",components:{MessagePopup:Oe},created(){this.loadSessionData()||this.getTags()},data(){return{tags:[],learningTags:[],editTagData:{title:"Sửa thẻ",index:0,id:0,icon:"",name:"",textColor:"",bgColor:"",times:{today:0,week:0,month:0,year:0,total:0},isDisplay:!1},deleteTagData:{title:"Xóa thẻ",isDisplay:!1,index:0,id:0,name:""},icons:["school","sports_esports","cake","self_improvement","water","nights_stay","sports_gymnastics","piano","music_note","movie","equalizer","shopping_cart","credit_card","receipt_long","attach_money","sell","work","calculate","edit_notifications","mail","notifications","hub","smartphone","print","computer","desktop_windows","headphones","smart_toy","keyboard","memory","menu_book","star","library_books","auto_stories","local_library","import_contacts","sticky_note_2","note","laptop_chromebook","style","edit","construction","draw","mic","palette","code","terminal","data_object","data_array"],message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{...(0,l.OI)(["setIsLoading"]),getTags(){this.setIsLoading(!0),X.get("/study-diary/"+this.user.id).then((t=>{this.setIsLoading(!1),200===t.status?t.json().then((t=>{this.learningDiary?t.data.forEach((t=>{t.id==this.learningDiary.sdtag?this.learningTags.push(t):this.tags.push(t)})):this.tags=t.data,this.saveSessionData()})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Không thể lấy dữ liệu","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Lỗi kết nối đến server","error")}))},openCreateTagPopup(){this.editTagData.title="Tạo thẻ",this.editTagData.id=0,this.editTagData.icon="star",this.editTagData.name="New Tag",this.editTagData.textColor="#000000",this.editTagData.bgColor="#ffa799",this.editTagData.times={today:0,week:0,month:0,year:0,total:0},this.editTagData.isDisplay=!0},openEditTagPopup(t){this.editTagData.title="Sửa thẻ "+this.tags[t].id,this.editTagData.index=t,this.editTagData.id=this.tags[t].id,this.editTagData.icon=this.tags[t].icon,this.editTagData.name=this.tags[t].name,this.editTagData.textColor=this.tags[t].text_color,this.editTagData.bgColor=this.tags[t].bg_color,this.editTagData.times.today=this.tags[t].time_today,this.editTagData.times.week=this.tags[t].time_week,this.editTagData.times.month=this.tags[t].time_month,this.editTagData.times.year=this.tags[t].time_year,this.editTagData.times.total=this.tags[t].time_total,this.editTagData.isDisplay=!0},openDeleteTagPopup(t){this.deleteTagData.title="Xóa thẻ "+this.tags[t].id,this.deleteTagData.index=t,this.deleteTagData.id=this.tags[t].id,this.deleteTagData.name=this.tags[t].name,this.deleteTagData.isDisplay=!0},submitEditTag(){0===this.editTagData.id?this.createTag():this.updateTag()},createTag(){this.setIsLoading(!0),X.post("/study-diary",{name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags.push(t.result),sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Thêm thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Thêm thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},updateTag(){this.setIsLoading(!0),X.put("/study-diary",{id:this.editTagData.id,name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags[this.editTagData.index]=t.result,sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Cập nhật thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Cập nhật thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},deleteTag(){this.setIsLoading(!0),X["delete"]("/study-diary",{id:this.deleteTagData.id}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((()=>{this.tags.splice(this.deleteTagData.index,1),sessionStorage.clear(),this.saveSessionData(),this.showMessage("Thành công","Xóa thẻ thành công","success"),this.deleteTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Xóa thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.deleteTagData.isDisplay=!1,console.log(t)}))},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},showTime(t){let e=(t/60).toFixed(2);return`${e} giờ (${t} phút)`},saveSessionData(){sessionStorage.setItem("tags",JSON.stringify({tags:this.tags,learningTags:this.learningTags}))},loadSessionData(){let t=sessionStorage.getItem("tags");if(t){let e=JSON.parse(t);return this.tags=e.tags,this.learningTags=e.learningTags,!0}return!1}},computed:{...(0,l.rn)(["learningDiary","user"])}};const ei=(0,S.Z)(ti,[["render",Qs],["__scopeId","data-v-520cd6b8"]]);var ai=ei;const ni=t=>((0,s.dD)("data-v-1d6e0569"),t=t(),(0,s.Cn)(),t),si={class:"container"},ii={class:"breadcrumb"},ri=(0,s.Uk)("Nhật Ký T.Gian Học"),oi={key:0},li=ni((()=>(0,s._)("span",{class:"material-icons"},"stop",-1))),hi=[li],ci=(0,s.Uk)("Bắt đầu: "),ui=(0,s.Uk)("Đang học "),di=ni((()=>(0,s._)("span",{class:"material-icons"},"play_arrow",-1))),gi=[di],mi={class:"d-flex justify-content-center align-items-center"},pi={class:"material-icons mr-2"},wi=ni((()=>(0,s._)("td",null,"Hôm nay:",-1))),_i=ni((()=>(0,s._)("td",null,"Tuần:",-1))),yi=ni((()=>(0,s._)("td",null,"Tháng:",-1))),vi=ni((()=>(0,s._)("td",null,"Năm:",-1))),Di=ni((()=>(0,s._)("td",null,"Tổng:",-1))),fi={class:"popup"},ki={class:"container container-md"},Ti=ni((()=>(0,s._)("div",{class:"d-flex justify-content-center align-items-center"},[(0,s._)("span",{class:"material-icons mr-2"},"delete_forever"),(0,s._)("h3",null,"Không học nữa à?")],-1))),bi=ni((()=>(0,s._)("p",null,"Bạn đã học được gì rồi? Viết xuống đây nhé!",-1))),Li={class:"text-secondary"},Mi=(0,s.Uk)(" (Cú pháp viết chuẩn "),Ii=(0,s.Uk)("Markdown"),Si=(0,s.Uk)(") "),Ui=ni((()=>(0,s._)("p",null,"Preview: ",-1))),Ci=["innerHTML"],xi=ni((()=>(0,s._)("span",{class:"material-icons"},"save",-1))),Pi=(0,s.Uk)(" Lưu "),zi=[xi,Pi],Ni=ni((()=>(0,s._)("h3",null,"Nhật Ký Học Tập",-1)));function Ei(t,e,a,r,o,l){const h=(0,s.up)("router-link"),c=(0,s.up)("TextArea"),u=(0,s.up)("ContributionDiary"),d=(0,s.up)("MessagePopup");return(0,s.wg)(),(0,s.iD)("div",si,[(0,s._)("div",ii,[(0,s.Wm)(h,{to:"/users/"+o.tagData.username},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(o.tagData.username),1)])),_:1},8,["to"]),(0,s.Wm)(h,{to:"/study-diary"},{default:(0,s.w5)((()=>[ri])),_:1}),(0,s.Wm)(h,{to:"/study-diary/"+o.tagData.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(o.tagData.name),1)])),_:1},8,["to"])]),(0,s._)("div",{class:"header mb-4",style:(0,i.j5)({backgroundColor:o.tagData.bg_color,color:o.tagData.text_color})},[(0,s._)("div",null,[1==o.learningDiaryData.is_learning?((0,s.wg)(),(0,s.iD)("div",oi,[(0,s._)("div",{class:(0,i.C_)({icon:!0,active:l.isAuth}),onClick:e[0]||(e[0]=t=>l.showStopLearnPopup())},hi,2),(0,s._)("p",null,[ci,(0,s._)("b",null,(0,i.zw)(l.convertISOTimeToLocalDate(o.learningDiaryData.start_at)),1)]),(0,s._)("p",null,[ui,(0,s._)("b",null,(0,i.zw)(l.showStopwatchTime),1)])])):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,i.C_)({icon:!0,active:l.isAuth}),onClick:e[1]||(e[1]=t=>l.startLearn())},gi,2))]),(0,s._)("div",null,[(0,s._)("div",mi,[(0,s._)("span",pi,(0,i.zw)(o.tagData.icon),1),(0,s._)("h3",null,(0,i.zw)(o.tagData.name),1)]),(0,s._)("table",null,[(0,s._)("tr",null,[wi,(0,s._)("th",null,(0,i.zw)(l.minutesToStr(o.tagData.time_today)),1)]),(0,s._)("tr",null,[_i,(0,s._)("th",null,(0,i.zw)(l.minutesToStr(o.tagData.time_week)),1)]),(0,s._)("tr",null,[yi,(0,s._)("th",null,(0,i.zw)(l.minutesToStr(o.tagData.time_month)),1)]),(0,s._)("tr",null,[vi,(0,s._)("th",null,(0,i.zw)(l.minutesToStr(o.tagData.time_year)),1)]),(0,s._)("tr",null,[Di,(0,s._)("th",null,(0,i.zw)(l.minutesToStr(o.tagData.time_total)),1)])])])],4),(0,s.Wm)(n.uT,{name:"fade-in"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",fi,[(0,s._)("div",{class:"popup-bg",onClick:e[2]||(e[2]=t=>o.stopLearnPopup.isDisplay=!1)}),(0,s._)("div",ki,[(0,s._)("div",null,[Ti,(0,s._)("span",{class:"material-icons btn-close",onClick:e[3]||(e[3]=t=>o.stopLearnPopup.isDisplay=!1)},"close")]),(0,s._)("div",null,[bi,(0,s._)("p",Li,[Mi,(0,s.Wm)(h,{to:"/"},{default:(0,s.w5)((()=>[Ii])),_:1}),Si]),(0,s.Wm)(c,{modelValue:o.stopLearnPopup.log,"onUpdate:modelValue":e[4]||(e[4]=t=>o.stopLearnPopup.log=t),rows:20,placeholder:"Viết những gì bạn vừa học xuống đây nhé!"},null,8,["modelValue"]),Ui,(0,s._)("div",{class:"quote",innerHTML:o.stopLearnPopup.preview},null,8,Ci),(0,s._)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=t=>l.stopLearn())},zi)])])],512),[[n.F8,o.stopLearnPopup.isDisplay]])])),_:1}),(0,s._)("div",null,[Ni,0!=o.tagData.id?((0,s.wg)(),(0,s.j4)(u,{key:0,tag:o.tagData.id,userID:o.tagData.user,"refesh-toogle":o.refeshToggle},null,8,["tag","userID","refesh-toogle"])):(0,s.kq)("",!0)]),(0,s.Wm)(d,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}const Vi={class:"header"},Oi=["rows","placeholder"];function ji(t,e,a,i,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Vi,[(0,s._)("span",{onClick:e[0]||(e[0]=t=>o.insert("**Bold text**")),class:"material-icons btn-icon",title:"In đậm"},"format_bold"),(0,s._)("span",{onClick:e[1]||(e[1]=t=>o.insert("*Italic text*")),class:"material-icons btn-icon",title:"In nghiêng"},"format_italic"),(0,s._)("span",{onClick:e[2]||(e[2]=t=>o.insert("> Quote")),class:"material-icons btn-icon",title:"Quote"},"format_quote"),(0,s._)("span",{onClick:e[3]||(e[3]=t=>o.insert("* List Item")),class:"material-icons btn-icon",title:"Generic List"},"format_list_bulleted"),(0,s._)("span",{onClick:e[4]||(e[4]=t=>o.insert("1. List Item")),class:"material-icons btn-icon",title:"Numbered List"},"format_list_numbered"),(0,s._)("span",{onClick:e[5]||(e[5]=t=>o.insert("[Alias](https://)")),class:"material-icons btn-icon",title:"Link"},"insert_link"),(0,s._)("span",{onClick:e[6]||(e[6]=t=>o.insert("![alt](https://)")),class:"material-icons btn-icon",title:"Image"},"insert_photo")]),(0,s.wy)((0,s._)("textarea",{rows:a.rows,placeholder:a.placeholder,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value=t),onKeydown:e[8]||(e[8]=t=>o.onKeyDown(t))},null,40,Oi),[[n.nr,o.value]])])}var Ai={name:"TextArea",props:{modelValue:{type:String},placeholder:{type:String},rows:{type:Number,default:30}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{insert(t){this.value=this.value+t},onKeyDown(t){let e=this.value.slice(0,t.target.selectionStart),a=this.value.slice(t.target.selectionStart);if("Tab"==t.key&&(t.preventDefault(),this.value=`${e}\t${a}`,t.selectionEnd=t.selectionStart+1),"Enter"==t.key){let n=e.split("\n").pop(),s=n.trim().slice(0,1),i="";">"==s?i=">":"*"==s?i="*":"1."==s?i="1.":"-"==s?i="-":"+"==s&&(i="+"),i&&(t.preventDefault(),this.value=`${e}\n${i} ${a}`,t.selectionEnd=t.selectionStart+i.length+1)}}}};const Fi=(0,S.Z)(Ai,[["render",ji],["__scopeId","data-v-299c14cb"]]);var Ki=Fi,Wi={name:"SDTagView",created(){this.getTagData()},components:{MessagePopup:Oe,TextArea:Ki,ContributionDiary:sn},data(){return{tagData:{id:0,name:"",bg_color:"inherit",text_color:"inherit",icon:"",time_today:0,time_week:0,time_month:0,time_year:0,time_total:0},learningDiaryData:{id:0,sdtag:0,user:0,log:"",is_learning:0,start_at:"",stop_at:""},stopLearnPopup:{isDisplay:!1,log:"",preview:""},message:{title:"",message:"",type:"",isDisplay:!1},stopwatch:0,refeshToggle:!1}},methods:{...(0,l.OI)(["setTitle","setIsLoading","setLearningDiary"]),...(0,l.nv)(["getLearningDiary","checkLogin"]),async getTagData(){let t,e;this.setIsLoading(!0);try{if(t=await X.get("/study-diary/tag/"+this.$route.params.id),e=await t.json(),200!=t.status)throw this.$router.push("/study-diary"),new Error(e.error)}catch(a){throw this.$router.push("/study-diary"),a}this.tagData=e.data,this.setTitle(this.tagData.name+" - Study Diary - MTLKMS"),this.isAuth?this.learningDiary.sdtag==this.tagData.id&&(this.learningDiaryData=this.learningDiary,this.startStopwatch()):await this.getLearningDiaryData(),this.setIsLoading(!1)},async getLearningDiaryData(){try{let t=await this.getLearningDiary(this.tagData.user);if(!t)return;this.tagData.id==t.sdtag&&(this.learningDiaryData=t,this.startStopwatch())}catch(t){console.log(t)}},startLearn(){this.isAuth&&(this.learningDiary?this.showMessage("Lỗi","Bạn đang học môn khác rồi!","warning"):(this.setIsLoading(!0),X.post("/study-diary/diary",{sdtag:this.tagData.id}).then((t=>{this.setIsLoading(!1),t.json().then((e=>{if(200===t.status){let t=e.data;t.name=this.tagData.name,this.learningDiaryData=t,this.setLearningDiary(t),sessionStorage.clear(),this.startStopwatch()}else console.log(e.error),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ, vui lòng thử lại sau","error")}))))},async stopLearn(){if(0===this.stopLearnPopup.log.length)return void this.showMessage("Lỗi","Bạn chưa viết gì","warning");this.setIsLoading(!0);let t=await X.put("/study-diary/diary",{id:this.learningDiaryData.id,log:this.stopLearnPopup.log}),e=await t.json();if(200!==t.status)throw this.setIsLoading(!1),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),new Error(e.error);this.setLearningDiary(!1),this.learningDiaryData.is_learning=0,this.stopLearnPopup.isDisplay=!1,this.stopLearnPopup.log="",this.tagData=e.data,sessionStorage.clear(),this.refeshToggle=!this.refeshToggle,this.showMessage("Thành công","Lưu thành công","success"),this.checkLogin()},showStopLearnPopup(){this.isAuth&&(this.stopLearnPopup.isDisplay=!0)},minutesToStr(t){let e=(t/60).toFixed(2);return`${e} giờ (${t} phút)`},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},convertISOTimeToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},startStopwatch(){let t=this.learningDiaryData.start_at,e=(new Date).toISOString(),a=new Date(e)-new Date(t),n=Math.round(a/1e3);this.stopwatch=n,this.loopStopwatch()},loopStopwatch(){this.learningDiaryData.is_learning&&setTimeout((()=>{this.stopwatch++,this.loopStopwatch()}),1e3)}},watch:{"stopLearnPopup.log"(t){this.stopLearnPopup.preview=en.TU.parse(t)}},computed:{...(0,l.rn)(["learningDiary","user"]),showStopwatchTime(){let t=Math.floor(this.stopwatch/60),e=this.stopwatch%60,a=(t/60).toFixed(2);return`${t} phút ${e} giây (${a} giờ)`},isAuth(){return this.tagData.user==this.user.id}}};const Hi=(0,S.Z)(Wi,[["render",Ei],["__scopeId","data-v-1d6e0569"]]);var $i=Hi,Ri=[{path:"/study-diary",name:"study-diary",component:ai,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}},{path:"/study-diary/:id",name:"study-diary-tag",component:$i,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}}];const Bi={class:"container container-md grid"},qi=["src","alt"],Zi={class:"ml-3"},Yi={class:"text-secondary"};function Gi(t,e,a,n,r,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Bi,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.users,((t,e)=>((0,s.wg)(),(0,s.j4)(l,{key:e,class:"user",to:"/users/"+t.username},{default:(0,s.w5)((()=>[(0,s._)("img",{src:o.getAvatarURL(t.username),alt:t.username+"-avatar",class:"avatar"},null,8,qi),(0,s._)("div",Zi,[(0,s._)("p",null,[(0,s._)("b",null,(0,i.zw)(t.name),1)]),(0,s._)("p",Yi,(0,i.zw)(t.username),1)])])),_:2},1032,["to"])))),128))])}var Ji={name:"UserListView",data(){return{}},created(){this.fetchUsers()},computed:{...(0,l.rn)(["users"])},methods:{...(0,l.nv)(["fetchUsers"]),async getUsersData(){try{await this.fetchUsers()}catch(t){console.log("[getUsersData - UserListView]",t)}},getAvatarURL(t){return X.getAvatarURL(t)}}};const Xi=(0,S.Z)(Ji,[["render",Gi],["__scopeId","data-v-778dcb13"]]);var Qi=Xi;const tr={key:0,class:"container container-md"},er=(0,s._)("hr",null,null,-1),ar=(0,s._)("br",null,null,-1),nr=(0,s._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function sr(t,e,a,n,i,r){const o=(0,s.up)("ProfileComponent"),l=(0,s.up)("SDTagList"),h=(0,s.up)("ContributionDiary");return r.isUserLoaded()?((0,s.wg)(),(0,s.iD)("div",tr,[(0,s.Wm)(o,{"user-data":i.user},null,8,["user-data"]),er,(0,s.Wm)(l,{userID:i.user.id},null,8,["userID"]),ar,nr,(0,s.Wm)(h,{userID:i.user.id},null,8,["userID"])])):(0,s.kq)("",!0)}const ir={class:"grid"},rr={class:"material-icons mr-2"};function or(t,e,a,n,r,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ir,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.sdTags,((t,e)=>((0,s.wg)(),(0,s.j4)(l,{class:"tag",key:e,to:`/study-diary/${t.id}`,style:(0,i.j5)({backgroundColor:t.bg_color,color:t.text_color})},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("span",rr,(0,i.zw)(t.icon),1),(0,s._)("b",null,(0,i.zw)(t.name),1)]),(0,s._)("div",null,(0,i.zw)((t.time_total/60).toFixed(2))+" giờ ",1)])),_:2},1032,["to","style"])))),128))])])}var lr={name:"SDTagList",props:{userID:{type:Number,required:!0}},created(){this.loadSessionData()||this.getSDTags()},data(){return{sdTags:[]}},methods:{...(0,l.OI)(["setIsLoading"]),async getSDTags(){this.setIsLoading(!0);try{let t=await X.get("/study-diary/"+this.userID),e=await t.json();if(this.setIsLoading(!1),200!==t.status)throw new Error(e.message);this.sdTags=e.data,this.saveSessionData(e.data)}catch(t){this.setIsLoading(!1),console.error(t)}},saveSessionData(t){sessionStorage.setItem("sdTags"+this.userID,JSON.stringify(t))},loadSessionData(){return!!sessionStorage.getItem("sdTags"+this.userID)&&(this.sdTags=JSON.parse(sessionStorage.getItem("sdTags"+this.userID)),!0)}}};const hr=(0,S.Z)(lr,[["render",or],["__scopeId","data-v-ef393a44"]]);var cr=hr,ur={name:"UserView",components:{ProfileComponent:ca,ContributionDiary:sn,SDTagList:cr},data(){return{user:{}}},created(){this.getUserData()},computed:{...(0,l.rn)(["users"])},methods:{...(0,l.nv)(["fetchUsers"]),...(0,l.OI)(["setTitle"]),isUserLoaded(){return Object.keys(this.user).length>0},async getUserData(){await this.fetchUsers();let t=this.$route.params.username;this.users[t]?this.user=this.users[t]:this.$router.push("/users"),this.setTitle(this.user.name+" - Trang Cá Nhân - MTLKMS")}}};const dr=(0,S.Z)(ur,[["render",sr]]);var gr=dr,mr=[{path:"/users",name:"users",component:Qi,meta:{title:"Danh Sách Các Vịt - MTLKMS"}},{path:"/users/:username",name:"user",component:gr,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}}];const pr={class:"container container-sm"},wr=(0,s._)("span",{class:"material-icons mr-2"},"edit_note",-1),_r=(0,s.Uk)(" Hướng dẫn cú pháp Markdown (MD) ");function yr(t,e,a,n,i,r){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",pr,[(0,s.Wm)(o,{class:"link",to:"/guide/markdown"},{default:(0,s.w5)((()=>[wr,_r])),_:1})])}var vr={name:"GuideView"};const Dr=(0,S.Z)(vr,[["render",yr]]);var fr=Dr;const kr={class:"container container-md"},Tr=["innerHTML"];function br(t,e,a,n,i,r){return(0,s.wg)(),(0,s.iD)("div",kr,[(0,s._)("p",{innerHTML:r.parseMarkdown(i.content)},null,8,Tr)])}let Lr="";Lr+="# Hướng dẫn cú pháp Markdown (MD)\n",Lr+="\n",Lr+="## Tiêu đề\n",Lr+="Trong markdown, để viết ra tiêu đề (Heading), ta đặt 1 (hoặc nhiều) dấu `#` ở đầu dòng, tùy theo phân cấp tiêu đề ta muốn viết.\n",Lr+="\n",Lr+="Tiêu đề cấp 1 là 1 dấu `#`, cấp 2 là 2 dấu `#`, cứ thế suy ra.\n",Lr+="\n",Lr+="*MD:*\n",Lr+="``` md\n",Lr+="# Heading 1  \n",Lr+="## Heading 2  \n",Lr+="### Heading 3  \n",Lr+="#### Heading 4\n",Lr+="```\n",Lr+="\n",Lr+="*Text:*\n",Lr+="> # Heading 1\n",Lr+="> ## Heading 2\n",Lr+="> ### Heading 3\n",Lr+="> #### Heading 4\n",Lr+="\n",Lr+="## Highlight\n",Lr+="Để in nghiêng, ta dùng dấu `*` bao quanh đoạn văn bản.  \n",Lr+="Để in đậm, ta dùng dấu `**` bao quanh đoạn văn bản.  \n",Lr+="Để vừa in nghiêng vừa bôi đậm, ta dùng dấu `***` bao quanh đoạn văn bản.\n",Lr+="\n",Lr+="Để viết inline code, ta dùng dấu ` bao quanh đoạn văn bản.  \n",Lr+="Để viết block code, ta đặt dấu ``` ở dòng đầu và dòng cuối đoạn văn bản.\n",Lr+="\n",Lr+="Ví dụ:\n",Lr+="\n",Lr+="*MD:*\n",Lr+="``` md\n",Lr+="*Đoạn văn bản in nghiêng*\n",Lr+="**Đoạn văn bản in đậm**\n",Lr+="***Đoạn văn bản vừa in nghiêng vừa bôi đậm***\n",Lr+="\n",Lr+="`Inline code`\n",Lr+="\n",Lr+="``` (language)\n",Lr+="Block code\n",Lr+="Block\n",Lr+="Code\n",Lr+="``` // End\n",Lr+="```\n",Lr+="\n",Lr+="*Text:*\n",Lr+="> *Đoạn văn bản in nghiêng*  \n",Lr+="> **Đoạn văn bản in đậm**  \n",Lr+="> ***Đoạn văn bản vừa in nghiêng vừa bôi đậm***  \n",Lr+="> \n",Lr+="> `Inline code`\n",Lr+="> \n",Lr+="> ``` md\n",Lr+="> Block code\n",Lr+="> Block\n",Lr+="> Code\n",Lr+="> ```\n",Lr+="\n",Lr+="## Link, Image\n",Lr+="### Link\n",Lr+="``` md\n",Lr+="// Link:\n",Lr+="[Text](url)\n",Lr+="\n",Lr+="// Example:\n",Lr+="[Click me](https://mtlkms.github.io)\n",Lr+="```\n",Lr+="\n",Lr+="> // Link  \n",Lr+="> [Text](url)\n",Lr+="> \n",Lr+="> // Example:  \n",Lr+="> [Click me](https://mtlkms.github.io)\n",Lr+="\n",Lr+="### Image\n",Lr+="``` md\n",Lr+="// Image:  \n",Lr+="![alt](url)\n",Lr+="\n",Lr+="// Example:  \n",Lr+="![cuikho210](https://vitcon.cf/user/cuikho210/avatar)\n",Lr+="```\n",Lr+="\n",Lr+="> // Image:  \n",Lr+="> ![alt](url)\n",Lr+="> \n",Lr+="> // Example:  \n",Lr+="> ![cuikho210](https://mtlkms.vitcon.cf/user/cuikho210/avatar)\n",Lr+="\n",Lr+="## List\n",Lr+="Để tạo danh sách dạng gạch đầu dòng, ta đặt dấu `* ` hoặc `- ` trước mỗi đầu dòng.  \n",Lr+="Để tạo danh sách dạng số thứ tự, ta đặt dấu `1. ` trước mỗi đầu dòng.  \n",Lr+="\n",Lr+="Ví dụ:\n",Lr+="\n",Lr+="``` md\n",Lr+="1. Item 1\n",Lr+="1. Item 2\n",Lr+="1. Item 3\n",Lr+="\n",Lr+="- Item 1\n",Lr+="- Item 2\n",Lr+="- Item 3\n",Lr+="\n",Lr+="* Item 1\n",Lr+="* Item 2\n",Lr+="* Item 3\n",Lr+="```\n",Lr+="\n",Lr+="> 1. Item 1\n",Lr+="> 1. Item 2\n",Lr+="> 1. Item 3\n",Lr+="> \n",Lr+="> - Item 1\n",Lr+="> - Item 2\n",Lr+="> - Item 3\n",Lr+="> \n",Lr+="> * Item 1\n",Lr+="> * Item 2\n",Lr+="> * Item 3\n",Lr+="\n",Lr+="## Xuống dòng\n",Lr+="Để xuống dòng, bạn chỉ cần viết 2 dấu cách liên tiếp ở cuối dòng\n",Lr+="\n",Lr+="Ví dụ: \n",Lr+="``` md\n",Lr+="Đây là dòng 1  \n",Lr+="Đây là dòng 2\n",Lr+="```\n",Lr+="\n",Lr+="> Đây là dòng 1  \n",Lr+="> Đây là dòng 2\n",Lr+="\n",Lr+="## Kẻ ngang dòng\n",Lr+="Để kẻ ngang dòng, bạn chỉ cần viết `***`\n",Lr+="\n",Lr+="Ví dụ: \n",Lr+="``` md\n",Lr+="Văn bản 1\n",Lr+="***\n",Lr+="Văn bản 2\n",Lr+="```\n",Lr+="> Văn bản 1\n",Lr+="> ***\n",Lr+="> Văn bản 2\n",Lr+="\n",Lr+="## Blockquote\n",Lr+="Để tạo 1 đoạn văn bản trích dẫn, ta đặt dấu `>` trước mỗi đầu dòng\n",Lr+="\n",Lr+="Ví dụ:\n",Lr+="``` md\n",Lr+="Trích dẫn:  \n",Lr+="> Vịt Chúa từng nói:  \n",Lr+="> Loài vịt chúng ta rất ngu, người ta chỉ cần cầm 1 con vịt đi phía trước là cả đàn vịt sẽ chạy theo sau.\n",Lr+="```\n",Lr+="\n",Lr+="> Trích dẫn:  \n",Lr+="> > Vịt Chúa từng nói:  \n",Lr+="> > Loài vịt chúng ta rất ngu, người ta chỉ cần cầm 1 con vịt đi phía trước là cả đàn vịt sẽ chạy theo sau.\n",Lr+="\n",Lr+="## Ngắt đoạn\n",Lr+="Để ngắt đoạn, chỉ cần viết 2 dấu xuống dòng liên tiếp\n",Lr+="\n",Lr+="Ví dụ:\n",Lr+="``` md\n",Lr+="Đây là đoạn 1  \n",Lr+="Đoạn 1 ngắn thế này thôi\n",Lr+="\n",Lr+="Đây là đoạn 2  \n",Lr+="Đoạn 2 ví dụ ngắt đoạn\n",Lr+="```\n",Lr+="\n",Lr+="> Đây là đoạn 1  \n",Lr+="> Đoạn 1 ngắn thế này thôi\n",Lr+="> \n",Lr+="> Đây là đoạn 2  \n",Lr+="> Đoạn 2 ví dụ ngắt đoạn\n";var Mr=Lr;en.TU.setOptions({highlight:function(t,e){const a=Xa.Z.getLanguage(e)?e:"plaintext";return Xa.Z.highlight(t,{language:a}).value},langPrefix:"hljs language-"});var Ir={name:"markdownGuideView",data(){return{content:Mr}},methods:{parseMarkdown(t){let e=en.TU.parse(t),a=tn().sanitize(e,{FORBID_TAGS:["style"],FORBID_ATTR:["style"]});return a}}};const Sr=(0,S.Z)(Ir,[["render",br]]);var Ur=Sr,Cr=[{path:"/guide",name:"guide",component:fr,meta:{title:"Hướng Dẫn - MTLKMS"}},{path:"/guide/markdown",name:"guide-markdown",component:Ur,meta:{title:"Cú Pháp Markdown (MD) - MTLKMS"}}];const xr=t=>((0,s.dD)("data-v-30b72668"),t=t(),(0,s.Cn)(),t),Pr={class:"container container-md"},zr=xr((()=>(0,s._)("h3",null,"Thông Con Báo",-1))),Nr={key:0,class:"notifi notifi-danger"},Er=(0,s.Uk)(" Bạn đang học môn "),Vr=xr((()=>(0,s._)("div",{class:"notifi notifi-success"},[(0,s.Uk)(" Thống kê ngày sẽ được tính vào lúc "),(0,s._)("b",null,"23:59:50 mỗi ngày"),(0,s.Uk)("! ")],-1))),Or=xr((()=>(0,s._)("div",{class:"notifi notifi-success"},[(0,s.Uk)(" Thống kê tuần sẽ được tính vào lúc "),(0,s._)("b",null,"23:59:50 mỗi thứ 7"),(0,s.Uk)("! ")],-1))),jr=xr((()=>(0,s._)("div",{class:"notifi notifi-success"},[(0,s.Uk)(" Ghi chú trong MTLKMS sử dụng cú pháp "),(0,s._)("b",null,"Markdown"),(0,s.Uk)(" (MD) ")],-1))),Ar=xr((()=>(0,s._)("br",null,null,-1))),Fr=xr((()=>(0,s._)("h3",null,"Hoạt động mới",-1))),Kr=xr((()=>(0,s._)("br",null,null,-1))),Wr={class:"d-flex align-items-center"},Hr=["src","alt"],$r={class:"ml-2"},Rr=(0,s.Uk)(" vừa học "),Br=xr((()=>(0,s._)("br",null,null,-1))),qr=(0,s.Uk)(" trong môn "),Zr=xr((()=>(0,s._)("br",null,null,-1))),Yr={class:"tag"},Gr=(0,s.Uk)(" Bắt đầu: "),Jr=xr((()=>(0,s._)("br",null,null,-1))),Xr=(0,s.Uk)(" Kết thúc: "),Qr=["innerHTML"],to=xr((()=>(0,s._)("br",null,null,-1))),eo=xr((()=>(0,s._)("hr",null,null,-1))),ao=xr((()=>(0,s._)("br",null,null,-1)));function no(t,e,a,n,r,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Pr,[(0,s._)("div",null,[zr,t.learningDiary?((0,s.wg)(),(0,s.iD)("div",Nr,[Er,(0,s.Wm)(l,{to:"/study-diary/"+t.learningDiary.sdtag},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.learningDiary.name),1)])),_:1},8,["to"])])):(0,s.kq)("",!0),Vr,Or,jr]),Ar,(0,s._)("div",null,[Fr,Kr,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.diaries,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("div",Wr,[(0,s._)("img",{src:o.getAvatarURL(t.username),alt:t.user+" avatar",class:"avatar"},null,8,Hr),(0,s._)("div",$r,[(0,s.Wm)(l,{to:"/users/"+t.username},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.user),1)])),_:2},1032,["to"]),Rr,(0,s._)("b",null,(0,i.zw)(o.caculateTime(t.start_at,t.stop_at)),1),Br,qr,(0,s.Wm)(l,{to:"/study-diary/"+t.sdtag},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.name),1)])),_:2},1032,["to"]),Zr,(0,s._)("div",Yr,(0,i.zw)(o.caculatePassedTime(t.stop_at)),1)])]),(0,s._)("p",null,[Gr,(0,s._)("b",null,(0,i.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1),Jr,Xr,(0,s._)("b",null,(0,i.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,s._)("p",{class:"quote",innerHTML:o.parseMarkdown(t.log)},null,8,Qr),to,eo,ao])))),128))])])}en.TU.setOptions({highlight:function(t,e){const a=Xa.Z.getLanguage(e)?e:"plaintext";return Xa.Z.highlight(t,{language:a}).value},langPrefix:"hljs language-"});var so={name:"HomeView",data(){return{diaries:[]}},created(){this.loadSessionData()||this.fetchDiaries()},computed:{...(0,l.rn)(["learningDiary"])},methods:{...(0,l.OI)(["setIsLoading"]),async fetchDiaries(){try{this.setIsLoading(!0);let t=await X.get("/study-diary/diary/all"),e=await t.json();if(this.setIsLoading(!1),200!=t.status)throw new Error(e.error);this.diaries=e.data,this.saveSessionData()}catch(t){throw this.setIsLoading(!1),t}},caculateTime(t,e){let a=this.getTimeDiff(t,e),n=Math.round(a.minutes),s=a.hours.toFixed(2);return`${s} giờ (${n} phút)`},caculatePassedTime(t){let e=new Date,a=new Date(t),n=e.getFullYear(),s=a.getFullYear(),i=n-s;if(0!==i)return i+" năm trước";let r=e.getMonth(),o=a.getMonth(),l=r-o;if(0!==l)return l+" tháng trước";let h=e.getDate(),c=a.getDate(),u=h-c;if(0!==u)return u+" ngày trước";let d=e.getHours(),g=a.getHours(),m=d-g;if(0!==m)return m+" giờ trước";let p=e.getMinutes(),w=a.getMinutes(),_=p-w;return _+" phút trước"},getTimeDiff(t,e){let a=new Date(t),n=new Date(e),s=n.getTime()-a.getTime();return{seconds:s/1e3,minutes:s/6e4,hours:s/36e5}},parseMarkdown(t){let e=en.TU.parse(t),a=tn().sanitize(e,{FORBID_TAGS:["style"],FORBID_ATTR:["style"]});return a},saveSessionData(){sessionStorage.setItem("homeviewDiaries",JSON.stringify(this.diaries))},loadSessionData(){let t=sessionStorage.getItem("homeviewDiaries");if(!t)return!1;let e=JSON.parse(t);return this.diaries=e,!0},getAvatarURL(t){return X.getAvatarURL(t)}}};const io=(0,S.Z)(so,[["render",no],["__scopeId","data-v-30b72668"]]);var ro=io;const oo=[{path:"/",name:"home",component:ro,meta:{title:"Trang Chủ - MTLKMS",metaTags:[{name:"description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"},{property:"og:description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"}]}},...Ke,...Hn,...Ri,...mr,...Cr],lo=(0,Y.p7)({history:(0,Y.PO)("/"),routes:oo,scrollBehavior(t,e,a){return new Promise((t=>{setTimeout((()=>{t(a||{top:0})}),500)}))}});lo.beforeEach(((t,e,a)=>{const n=t.matched.slice().reverse().find((t=>t.meta&&t.meta.title)),s=t.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags)),i=e.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags));if(n?nt.commit("setTitle",n.meta.title):i&&nt.commit("setTitle",i.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((t=>t.parentNode.removeChild(t))),!s)return a();s.meta.metaTags.map((t=>{const e=document.createElement("meta");return Object.keys(t).forEach((a=>{e.setAttribute(a,t[a])})),e.setAttribute("data-vue-router-controlled",""),e})).forEach((t=>document.head.appendChild(t))),a()}));var ho=lo;(0,n.ri)(q).use(ho).use(nt).mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],s=t[c][1],i=t[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(c--,1);var h=s();void 0!==h&&(e=h)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,r=n[0],o=n[1],l=n[2],h=0;if(r.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var c=l(a)}for(e&&e(n);h<r.length;h++)i=r[h],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},n=self["webpackChunkmtlkms"]=self["webpackChunkmtlkms"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4850)}));n=a.O(n)})();
//# sourceMappingURL=app.77eecfc2.js.map