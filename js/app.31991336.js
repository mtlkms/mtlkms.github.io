(function(){"use strict";var t={4587:function(t,e,a){var s=a(9242),i=a(3396),n=a(7139);const o={id:"sidebar"};function r(t,e,a,r,l,c){const h=(0,i.up)("AppMenu"),d=(0,i.up)("NavBar"),u=(0,i.up)("router-view"),g=(0,i.up)("LoadingEffect");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{onClick:e[0]||(e[0]=t=>c.toggleMenu()),id:"sidebar-bg"},null,512),[[s.F8,l.isMenuOpen]])])),_:1}),(0,i.Wm)(s.uT,{name:"fade-in-left"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",o,[(0,i.Wm)(h)],512),[[s.F8,l.isMenuOpen]])])),_:1}),(0,i._)("div",{id:"main",class:(0,n.C_)({noMarginLeft:!l.isMenuOpen})},[(0,i.Wm)(d,{onToggleMenu:e[1]||(e[1]=t=>c.toggleMenu())}),(0,i.Wm)(u,null,{default:(0,i.w5)((({Component:t})=>[(0,i.Wm)(s.uT,{name:"fade-in-fast",mode:"out-in"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t)))])),_:2},1024)])),_:1})],2),(0,i.Wm)(g)],64)}var l=a(65);const c=t=>((0,i.dD)("data-v-235c8316"),t=t(),(0,i.Cn)(),t),h={id:"appmenu-top"},d={key:0},u=c((()=>(0,i._)("img",{src:"/img/icons/180.png",class:"avatar d-block mx-auto"},null,-1))),g=c((()=>(0,i._)("h3",null,"MTLKMS",-1))),p=c((()=>(0,i._)("hr",null,null,-1))),m=c((()=>(0,i._)("p",null,"Học hành chăm chỉ :(",-1))),_=[u,g,p,m],w={key:1},y=["src"],v=c((()=>(0,i._)("hr",null,null,-1))),D={key:0},f=(0,i.Uk)(" Bạn đang học môn "),T={key:1},k=c((()=>(0,i._)("hr",null,null,-1))),b=c((()=>(0,i._)("p",null,"Bạn còn 99 mục tiêu hằng ngày chưa hoàn tất!",-1))),L={class:"material-icons"};function M(t,e,a,s,o,r){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",h,[t.isLogin?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("img",{src:t.user.avatarURL,class:"avatar d-block mx-auto"},null,8,y),(0,i._)("h3",null,"Xin chào "+(0,n.zw)(t.user.name)+"!",1),v,(0,i._)("p",null,[t.learningDiary?((0,i.wg)(),(0,i.iD)("span",D,[f,(0,i.Wm)(l,{to:"/study-diary/"+t.learningDiary.sdtag},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.learningDiary.name),1)])),_:1},8,["to"])])):((0,i.wg)(),(0,i.iD)("span",T," Bạn hiện chưa học gì! "))]),k,b])):((0,i.wg)(),(0,i.iD)("div",d,_))]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.links,((e,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[t.isLogin==e.auth?((0,i.wg)(),(0,i.j4)(l,{key:0,to:e.path,class:(0,n.C_)({active:r.isActive(e),link:!0})},{default:(0,i.w5)((()=>[(0,i._)("span",L,(0,n.zw)(e.icon),1),(0,i.Uk)(" "+(0,n.zw)(e.name),1)])),_:2},1032,["to","class"])):(0,i.kq)("",!0)])))),128))])])}var C={name:"AppMenu",data(){return{links:[{name:"Trang Chủ",path:"/",icon:"home",auth:!0},{name:"Cá Nhân",path:"/profile",icon:"person",auth:!0},{name:"Nhật Ký Thời Gian Học",path:"/study-diary",icon:"assignment",auth:!0},{name:"Đăng Nhập",path:"/login",icon:"login",auth:!1},{name:"Đăng Ký",path:"/register",icon:"person",auth:!1},{name:"Đăng Xuất",path:"/logout",icon:"logout",auth:!0}]}},methods:{isActive(t){let e=this.$route.path.split("/");return t.path.replace("/","")==e[1]}},computed:{...(0,l.rn)(["user","isLogin","learningDiary"])}},U=a(89);const I=(0,U.Z)(C,[["render",M],["__scopeId","data-v-235c8316"]]);var S=I;const x={id:"navbar"};function P(t,e,a,s,o,r){return(0,i.wg)(),(0,i.iD)("div",x,[(0,i._)("span",{onClick:e[0]||(e[0]=e=>t.$emit("toggleMenu")),class:"material-icons"},"menu"),(0,i._)("p",null,(0,n.zw)(t.title),1)])}var z={name:"NavBar",data(){return{}},computed:{...(0,l.rn)(["title"])}};const N=(0,U.Z)(z,[["render",P],["__scopeId","data-v-b6330b7c"]]);var j=N;const O=t=>((0,i.dD)("data-v-8eb54cee"),t=t(),(0,i.Cn)(),t),F={class:"main"},E=O((()=>(0,i._)("div",{class:"static-bar"},null,-1))),V=O((()=>(0,i._)("div",{class:"move-bar"},null,-1))),W=[E,V];function $(t,e,a,n,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",F,W,512),[[s.F8,t.isLoading]])])),_:1})])}var A={name:"LoadingEffect",data(){return{}},computed:{...(0,l.rn)(["isLoading"])}};const K=(0,U.Z)(A,[["render",$],["__scopeId","data-v-8eb54cee"]]);var R=K,B={name:"App",components:{AppMenu:S,LoadingEffect:R,NavBar:j},created(){this.isLogin||"/login"===location.pathname||"/register"===location.pathname||(this.setRedirect(location.pathname+location.search),this.$router.push("/login")),innerWidth>768&&(this.isMenuOpen=!0),window.addEventListener("resize",(()=>{innerWidth>768?this.isMenuOpen=!0:this.isMenuOpen=!1})),sessionStorage.clear()},data(){return{isMenuOpen:!1}},methods:{...(0,l.OI)(["setRedirect"]),toggleMenu(){this.isMenuOpen=!this.isMenuOpen}},computed:{...(0,l.rn)(["isLogin"])},watch:{$route:{immediate:!0,handler(){innerWidth<768&&(this.isMenuOpen=!1)}}}};const H=(0,U.Z)(B,[["render",r]]);var q=H,Z=a(5431);(0,Z.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var Y=a(678),G={title:"Góc Nhỏ Của Nhà Vịt - MTLKMS",isLogin:!1,isLoading:!1,redirect:null,user:{id:"",name:"",email:"",username:"",slogan:"",created_at:"",avatarURL:""},learningDiary:!1};class X{constructor(){this.host="https://vitcon.cf"}get(t){return fetch(this.host+t,{method:"GET",credentials:"include"})}getAvatarURL(t){return this.host+"/user/"+t+"/avatar"}post(t,e){return fetch(this.host+t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}put(t,e){return fetch(this.host+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}delete(t,e){return fetch(this.host+t,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}updateAvatar(t){return fetch(`${this.host}/user/avatar`,{method:"PUT",credentials:"include",body:t})}}var J=new X,Q={setTitle(t,e){t.title=e},setIsLogin(t,e){t.isLogin=e},setIsLoading(t,e){t.isLoading=e},setUserData(t,e){t.user=e},setLearningDiary(t,e){t.learningDiary=e},setAvatarURL(t,e){let a=J.getAvatarURL(e);t.user.avatarURL=a},setRedirect(t,e){t.redirect=e}},tt=(a(1703),{async login({commit:t},e){t("setIsLoading",!0);try{const a=await J.post("/login",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setIsLogin",!0),t("setUserData",s.user),t("setAvatarURL",s.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async checkLogin({commit:t}){t("setIsLoading",!0);try{let e=await J.get("/check-login"),a=await e.json();if(t("setIsLoading",!1),200!==e.status)throw new Error("Check login failed");return t("setIsLogin",!0),t("setUserData",a.user),t("setAvatarURL",a.user.username),!0}catch(e){throw t("setIsLoading",!1),e}},async getLearningDiary({commit:t,state:e}){t("setIsLoading",!0);try{let a=await J.get("/study-diary/diary/"+e.user.id),s=await a.json();if(t("setIsLoading",!1),200==a.status)return t("setLearningDiary",s.data),!0;throw new Error(s.error)}catch(a){throw t("setIsLoading",!1),a}},async register({commit:t},e){t("setIsLoading",!0);try{const a=await J.post("/register",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setIsLogin",!0),t("setUserData",s.user),t("setAvatarURL",s.user.username),!0}catch(a){throw t("setIsLoading",!1),a}},async updateProfile({commit:t},e){t("setIsLoading",!0);try{const a=await J.put("/user",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return t("setUserData",s.user),!0}catch(a){throw t("setIsLoading",!1),a}},async updatePassword({commit:t},e){t("setIsLoading",!0);try{const a=await J.put("/user/password",e),s=await a.json();if(t("setIsLoading",!1),200!==a.status)throw new Error(s.error);return!0}catch(a){throw t("setIsLoading",!1),a}}}),et={getUserName:t=>t.user.name,getUserUsername:t=>t.user.username,getUserSlogan:t=>t.user.slogan};const at=(0,l.MT)({state:G,mutations:Q,actions:tt,getters:et});var st=at;const it={class:"container container-md"},nt=(0,i._)("h3",null,"Home Page",-1),ot=[nt];function rt(t,e,a,s,n,o){return(0,i.wg)(),(0,i.iD)("div",it,ot)}var lt={name:"HomeView"};const ct=(0,U.Z)(lt,[["render",rt]]);var ht=ct;const dt=t=>((0,i.dD)("data-v-874f2bc4"),t=t(),(0,i.Cn)(),t),ut={class:"container container-sm"},gt=dt((()=>(0,i._)("h2",{class:"mb-4"},"Đăng nhập",-1))),pt={class:"input"},mt=dt((()=>(0,i._)("span",{class:"material-icons"},"person",-1))),_t=dt((()=>(0,i._)("p",null,"Username",-1))),wt={class:"input"},yt=dt((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),vt=dt((()=>(0,i._)("p",null,"Password",-1))),Dt={class:"footer"},ft=dt((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"login"),(0,i.Uk)(" Đăng nhập ")],-1))),Tt=(0,i.Uk)("Chưa có tài khoản? "),kt=(0,i.Uk)("[Đăng Ký]"),bt=(0,i.Uk)("[Quên Mật Khẩu]");function Lt(t,e,a,o,r,l){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ut,[(0,i._)("form",{action:"",method:"POST",onSubmit:e[2]||(e[2]=(0,s.iM)((t=>l.submitForm()),["prevent"]))},[gt,(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:(0,n.C_)(["log",r.isSuccess?"success":"error"])},[(0,i._)("p",null,(0,n.zw)(r.apiLog),1),(0,i._)("p",null,(0,n.zw)(r.log),1)],2),[[s.F8,r.log]])])),_:1}),(0,i._)("label",pt,[mt,(0,i.wy)((0,i._)("input",{type:"text",name:"username",required:"",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=t=>r.form.username=t)},null,512),[[s.nr,r.form.username]]),_t]),(0,i._)("label",wt,[yt,(0,i.wy)((0,i._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[1]||(e[1]=t=>r.form.password=t)},null,512),[[s.nr,r.form.password]]),vt]),(0,i._)("div",Dt,[ft,(0,i._)("div",null,[(0,i._)("p",null,[Tt,(0,i.Wm)(c,{to:"/register"},{default:(0,i.w5)((()=>[kt])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(c,{to:""},{default:(0,i.w5)((()=>[bt])),_:1})])])])],32)])}var Mt={name:"LoginView",created(){this.checkIfLoggedIn()},data(){return{form:{username:"",password:""},isSuccess:!1,apiLog:"",log:""}},computed:{...(0,l.rn)(["isLogin","redirect"])},methods:{...(0,l.nv)(["login","checkLogin","getLearningDiary"]),...(0,l.OI)(["setRedirect"]),async submitForm(){try{await this.login(this.form)}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}this.isSuccess=!0,this.apiLog="",this.log="Đăng nhập thành công",this.$router.push("/")},showLog(){"Username not found or password is incorrect"==this.apiLog?this.log="Tên đăng nhập hoặc mật khẩu không chính xác":this.log="Đã có lỗi xảy ra"},runRedirect(){this.redirect&&"/login"!=this.redirect&&"/register"!=this.redirect?(this.$router.push(this.redirect),this.setRedirect(null)):this.$router.push("/")},async checkIfLoggedIn(){this.isLogin&&this.runRedirect(),await this.checkLogin();try{await this.getLearningDiary()}catch(t){console.log("Bạn không đang học môn nào - ",t.message)}this.runRedirect()}}};const Ct=(0,U.Z)(Mt,[["render",Lt],["__scopeId","data-v-874f2bc4"]]);var Ut=Ct;const It=t=>((0,i.dD)("data-v-5cf3c59a"),t=t(),(0,i.Cn)(),t),St={class:"container container-sm"},xt=It((()=>(0,i._)("h2",{class:"mb-4"},"Đăng ký",-1))),Pt={class:"input"},zt=It((()=>(0,i._)("span",{class:"material-icons"},"label",-1))),Nt=It((()=>(0,i._)("p",null,"Tên hiển thị",-1))),jt={class:"input"},Ot=It((()=>(0,i._)("span",{class:"material-icons"},"person",-1))),Ft=It((()=>(0,i._)("p",null,"Tên đăng nhập",-1))),Et={class:"input"},Vt=It((()=>(0,i._)("span",{class:"material-icons"},"email",-1))),Wt=It((()=>(0,i._)("p",null,"Email",-1))),$t={class:"input"},At=It((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),Kt=It((()=>(0,i._)("p",null,"Mật khẩu",-1))),Rt={class:"input"},Bt=It((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),Ht=It((()=>(0,i._)("p",null,"Re-password",-1))),qt={class:"footer"},Zt=It((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"send"),(0,i.Uk)(" Đăng ký ")],-1))),Yt=(0,i.Uk)("Đã có tài khoản? "),Gt=(0,i.Uk)("[Đăng Nhập]"),Xt=(0,i.Uk)("[Quên Mật Khẩu]");function Jt(t,e,a,o,r,l){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",St,[(0,i._)("form",{action:"",method:"POST",onSubmit:e[5]||(e[5]=(0,s.iM)((t=>l.submitForm()),["prevent"]))},[xt,(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:(0,n.C_)(["log",r.isSuccess?"success":"error"])},[(0,i._)("p",null,(0,n.zw)(r.apiLog),1),(0,i._)("p",null,(0,n.zw)(r.log),1)],2),[[s.F8,r.log]])])),_:1}),(0,i._)("label",Pt,[zt,(0,i.wy)((0,i._)("input",{type:"text",name:"name",required:"",placeholder:"Tên hiển thị","onUpdate:modelValue":e[0]||(e[0]=t=>r.form.name=t)},null,512),[[s.nr,r.form.name]]),Nt]),(0,i._)("label",jt,[Ot,(0,i.wy)((0,i._)("input",{type:"text",name:"username",required:"",placeholder:"Tên đăng nhập","onUpdate:modelValue":e[1]||(e[1]=t=>r.form.username=t)},null,512),[[s.nr,r.form.username]]),Ft]),(0,i._)("label",Et,[Vt,(0,i.wy)((0,i._)("input",{type:"email",name:"email",required:"",placeholder:"Email","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.email=t)},null,512),[[s.nr,r.form.email]]),Wt]),(0,i._)("label",$t,[At,(0,i.wy)((0,i._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.password=t)},null,512),[[s.nr,r.form.password]]),Kt]),(0,i._)("label",Rt,[Bt,(0,i.wy)((0,i._)("input",{type:"password",name:"repassword",required:"",placeholder:"Nhập lại mật khẩu","onUpdate:modelValue":e[4]||(e[4]=t=>r.form.repassword=t)},null,512),[[s.nr,r.form.repassword]]),Ht]),(0,i._)("div",qt,[Zt,(0,i._)("div",null,[(0,i._)("p",null,[Yt,(0,i.Wm)(c,{to:"/login"},{default:(0,i.w5)((()=>[Gt])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(c,{to:""},{default:(0,i.w5)((()=>[Xt])),_:1})])])])],32)])}var Qt={name:"RegisterView",data(){return{form:{name:"",username:"",email:"",password:"",repassword:""},apiLog:"",log:"",isSuccess:!1}},methods:{...(0,l.nv)(["register"]),...(0,l.OI)(["setIsLoading"]),async submitForm(){if(this.form.password!==this.form.repassword)return this.log="Mật khẩu không khớp",void(this.isSuccess=!1);try{await this.register(this.form),this.isSuccess=!0,this.apiLog="",this.log="Đăng ký thành công",this.$router.push("/")}catch(t){this.isSuccess=!1,this.apiLog=t.message,this.showLog()}},showLog(){"Invalid name"==this.apiLog?this.log="Tên phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Invalid email"==this.apiLog?this.log="Email không đúng định dạng":"Invalid username"==this.apiLog?this.log="Tên đăng nhập phải từ 3 đến 20 kí tự, không bao gồm khoảng trống và kí tự đặc biệt":"Invalid password"==this.apiLog?this.log="Mật khẩu phải lớn hơn 6 kí tự, bao gồm chữ cái viết thường, viết hoa, số và kí tự đặc biệt":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'username')/gi.test(this.apiLog)?this.log="Tên đăng nhập đã tồn tại":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'email')/gi.test(this.apiLog)?this.log="Email đã tồn tại":this.log="Đã có lỗi xảy ra"}}};const te=(0,U.Z)(Qt,[["render",Jt],["__scopeId","data-v-5cf3c59a"]]);var ee=te;const ae={class:"container container-sm"},se=(0,i._)("h2",{class:"mb-4"},"Đăng xuất",-1),ie=(0,i._)("p",null,"Bạn có chắc muốn đăng xuất không?",-1),ne=(0,i._)("span",{class:"material-icons mr-2"},"logout",-1),oe=(0,i.Uk)(" Đăng xuất "),re=[ne,oe];function le(t,e,a,s,n,o){return(0,i.wg)(),(0,i.iD)("div",ae,[se,ie,(0,i._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>o.logout&&o.logout(...t))},re)])}var ce={name:"LogoutView",data(){return{}},methods:{...(0,l.OI)(["setIsLoading"]),logout(){this.setIsLoading(!0),J.get("/logout").then((()=>{location.href="/login"})).catch((()=>{this.setIsLoading(!1)}))}}};const he=(0,U.Z)(ce,[["render",le]]);var de=he;const ue={class:"container container-md"},ge=(0,i._)("hr",null,null,-1),pe=(0,i._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function me(t,e,a,s,n,o){const r=(0,i.up)("Profile"),l=(0,i.up)("ContributionDiary");return(0,i.wg)(),(0,i.iD)("div",ue,[(0,i.Wm)(r),ge,pe,(0,i.Wm)(l)])}const _e={class:"main"},we=["src","alt"],ye={class:"text-secondary"},ve=(0,i.Uk)("[Edit Profile]");function De(t,e,a,s,o,r){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",_e,[(0,i._)("img",{src:t.user.avatarURL,alt:t.user.username,class:"avatar-xl"},null,8,we),(0,i._)("div",null,[(0,i._)("h3",null,(0,n.zw)(t.user.name),1),(0,i._)("p",ye,(0,n.zw)(t.user.username)+" - Tham gia lúc "+(0,n.zw)(r.convertTimestampToLocalDate(t.user.created_at)),1),(0,i._)("p",null,(0,n.zw)(t.user.slogan),1),(0,i._)("p",null,[(0,i.Wm)(l,{to:"/profile/edit"},{default:(0,i.w5)((()=>[ve])),_:1})])])])}var fe={name:"UserProfile",data(){return{}},computed:{...(0,l.rn)(["user"])},methods:{convertTimestampToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})}}};const Te=(0,U.Z)(fe,[["render",De],["__scopeId","data-v-6d4022c4"]]);var ke=Te;const be=t=>((0,i.dD)("data-v-66b6c776"),t=t(),(0,i.Cn)(),t),Le={class:"text-center"},Me={class:"date"},Ce={class:"mr-2"},Ue={key:0},Ie=(0,i.Uk)(" Bạn đã học "),Se=(0,i.Uk)(" trong tháng này "),xe={key:1},Pe={class:"color-help"},ze={style:{"max-width":"100%","overflow-x":"scroll"}},Ne=be((()=>(0,i._)("tr",null,[(0,i._)("th",{title:"Tổng thời gian học của tuần"},"Week"),(0,i._)("th",null,"Sun"),(0,i._)("th",null,"Mon"),(0,i._)("th",null,"Tue"),(0,i._)("th",null,"Wed"),(0,i._)("th",null,"Thu"),(0,i._)("th",null,"Fri"),(0,i._)("th",null,"Sat")],-1))),je={key:0},Oe=be((()=>(0,i._)("br",null,null,-1))),Fe=be((()=>(0,i._)("br",null,null,-1))),Ee=be((()=>(0,i._)("br",null,null,-1))),Ve=be((()=>(0,i._)("br",null,null,-1))),We=["title","onClick"],$e={key:1,class:"text-secondary mt-1"},Ae=be((()=>(0,i._)("br",null,null,-1))),Ke=be((()=>(0,i._)("hr",null,null,-1))),Re={key:2},Be=be((()=>(0,i._)("br",null,null,-1))),He=be((()=>(0,i._)("br",null,null,-1))),qe=be((()=>(0,i._)("br",null,null,-1))),Ze=[Be,He,qe],Ye={style:{"margin-bottom":"7rem"}},Ge={class:"mb-4"},Xe=be((()=>(0,i._)("hr",null,null,-1))),Je={key:0,style:{"margin-bottom":"40vh"}},Qe={class:"ml-3"},ta={key:0},ea=(0,i.Uk)(" Đã học: "),aa={key:1},sa=(0,i.Uk)(" Đã học: "),ia=(0,i.Uk)("Bắt đầu: "),na=(0,i.Uk)("Kết thúc: "),oa=["innerHTML"],ra=be((()=>(0,i._)("br",null,null,-1))),la=be((()=>(0,i._)("hr",null,null,-1))),ca=be((()=>(0,i._)("br",null,null,-1)));function ha(t,e,a,o,r,l){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Le,[(0,i._)("div",Me,[(0,i._)("p",Ce,"Tháng "+(0,n.zw)(r.month),1),(0,i._)("p",null,"Năm "+(0,n.zw)(r.year),1)]),this.timeMonth>0?((0,i.wg)(),(0,i.iD)("p",Ue,[Ie,(0,i._)("b",null,(0,n.zw)((this.timeMonth/60).toFixed(2))+" giờ ("+(0,n.zw)(this.timeMonth)+" phút) ",1),Se])):((0,i.wg)(),(0,i.iD)("p",xe," Chưa có dữ liệu thống kê cho tháng này ")),(0,i.wy)((0,i._)("input",{type:"month","onUpdate:modelValue":e[0]||(e[0]=t=>r.date=t),class:"mb-4"},null,512),[[s.nr,r.date]]),(0,i._)("div",Pe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.dayColors,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:e,style:(0,n.j5)({backgroundColor:t})},null,4)))),128))])]),(0,i._)("div",ze,[(0,i._)("table",null,[Ne,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.diaries.data,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i._)("td",null,[""!=r.diaries.timeWeek[e]?((0,i.wg)(),(0,i.iD)("p",je,[(0,i.Uk)((0,n.zw)(r.diaries.timeWeek[e])+"' ",1),Oe,(0,i.Uk)(" ("+(0,n.zw)((r.diaries.timeWeek[e]/60).toFixed(1))+"h) ",1),Fe,Ee,Ve])):(0,i.kq)("",!0)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,((t,a)=>((0,i.wg)(),(0,i.iD)("td",{key:a},[""!=t.day?((0,i.wg)(),(0,i.iD)("p",{key:0,title:"Ngày "+t.day,onClick:s=>l.setShowDay(e,a,t.day),style:(0,n.j5)({backgroundColor:l.dayBackground(t.diary.length),outline:t.isActive?"1px solid #000":"none",boxShadow:t.isToday?"3px 3px 1px #ff907f":"none",color:t.diary.length>8?"#fff":"#000"})},(0,n.zw)(t.day),13,We)):(0,i.kq)("",!0),"number"==typeof t.time?((0,i.wg)(),(0,i.iD)("div",$e,[(0,i.Uk)((0,n.zw)(t.time)+"' ",1),Ae,(0,i.Uk)(" ("+(0,n.zw)((t.time/60).toFixed(1))+"h) ",1),Ke])):((0,i.wg)(),(0,i.iD)("div",Re,Ze))])))),128))])))),128))])]),(0,i._)("div",Ye,[(0,i._)("h2",Ge,(0,n.zw)(r.showDay.title),1),Xe,0==r.showDay.diary.length?((0,i.wg)(),(0,i.iD)("div",Je," Bạn không học gì vào ngày này ")):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(r.showDay.diary,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("div",Qe,[0==a.tag?((0,i.wg)(),(0,i.iD)("p",ta,[ea,(0,i._)("b",null,[(0,i.Uk)((0,n.zw)(l.caculateTime(t.start_at,t.stop_at))+" ",1),(0,i.Wm)(c,{to:"/study-diary/"+t.sdtag},{default:(0,i.w5)((()=>[(0,i.Uk)(" trong môn "+(0,n.zw)(t.name),1)])),_:2},1032,["to"])])])):((0,i.wg)(),(0,i.iD)("p",aa,[sa,(0,i._)("b",null,(0,n.zw)(l.caculateTime(t.start_at,t.stop_at)),1)])),(0,i._)("p",null,[ia,(0,i._)("b",null,(0,n.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1)]),(0,i._)("p",null,[na,(0,i._)("b",null,(0,n.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,i._)("p",{class:"quote",innerHTML:l.parseMarkdown(t.log)},null,8,oa)]),ra,la,ca])))),128))])])}var da=a(5792),ua=a(3617),ga=a.n(ua),pa=a(5068);a(9029);pa.TU.setOptions({highlight:function(t,e){const a=da.Z.getLanguage(e)?e:"plaintext";return da.Z.highlight(t,{language:a}).value},langPrefix:"hljs language-"});var ma={name:"ContributionDiary",props:{userID:{type:Number,default:0},tag:{type:Number,default:0},refeshToogle:{type:Boolean,default:!1}},created(){this.getDiaries()},data(){return{diaries:[],showDay:{title:"Hôm nay",day:0,diary:[]},month:this.$route.query.month||(new Date).getMonth()+1,year:this.$route.query.year||(new Date).getFullYear(),date:"",timeMonth:0,dayColors:["#ffffff","#ccffe9","#99ffd4","#65ffbf","#32ffa9","#00ff94","#00e585","#00cc76","#00b268","#009959","#007f4a","#00663b","#004c2c","#00331d","#00190e","#000000"]}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),async getDiaries(){let t="/study-diary/diary/",e=this.userID||this.user.id;0!=this.tag?t+=`${e}/${this.year}/${this.month}/${this.tag}`:t+=`${e}/${this.year}/${this.month}`,this.setIsLoading(!0);let a=await J.get(t),s=await a.json();if(this.setIsLoading(!1),200!=a.status)throw new Error(s.error);this.showDay.diary=[],this.putDiary(s.data.diaries,s.data.times)},putDiary(t,e){let a=[[],[],[],[],[],[],[]],s={timeWeek:["","","","","",""],data:[[[],[0],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],a]},i=t.length>0?new Date(t[0].stop_at):new Date(this.year,this.month-1,1),n=new Date(i.getFullYear(),i.getMonth(),1).getDay(),o=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),r=1;for(let d=0;d<s.data.length;d++)for(let t=0;t<s.data[d].length;t++){let e=r-n;if(e>0&&e<=o){let a=!1;this.month==(new Date).getMonth()+1&&this.year==(new Date).getFullYear()&&(new Date).getDate()==e&&(a=!0),s.data[d][t]={day:e,isActive:!1,time:null,diary:[],isToday:a}}else s.data[d][t]={day:"",diary:[]};r++}let l=0,c=0,h=(new Date).getDate();t&&t.forEach((t=>{let e=new Date(t.stop_at),a=e.getDate(),i=e.getDay(),n=new Date(e.getFullYear(),e.getMonth(),1).getDay(),o=Math.ceil((a+n)/7)-1;s.data[o][i].diary.push(t),e.toDateString()==(new Date).toDateString()&&(l=o,c=i,h=a)})),e&&this.putTimes(s,e),this.diaries=s,this.setShowDay(l,c,h)},putTimes(t,e){e.forEach((e=>{let a=new Date(e.created_at),s=a.getDate(),i=a.getDay(),n=new Date(a.getFullYear(),a.getMonth(),1).getDay(),o=Math.ceil((s+n)/7)-1;0==e.type?t.data[o][i].time=e.time:1==e.type?t.timeWeek[o-1]=e.time:2==e.type&&(this.timeMonth=e.time)}))},parseMarkdown(t){let e=pa.TU.parse(t),a=ga().sanitize(e,{FORBID_TAGS:["style"],FORBID_ATTR:["style"]});return a},caculateTime(t,e){let a=new Date(t),s=new Date(e),i=s.getTime()-a.getTime(),n=Math.round(i/6e4),o=(n/60).toFixed(2);return`${n} phút (${o} giờ)`},setShowDay(t,e,a){this.showDay.diary=this.diaries.data[t][e].diary,this.showDay.day=a,this.showDay.title=`${a}/${this.month}/${this.year}`;for(let s=0;s<this.diaries.data.length;s++)for(let t=0;t<this.diaries.data[s].length;t++)this.diaries.data[s][t].isActive=!1;this.diaries.data[t][e].isActive=!0},dayBackground(t){let e=this.dayColors[t];return e||this.dayColors[this.dayColors.length-1]}},watch:{refeshToogle:{handler(){this.getDiaries()},deep:!0},date:{handler(t){let e=t.split("-");this.year=e[0],this.month=e[1],this.getDiaries()}}}};const _a=(0,U.Z)(ma,[["render",ha],["__scopeId","data-v-66b6c776"]]);var wa=_a,ya={name:"ProfileView",components:{Profile:ke,ContributionDiary:wa},data(){return{}},methods:{}};const va=(0,U.Z)(ya,[["render",me]]);var Da=va;const fa={class:"container container-sm"},Ta={class:"breadcrumb"},ka=(0,i.Uk)("Cá Nhân"),ba=(0,i.Uk)("Sửa Thông Tin Cá Nhân"),La=["src","alt"],Ma=(0,i._)("br",null,null,-1),Ca=(0,i._)("p",null,"Cập nhật ảnh đại diện",-1),Ua={class:"input"},Ia=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"file_upload"),(0,i.Uk)(" Upload ")],-1),Sa=(0,i._)("hr",null,null,-1),xa=(0,i._)("p",null,"Cập nhật thông tin cá nhân",-1),Pa={class:"input"},za=(0,i._)("span",{class:"material-icons"},"label",-1),Na=(0,i._)("p",null,"Tên hiển thị",-1),ja={class:"input"},Oa=(0,i._)("span",{class:"material-icons"},"favorite",-1),Fa=(0,i._)("p",null,"Châm ngôn",-1),Ea=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Save ")],-1),Va=(0,i._)("hr",null,null,-1),Wa=(0,i._)("p",null,"Cập nhật mật khẩu",-1),$a={class:"input"},Aa=(0,i._)("span",{class:"material-icons"},"lock",-1),Ka=(0,i._)("p",null,"Mật khẩu cũ",-1),Ra={class:"input"},Ba=(0,i._)("span",{class:"material-icons"},"lock",-1),Ha=(0,i._)("p",null,"Mật khẩu mới",-1),qa={class:"input"},Za=(0,i._)("span",{class:"material-icons"},"lock",-1),Ya=(0,i._)("p",null,"Xác nhận mật khẩu",-1),Ga=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Save ")],-1);function Xa(t,e,a,n,o,r){const l=(0,i.up)("router-link"),c=(0,i.up)("message-popup");return(0,i.wg)(),(0,i.iD)("div",fa,[(0,i._)("div",Ta,[(0,i.Wm)(l,{to:"/profile"},{default:(0,i.w5)((()=>[ka])),_:1}),(0,i.Wm)(l,{to:"/profile/edit"},{default:(0,i.w5)((()=>[ba])),_:1})]),(0,i._)("form",{action:"",onSubmit:e[1]||(e[1]=(0,s.iM)((t=>r.updateAvatar()),["prevent"]))},[(0,i._)("img",{src:o.avatarPreview,alt:t.user.username,class:"d-block mx-auto avatar-xl"},null,8,La),Ma,Ca,(0,i._)("label",Ua,[(0,i._)("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>r.onchangeAvatar&&r.onchangeAvatar(...t))},null,32)]),Ia],32),Sa,(0,i._)("form",{action:"",onSubmit:e[4]||(e[4]=(0,s.iM)((t=>r.startUpdateProfile()),["prevent"]))},[xa,(0,i._)("label",Pa,[za,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.name=t),placeholder:"Tên hiển thị"},null,512),[[s.nr,o.form.name]]),Na]),(0,i._)("label",ja,[Oa,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.slogan=t),placeholder:"Châm ngôn"},null,512),[[s.nr,o.form.slogan]]),Fa]),Ea],32),Va,(0,i._)("form",{action:"",onSubmit:e[8]||(e[8]=(0,s.iM)((t=>r.startUpdatePassword()),["prevent"]))},[Wa,(0,i._)("label",$a,[Aa,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=t=>o.passwordForm.oldPassword=t),placeholder:"Mật khẩu cũ"},null,512),[[s.nr,o.passwordForm.oldPassword]]),Ka]),(0,i._)("label",Ra,[Ba,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=t=>o.passwordForm.newPassword=t),placeholder:"Mật khẩu mới"},null,512),[[s.nr,o.passwordForm.newPassword]]),Ha]),(0,i._)("label",qa,[Za,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":e[7]||(e[7]=t=>o.rePassword=t),placeholder:"Xác nhận mật khẩu"},null,512),[[s.nr,o.rePassword]]),Ya]),Ga],32),(0,i.Wm)(c,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}const Ja={class:"popup"},Qa={class:"container container-sm"},ts={class:"d-flex justify-content-center align-items-center"},es={class:"material-icons mr-2"};function as(t,e,a,o,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",Ja,[(0,i._)("div",{class:"popup-bg",onClick:e[0]||(e[0]=t=>l.close())}),(0,i._)("div",Qa,[(0,i._)("div",{class:(0,n.C_)(a.type)},[(0,i._)("div",ts,[(0,i._)("span",es,(0,n.zw)(l.icon),1),(0,i._)("h3",null,(0,n.zw)(a.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:e[1]||(e[1]=t=>l.close())},"close")],2),(0,i._)("div",null,[(0,i._)("p",null,(0,n.zw)(a.message),1)])])],512),[[s.F8,r.display]])])),_:1})])}var ss={name:"MessagePopup",props:{title:{type:String,default:""},message:{type:String,default:""},type:{type:String,default:"success"},isDisplay:{type:Boolean,default:!1}},data(){return{display:!1}},methods:{close(){this.display=!1}},watch:{isDisplay(){this.display=!0}},computed:{icon(){switch(this.type){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";default:return"check_circle"}}}};const is=(0,U.Z)(ss,[["render",as]]);var ns=is,os={name:"EditProfileView",components:{MessagePopup:ns},data(){return{form:{name:this.getUserName(),slogan:this.getUserSlogan()},passwordForm:{oldPassword:"",newPassword:""},rePassword:"",avatarPreview:J.getAvatarURL(this.getUserUsername()),avatarFile:null,isLoading:!1,message:{title:"",message:"",type:"",isDisplay:!1}}},computed:{...(0,l.rn)(["user"])},methods:{...(0,l.OI)(["setIsLoading"]),...(0,l.nv)(["updateProfile","updatePassword"]),...(0,l.Se)(["getUserName","getUserSlogan","getUserUsername"]),updateAvatar(){if(!this.avatarFile)return void this.showMessage("Lỗi","Vui lòng chọn ảnh đại diện","error");let t=new FormData;t.append("avatar",this.avatarFile),this.setIsLoading(!0),J.updateAvatar(t).then((t=>{200==t.status?location.reload():(this.setIsLoading(!1),this.showMessage("Lỗi!","Có lỗi xảy ra, vui lòng thử lại","error"))})).catch((t=>{this.setIsLoading(!1),console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))},async startUpdateProfile(){if(!this.form.name||!this.form.slogan)return void this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning");let t;try{t=await this.updateProfile(this.form)}catch(e){console.log(e.message);let t="";t="Invalid name"==e.message?"Tên hiển thị phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",t,"error")}t&&this.showMessage("Thành công","Cập nhật thông tin thành công","success")},async startUpdatePassword(){if(this.passwordForm.oldPassword&&this.passwordForm.newPassword)if(this.passwordForm.newPassword==this.rePassword)try{if(!await this.updatePassword(this.passwordForm))return;this.showMessage("Thành công","Cập nhật mật khẩu thành công","success"),this.$router.push("/profile")}catch(t){console.log(t.message);let e="";e="Invalid password"==t.message?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Old password is incorrect"==t.message?"Mật khẩu cũ không chính xác":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",e,"error")}else this.showMessage("Lỗi","Mật khẩu mới và xác nhận mật khẩu không khớp","warning");else this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning")},onchangeAvatar(t){let e=t.target.files||t.dataTransfer.files;e.length&&this.convertAvatar(e[0])},convertAvatar(t){let e=document.createElement("canvas"),a=e.getContext("2d"),s=document.createElement("img"),i=256;e.width=i,e.height=i,s.src=URL.createObjectURL(t),s.onload=()=>{if(URL.revokeObjectURL(s.src),s.width>s.height){let t=s.height/i,e=s.width/t;a.drawImage(s,0,0,e,i)}else{let t=s.width/i,e=s.height/t;a.drawImage(s,0,0,i,e)}this.avatarPreview=e.toDataURL(),fetch(this.avatarPreview).then((t=>{t.arrayBuffer().then((t=>{this.avatarFile=new File([t],"avatar",{type:"image/png"})}))}))}},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay}}};const rs=(0,U.Z)(os,[["render",Xa]]);var ls=rs;const cs=t=>((0,i.dD)("data-v-e09f9a76"),t=t(),(0,i.Cn)(),t),hs={class:"container"},ds=cs((()=>(0,i._)("h3",null,"Đang học",-1))),us={key:0},gs={key:1,class:"grid-list"},ps={class:"title"},ms={class:"material-icons mr-2"},_s=cs((()=>(0,i._)("div",null,[(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"edit")]),(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"delete_forever")])],-1))),ws={class:"body"},ys={class:"d-flex justify-space-between align-items-center"},vs=cs((()=>(0,i._)("h3",null,"Thẻ Lĩnh Vực",-1))),Ds=cs((()=>(0,i._)("span",{class:"material-icons mr-2"},"add",-1))),fs=(0,i.Uk)(" Thêm "),Ts=[Ds,fs],ks={key:2},bs={key:3,class:"grid-list"},Ls={class:"title"},Ms={class:"material-icons mr-2"},Cs=["onClick"],Us=cs((()=>(0,i._)("span",{class:"material-icons"},"edit",-1))),Is=[Us],Ss=["onClick"],xs=cs((()=>(0,i._)("span",{class:"material-icons"},"delete_forever",-1))),Ps=[xs],zs={class:"body"},Ns={class:"popup"},js={class:"container container-sm"},Os={class:"d-flex justify-content-center align-items-center"},Fs=cs((()=>(0,i._)("span",{class:"material-icons mr-2"},"edit",-1))),Es=cs((()=>(0,i._)("p",null,"Preview: ",-1))),Vs={class:"title"},Ws={class:"d-flex align-items-center"},$s={class:"material-icons mr-2"},As=cs((()=>(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"edit")],-1))),Ks={class:"body"},Rs=cs((()=>(0,i._)("br",null,null,-1))),Bs=cs((()=>(0,i._)("hr",null,null,-1))),Hs={class:"mb-3 mt-3"},qs={class:"mr-3"},Zs=cs((()=>(0,i._)("span",{class:"mr-3"},"Màu nền",-1))),Ys=cs((()=>(0,i._)("span",{class:"mr-3"},"Màu chữ",-1))),Gs=cs((()=>(0,i._)("hr",null,null,-1))),Xs={class:"mt-3 mb-3"},Js=cs((()=>(0,i._)("p",null,"Icon: ",-1))),Qs=["onClick"],ti=cs((()=>(0,i._)("hr",null,null,-1))),ei={class:"mt-3 mb-4"},ai=cs((()=>(0,i._)("p",null,"Tên: ",-1))),si={class:"input"},ii=cs((()=>(0,i._)("span",{class:"material-icons"},"tag",-1))),ni=cs((()=>(0,i._)("p",null,"Tên thẻ",-1))),oi=cs((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Lưu ")],-1))),ri={class:"popup"},li={class:"container container-sm"},ci={class:"d-flex justify-content-center align-items-center"},hi=cs((()=>(0,i._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),di=(0,i.Uk)("Bạn có chắc muốn xóa thẻ "),ui=(0,i.Uk)(" không?"),gi=cs((()=>(0,i._)("p",null,"Thẻ này sẽ bị xóa vĩnh viễn.",-1))),pi={class:"mt-3 mb-3"},mi=cs((()=>(0,i._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),_i=(0,i.Uk)(" Xóa "),wi=[mi,_i];function yi(t,e,a,o,r,l){const c=(0,i.up)("router-link"),h=(0,i.up)("MessagePopup");return(0,i.wg)(),(0,i.iD)("div",hs,[ds,0==r.learningTags.length?((0,i.wg)(),(0,i.iD)("div",us," Bạn hiện chưa học gì ")):((0,i.wg)(),(0,i.iD)("div",gs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.learningTags,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,i._)("div",ps,[(0,i.Wm)(c,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("span",ms,(0,n.zw)(t.icon),1),(0,i._)("b",null,(0,n.zw)(t.name),1)])),_:2},1032,["to","id"]),_s]),(0,i._)("div",ws,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(l.showTime(t.time_today)),1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(l.showTime(t.time_week)),1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(l.showTime(t.time_month)),1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(l.showTime(t.time_year)),1),(0,i._)("p",null,"Tổng thời gian học: "+(0,n.zw)(l.showTime(t.time_total)),1)])],4)])))),128))])),(0,i._)("div",ys,[vs,(0,i._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.openCreateTagPopup&&l.openCreateTagPopup(...t))},Ts)]),0==r.tags.length?((0,i.wg)(),(0,i.iD)("div",ks," Bạn chưa tạo thẻ nào ")):((0,i.wg)(),(0,i.iD)("div",bs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.tags,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e},[(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,i._)("div",Ls,[(0,i.Wm)(c,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("span",Ms,(0,n.zw)(t.icon),1),(0,i._)("b",null,(0,n.zw)(t.name),1)])),_:2},1032,["to","id"]),(0,i._)("div",null,[(0,i._)("button",{onClick:t=>l.openEditTagPopup(e)},Is,8,Cs),(0,i._)("button",{onClick:t=>l.openDeleteTagPopup(e)},Ps,8,Ss)])]),(0,i._)("div",zs,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(l.showTime(t.time_today)),1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(l.showTime(t.time_week)),1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(l.showTime(t.time_month)),1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(l.showTime(t.time_year)),1),(0,i._)("p",null,"Tổng: "+(0,n.zw)(l.showTime(t.time_total)),1)])],4)])))),128))])),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",Ns,[(0,i._)("div",{class:"popup-bg",onClick:e[1]||(e[1]=t=>r.editTagData.isDisplay=!1)}),(0,i._)("div",js,[(0,i._)("div",null,[(0,i._)("div",Os,[Fs,(0,i._)("h3",null,(0,n.zw)(r.editTagData.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:e[2]||(e[2]=t=>r.editTagData.isDisplay=!1)},"close")]),(0,i._)("div",null,[Es,(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:r.editTagData.bgColor,color:r.editTagData.textColor})},[(0,i._)("div",Vs,[(0,i._)("div",Ws,[(0,i._)("span",$s,(0,n.zw)(r.editTagData.icon),1),(0,i._)("b",null,(0,n.zw)(r.editTagData.name),1)]),As]),(0,i._)("div",Ks,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(r.editTagData.times.today)+" giờ",1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(r.editTagData.times.week)+" giờ",1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(r.editTagData.times.month)+" giờ",1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(r.editTagData.times.year)+" giờ",1),(0,i._)("p",null,"Tổng: "+(0,n.zw)(r.editTagData.times.total)+" giờ",1)])],4),Rs,Bs,(0,i._)("form",{action:"",onSubmit:e[6]||(e[6]=(0,s.iM)(((...t)=>l.submitEditTag&&l.submitEditTag(...t)),["prevent"]))},[(0,i._)("div",Hs,[(0,i._)("span",qs,[Zs,(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>r.editTagData.bgColor=t),required:""},null,512),[[s.nr,r.editTagData.bgColor]])]),(0,i._)("span",null,[Ys,(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=t=>r.editTagData.textColor=t),required:""},null,512),[[s.nr,r.editTagData.textColor]])])]),Gs,(0,i._)("div",Xs,[Js,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.icons,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:e},[(0,i._)("span",{class:"material-icons btn-icon",onClick:e=>r.editTagData.icon=t},(0,n.zw)(t),9,Qs)])))),128))]),ti,(0,i._)("div",ei,[ai,(0,i._)("label",si,[ii,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>r.editTagData.name=t),placeholder:"Tên thẻ",required:""},null,512),[[s.nr,r.editTagData.name]]),ni])]),oi],32)])])],512),[[s.F8,r.editTagData.isDisplay]])])),_:1}),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",ri,[(0,i._)("div",{class:"popup-bg",onClick:e[7]||(e[7]=t=>r.deleteTagData.isDisplay=!1)}),(0,i._)("div",li,[(0,i._)("div",null,[(0,i._)("div",ci,[hi,(0,i._)("h3",null,(0,n.zw)(r.deleteTagData.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:e[8]||(e[8]=t=>r.deleteTagData.isDisplay=!1)},"close")]),(0,i._)("div",null,[(0,i._)("p",null,[di,(0,i._)("b",null,(0,n.zw)(r.deleteTagData.name),1),ui]),gi,(0,i._)("div",pi,[(0,i._)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>l.deleteTag&&l.deleteTag(...t))},wi)])])])],512),[[s.F8,r.deleteTagData.isDisplay]])])),_:1}),(0,i.Wm)(h,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}var vi={name:"SDListView",components:{MessagePopup:ns},created(){this.loadSessionData()||this.getTags()},data(){return{tags:[],learningTags:[],editTagData:{title:"Sửa thẻ",index:0,id:0,icon:"",name:"",textColor:"",bgColor:"",times:{today:0,week:0,month:0,year:0,total:0},isDisplay:!1},deleteTagData:{title:"Xóa thẻ",isDisplay:!1,index:0,id:0,name:""},icons:["school","sports_esports","cake","self_improvement","water","nights_stay","sports_gymnastics","piano","music_note","movie","equalizer","shopping_cart","credit_card","receipt_long","attach_money","sell","work","calculate","edit_notifications","mail","notifications","hub","smartphone","print","computer","desktop_windows","headphones","smart_toy","keyboard","memory","menu_book","star","library_books","auto_stories","local_library","import_contacts","sticky_note_2","note","laptop_chromebook","style","edit","construction","draw","mic","palette","code","terminal","data_object","data_array"],message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{...(0,l.OI)(["setIsLoading"]),getTags(){this.setIsLoading(!0),J.get("/study-diary/"+this.user.id).then((t=>{this.setIsLoading(!1),200===t.status?t.json().then((t=>{this.learningDiary?t.data.forEach((t=>{t.id==this.learningDiary.sdtag?this.learningTags.push(t):this.tags.push(t)})):this.tags=t.data,this.saveSessionData()})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Không thể lấy dữ liệu","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Lỗi kết nối đến server","error")}))},openCreateTagPopup(){this.editTagData.title="Tạo thẻ",this.editTagData.id=0,this.editTagData.icon="star",this.editTagData.name="New Tag",this.editTagData.textColor="#000000",this.editTagData.bgColor="#ffa799",this.editTagData.times={today:0,week:0,month:0,year:0,total:0},this.editTagData.isDisplay=!0},openEditTagPopup(t){this.editTagData.title="Sửa thẻ "+this.tags[t].id,this.editTagData.index=t,this.editTagData.id=this.tags[t].id,this.editTagData.icon=this.tags[t].icon,this.editTagData.name=this.tags[t].name,this.editTagData.textColor=this.tags[t].text_color,this.editTagData.bgColor=this.tags[t].bg_color,this.editTagData.times.today=this.tags[t].time_today,this.editTagData.times.week=this.tags[t].time_week,this.editTagData.times.month=this.tags[t].time_month,this.editTagData.times.year=this.tags[t].time_year,this.editTagData.times.total=this.tags[t].time_total,this.editTagData.isDisplay=!0},openDeleteTagPopup(t){this.deleteTagData.title="Xóa thẻ "+this.tags[t].id,this.deleteTagData.index=t,this.deleteTagData.id=this.tags[t].id,this.deleteTagData.name=this.tags[t].name,this.deleteTagData.isDisplay=!0},submitEditTag(){0===this.editTagData.id?this.createTag():this.updateTag()},createTag(){this.setIsLoading(!0),J.post("/study-diary",{name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags.push(t.result),this.saveSessionData(),this.showMessage("Thành công","Thêm thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Thêm thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},updateTag(){this.setIsLoading(!0),J.put("/study-diary",{id:this.editTagData.id,name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((t=>{this.tags[this.editTagData.index]=t.result,this.saveSessionData(),this.showMessage("Thành công","Cập nhật thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Cập nhật thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},deleteTag(){this.setIsLoading(!0),J["delete"]("/study-diary",{id:this.deleteTagData.id}).then((t=>{this.setIsLoading(!1),200==t.status?t.json().then((()=>{this.tags.splice(this.deleteTagData.index,1),this.saveSessionData(),this.showMessage("Thành công","Xóa thẻ thành công","success"),this.deleteTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Xóa thẻ thất bại","error")}))})).catch((t=>{this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.deleteTagData.isDisplay=!1,console.log(t)}))},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},showTime(t){let e=(t/60).toFixed(2);return`${e} giờ (${t} phút)`},saveSessionData(){sessionStorage.setItem("tags",JSON.stringify({tags:this.tags,learningTags:this.learningTags}))},loadSessionData(){let t=sessionStorage.getItem("tags");if(t){let e=JSON.parse(t);return this.tags=e.tags,this.learningTags=e.learningTags,!0}return!1}},computed:{...(0,l.rn)(["learningDiary","user"])}};const Di=(0,U.Z)(vi,[["render",yi],["__scopeId","data-v-e09f9a76"]]);var fi=Di;const Ti=t=>((0,i.dD)("data-v-71be54e4"),t=t(),(0,i.Cn)(),t),ki={class:"container"},bi={class:"breadcrumb"},Li=(0,i.Uk)("Nhật Ký T.Gian Học"),Mi={key:0},Ci=Ti((()=>(0,i._)("span",{class:"material-icons"},"stop",-1))),Ui=[Ci],Ii=(0,i.Uk)("Bắt đầu: "),Si=(0,i.Uk)("Đang học "),xi=Ti((()=>(0,i._)("span",{class:"material-icons"},"play_arrow",-1))),Pi=[xi],zi={class:"d-flex justify-content-center align-items-center"},Ni={class:"material-icons mr-2"},ji=(0,i.Uk)("Hôm nay: "),Oi=(0,i.Uk)("Tuần này: "),Fi=(0,i.Uk)("Tháng này: "),Ei=(0,i.Uk)("Năm nay: "),Vi=(0,i.Uk)("Tổng thời gian học: "),Wi={class:"popup"},$i={class:"container container-md"},Ai=Ti((()=>(0,i._)("div",{class:"d-flex justify-content-center align-items-center"},[(0,i._)("span",{class:"material-icons mr-2"},"delete_forever"),(0,i._)("h3",null,"Không học nữa à?")],-1))),Ki=Ti((()=>(0,i._)("p",null,"Bạn đã học được gì rồi? Viết xuống đây nhé!",-1))),Ri={class:"text-secondary"},Bi=(0,i.Uk)(" (Cú pháp viết chuẩn "),Hi=(0,i.Uk)("Markdown"),qi=(0,i.Uk)(") "),Zi=Ti((()=>(0,i._)("p",null,"Preview: ",-1))),Yi=["innerHTML"],Gi=Ti((()=>(0,i._)("span",{class:"material-icons"},"save",-1))),Xi=(0,i.Uk)(" Lưu "),Ji=[Gi,Xi],Qi=Ti((()=>(0,i._)("h3",null,"Nhật Ký Học Tập",-1)));function tn(t,e,a,o,r,l){const c=(0,i.up)("router-link"),h=(0,i.up)("TextArea"),d=(0,i.up)("ContributionDiary"),u=(0,i.up)("MessagePopup");return(0,i.wg)(),(0,i.iD)("div",ki,[(0,i._)("div",bi,[(0,i.Wm)(c,{to:"/study-diary"},{default:(0,i.w5)((()=>[Li])),_:1}),(0,i.Wm)(c,{to:"/study-diary/"+r.tagData.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(r.tagData.name),1)])),_:1},8,["to"])]),(0,i._)("div",{class:"header mb-4",style:(0,n.j5)({backgroundColor:r.tagData.bg_color,color:r.tagData.text_color})},[(0,i._)("div",null,[1==r.learningDiaryData.is_learning?((0,i.wg)(),(0,i.iD)("div",Mi,[(0,i._)("div",{class:"icon",onClick:e[0]||(e[0]=t=>r.stopLearnPopup.isDisplay=!0)},Ui),(0,i._)("p",null,[Ii,(0,i._)("b",null,(0,n.zw)(l.convertISOTimeToLocalDate(r.learningDiaryData.start_at)),1)]),(0,i._)("p",null,[Si,(0,i._)("b",null,(0,n.zw)(l.showStopwatchTime),1)])])):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"icon",onClick:e[1]||(e[1]=t=>l.startLearn())},Pi))]),(0,i._)("div",null,[(0,i._)("div",zi,[(0,i._)("span",Ni,(0,n.zw)(r.tagData.icon),1),(0,i._)("h3",null,(0,n.zw)(r.tagData.name),1)]),(0,i._)("p",null,[ji,(0,i._)("b",null,(0,n.zw)(l.minutesToStr(r.tagData.time_today)),1)]),(0,i._)("p",null,[Oi,(0,i._)("b",null,(0,n.zw)(l.minutesToStr(r.tagData.time_week)),1)]),(0,i._)("p",null,[Fi,(0,i._)("b",null,(0,n.zw)(l.minutesToStr(r.tagData.time_month)),1)]),(0,i._)("p",null,[Ei,(0,i._)("b",null,(0,n.zw)(l.minutesToStr(r.tagData.time_year)),1)]),(0,i._)("p",null,[Vi,(0,i._)("b",null,(0,n.zw)(l.minutesToStr(r.tagData.time_total)),1)])])],4),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",Wi,[(0,i._)("div",{class:"popup-bg",onClick:e[2]||(e[2]=t=>r.stopLearnPopup.isDisplay=!1)}),(0,i._)("div",$i,[(0,i._)("div",null,[Ai,(0,i._)("span",{class:"material-icons btn-close",onClick:e[3]||(e[3]=t=>r.stopLearnPopup.isDisplay=!1)},"close")]),(0,i._)("div",null,[Ki,(0,i._)("p",Ri,[Bi,(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[Hi])),_:1}),qi]),(0,i.Wm)(h,{modelValue:r.stopLearnPopup.log,"onUpdate:modelValue":e[4]||(e[4]=t=>r.stopLearnPopup.log=t),rows:20,placeholder:"Viết những gì bạn vừa học xuống đây nhé!"},null,8,["modelValue"]),Zi,(0,i._)("div",{class:"quote",innerHTML:r.stopLearnPopup.preview},null,8,Yi),(0,i._)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=t=>l.stopLearn())},Ji)])])],512),[[s.F8,r.stopLearnPopup.isDisplay]])])),_:1}),(0,i._)("div",null,[Qi,0!=r.tagData.id?((0,i.wg)(),(0,i.j4)(d,{key:0,tag:r.tagData.id,"refesh-toogle":r.refeshToggle},null,8,["tag","refesh-toogle"])):(0,i.kq)("",!0)]),(0,i.Wm)(u,{title:r.message.title,message:r.message.message,type:r.message.type,"is-display":r.message.isDisplay},null,8,["title","message","type","is-display"])])}const en={class:"header"},an=["rows","placeholder"];function sn(t,e,a,n,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",en,[(0,i._)("span",{onClick:e[0]||(e[0]=t=>r.insert("**Bold text**")),class:"material-icons btn-icon",title:"In đậm"},"format_bold"),(0,i._)("span",{onClick:e[1]||(e[1]=t=>r.insert("*Italic text*")),class:"material-icons btn-icon",title:"In nghiêng"},"format_italic"),(0,i._)("span",{onClick:e[2]||(e[2]=t=>r.insert("> Quote")),class:"material-icons btn-icon",title:"Quote"},"format_quote"),(0,i._)("span",{onClick:e[3]||(e[3]=t=>r.insert("* List Item")),class:"material-icons btn-icon",title:"Generic List"},"format_list_bulleted"),(0,i._)("span",{onClick:e[4]||(e[4]=t=>r.insert("1. List Item")),class:"material-icons btn-icon",title:"Numbered List"},"format_list_numbered"),(0,i._)("span",{onClick:e[5]||(e[5]=t=>r.insert("[Alias](https://)")),class:"material-icons btn-icon",title:"Link"},"insert_link"),(0,i._)("span",{onClick:e[6]||(e[6]=t=>r.insert("![alt](https://)")),class:"material-icons btn-icon",title:"Image"},"insert_photo")]),(0,i.wy)((0,i._)("textarea",{rows:a.rows,placeholder:a.placeholder,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value=t),onKeydown:e[8]||(e[8]=t=>r.onKeyDown(t))},null,40,an),[[s.nr,r.value]])])}var nn={name:"TextArea",props:{modelValue:{type:String},placeholder:{type:String},rows:{type:Number,default:30}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{insert(t){this.value=this.value+t},onKeyDown(t){let e=this.value.slice(0,t.target.selectionStart),a=this.value.slice(t.target.selectionStart);if("Tab"==t.key&&(t.preventDefault(),this.value=`${e}\t${a}`,t.selectionEnd=t.selectionStart+1),"Enter"==t.key){let s=e.split("\n").pop(),i=s.trim().slice(0,1),n="";">"==i?n=">":"*"==i?n="*":"1."==i?n="1.":"-"==i?n="-":"+"==i&&(n="+"),n&&(t.preventDefault(),this.value=`${e}\n${n} ${a}`,t.selectionEnd=t.selectionStart+n.length+1)}}}};const on=(0,U.Z)(nn,[["render",sn],["__scopeId","data-v-299c14cb"]]);var rn=on,ln={name:"SDTagView",created(){this.getTagData()},components:{MessagePopup:ns,TextArea:rn,ContributionDiary:wa},data(){return{tagData:{id:0,name:"",bg_color:"inherit",text_color:"inherit",icon:"",time_today:0,time_week:0,time_month:0,time_year:0,time_total:0},learningDiaryData:{id:0,sdtag:0,user:0,log:"",is_learning:0,start_at:"",stop_at:""},stopLearnPopup:{isDisplay:!1,log:"",preview:""},message:{title:"",message:"",type:"",isDisplay:!1},stopwatch:0,refeshToggle:!1}},methods:{...(0,l.OI)(["setTitle","setIsLoading","setLearningDiary"]),async getTagData(){let t,e;this.setIsLoading(!0);try{if(t=await J.get("/study-diary/tag/"+this.$route.params.id),e=await t.json(),200!=t.status)throw this.$router.push("/study-diary"),new Error(e.error)}catch(a){throw this.$router.push("/study-diary"),a}this.tagData=e.data,document.title=this.tagData.name+" - Study Diary - MTLKMS",this.setTitle(document.title),this.learningDiary.sdtag==this.tagData.id&&(this.learningDiaryData=this.learningDiary,this.startStopwatch()),this.setIsLoading(!1)},startLearn(){this.learningDiary?this.showMessage("Lỗi","Bạn đang học môn khác rồi!","warning"):(this.setIsLoading(!0),J.post("/study-diary/diary",{sdtag:this.tagData.id}).then((t=>{this.setIsLoading(!1),t.json().then((e=>{if(200===t.status){let t=e.data;t.name=this.tagData.name,this.learningDiaryData=t,this.setLearningDiary(t),sessionStorage.removeItem("tags"),this.startStopwatch()}else console.log(e.error),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error")}))})).catch((t=>{console.log(t),this.setIsLoading(!1),this.showMessage("Lỗi","Không thể kết nối đến máy chủ, vui lòng thử lại sau","error")})))},async stopLearn(){if(0===this.stopLearnPopup.log.length)return void this.showMessage("Lỗi","Bạn chưa viết gì","warning");this.setIsLoading(!0);let t=await J.put("/study-diary/diary",{id:this.learningDiaryData.id,log:this.stopLearnPopup.log}),e=await t.json();if(200!==t.status)throw this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),new Error(e.error);this.setLearningDiary(!1),this.learningDiaryData.is_learning=0,this.stopLearnPopup.isDisplay=!1,this.stopLearnPopup.log="",this.tagData=e.data,sessionStorage.removeItem("tags"),this.refeshToggle=!this.refeshToggle,this.showMessage("Thành công","Lưu thành công","success"),this.setIsLoading(!1)},minutesToStr(t){let e=(t/60).toFixed(2);return`${e} giờ (${t} phút)`},showMessage(t,e,a){this.message.title=t,this.message.message=e,this.message.type=a,this.message.isDisplay=!this.message.isDisplay},convertISOTimeToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},startStopwatch(){let t=this.learningDiaryData.start_at,e=(new Date).toISOString(),a=new Date(e)-new Date(t),s=Math.round(a/1e3);this.stopwatch=s,this.loopStopwatch()},loopStopwatch(){this.learningDiaryData.is_learning&&setTimeout((()=>{this.stopwatch++,this.loopStopwatch()}),1e3)}},watch:{"stopLearnPopup.log"(t){this.stopLearnPopup.preview=pa.TU.parse(t)}},computed:{...(0,l.rn)(["learningDiary"]),showStopwatchTime(){let t=Math.floor(this.stopwatch/60),e=this.stopwatch%60,a=(t/60).toFixed(2);return`${t} phút ${e} giây (${a} giờ)`}}};const cn=(0,U.Z)(ln,[["render",tn],["__scopeId","data-v-71be54e4"]]);var hn=cn;const dn=[{path:"/",name:"home",component:ht,meta:{title:"Trang Chủ - MTLKMS",metaTags:[{name:"description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"},{property:"og:description",content:"Góc nhỏ của nhà Vịt - Nơi cùng nhau học tập và chém gió ^^"}]}},{path:"/login",name:"login",component:Ut,meta:{title:"Đăng Nhập - MTLKMS"}},{path:"/register",name:"register",component:ee,meta:{title:"Đăng Ký - MTLKMS"}},{path:"/logout",name:"logout",component:de,meta:{title:"Đăng Xuất - MTLKMS"}},{path:"/profile",name:"profile",component:Da,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}},{path:"/profile/edit",name:"edit-profile",component:ls,meta:{title:"Chỉnh Sửa Thông Tin Cá Nhân - MTLKMS"}},{path:"/study-diary",name:"study-diary",component:fi,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}},{path:"/study-diary/:id",name:"study-diary-tag",component:hn,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}}],un=(0,Y.p7)({history:(0,Y.PO)("/"),routes:dn,scrollBehavior(t,e,a){return new Promise((t=>{setTimeout((()=>{t(a||{top:0})}),500)}))}});function gn(){st.commit("setTitle",document.title)}un.beforeEach(((t,e,a)=>{const s=t.matched.slice().reverse().find((t=>t.meta&&t.meta.title)),i=t.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags)),n=e.matched.slice().reverse().find((t=>t.meta&&t.meta.metaTags));if(s?document.title=s.meta.title:n&&(document.title=n.meta.title),gn(),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((t=>t.parentNode.removeChild(t))),!i)return a();i.meta.metaTags.map((t=>{const e=document.createElement("meta");return Object.keys(t).forEach((a=>{e.setAttribute(a,t[a])})),e.setAttribute("data-vue-router-controlled",""),e})).forEach((t=>document.head.appendChild(t))),a()}));var pn=un;(0,s.ri)(q).use(pn).use(st).mount("#app")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var o=1/0;for(h=0;h<t.length;h++){s=t[h][0],i=t[h][1],n=t[h][2];for(var r=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(h--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var h=l(a)}for(e&&e(s);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(h)},s=self["webpackChunkmtlkms"]=self["webpackChunkmtlkms"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(4587)}));s=a.O(s)})();
//# sourceMappingURL=app.31991336.js.map