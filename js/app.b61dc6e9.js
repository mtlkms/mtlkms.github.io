(function(){"use strict";var t={4137:function(t,a,e){var s=e(9242),i=e(3396),n=e(7139);const o={id:"sidebar"},l={id:"navbar"};function r(t,a,e,r,h,d){const c=(0,i.up)("AppMenu"),u=(0,i.up)("router-view"),g=(0,i.up)("LoadingEffect");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{onClick:a[0]||(a[0]=t=>d.toggleMenu()),id:"sidebar-bg"},null,512),[[s.F8,h.isMenuOpen]])])),_:1}),(0,i.Wm)(s.uT,{name:"fade-in-left"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",o,[(0,i.Wm)(c)],512),[[s.F8,h.isMenuOpen]])])),_:1}),(0,i._)("div",{id:"main",class:(0,n.C_)({noMarginLeft:!h.isMenuOpen})},[(0,i._)("div",l,[(0,i._)("span",{onClick:a[1]||(a[1]=t=>d.toggleMenu()),class:"material-icons"},"menu"),(0,i.Uk)(" "+(0,n.zw)(t.$route.meta.title),1)]),(0,i.Wm)(u,null,{default:(0,i.w5)((({Component:t})=>[(0,i.Wm)(s.uT,{name:"fade-in-fast",mode:"out-in"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t)))])),_:2},1024)])),_:1})],2),(0,i.Wm)(g)],64)}const h=t=>((0,i.dD)("data-v-791ee9b0"),t=t(),(0,i.Cn)(),t),d={id:"appmenu-top"},c={key:0},u=h((()=>(0,i._)("img",{src:"/img/icons/180.png",class:"avatar d-block mx-auto"},null,-1))),g=h((()=>(0,i._)("h3",null,"MTLKMS",-1))),p=h((()=>(0,i._)("hr",null,null,-1))),m=h((()=>(0,i._)("p",null,"Học hành chăm chỉ :(",-1))),_=[u,g,p,m],w={key:1},y=["src"],v=h((()=>(0,i._)("hr",null,null,-1))),D={key:0},f=(0,i.Uk)(" Bạn đang học môn "),T={key:1},k=h((()=>(0,i._)("hr",null,null,-1))),b=h((()=>(0,i._)("p",null,"Bạn còn 99 mục tiêu hằng ngày chưa hoàn tất!",-1))),L={class:"material-icons"};function M(t,a,e,s,o,l){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",d,[o.data.isLogin?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("img",{src:o.data.avatarURL,class:"avatar d-block mx-auto"},null,8,y),(0,i._)("h3",null,"Xin chào "+(0,n.zw)(o.data.user.name)+"!",1),v,(0,i._)("p",null,[o.data.learningDiary?((0,i.wg)(),(0,i.iD)("span",D,[f,(0,i.Wm)(r,{to:"/study-diary/"+o.data.learningDiary.sdtag},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(o.data.learningDiary.name),1)])),_:1},8,["to"])])):((0,i.wg)(),(0,i.iD)("span",T," Bạn hiện chưa học gì! "))]),k,b])):((0,i.wg)(),(0,i.iD)("div",c,_))]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.links,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[o.data.isLogin==t.auth?((0,i.wg)(),(0,i.j4)(r,{key:0,to:t.path,class:(0,n.C_)({active:l.isActive(t),link:!0})},{default:(0,i.w5)((()=>[(0,i._)("span",L,(0,n.zw)(t.icon),1),(0,i.Uk)(" "+(0,n.zw)(t.name),1)])),_:2},1032,["to","class"])):(0,i.kq)("",!0)])))),128))])])}let C={isLogin:!1,isLoading:!1,user:{id:"",name:"",email:"",username:"",slogan:"",created_at:""},learningDiary:!1};class S{constructor(){}get(t){return C[t]}set(t,a){C[t]=a}remove(t){delete C[t]}clear(){C={}}getAll(){return C}}var U=new S,x={name:"AppMenu",data(){return{data:U.getAll(),links:[{name:"Trang Chủ",path:"/",icon:"home",auth:!0},{name:"Cá Nhân",path:"/profile",icon:"person",auth:!0},{name:"Nhật Ký Thời Gian Học",path:"/study-diary",icon:"assignment",auth:!0},{name:"Đăng Nhập",path:"/login",icon:"login",auth:!1},{name:"Đăng Ký",path:"/register",icon:"person",auth:!1},{name:"Đăng Xuất",path:"/logout",icon:"logout",auth:!0}]}},methods:{isActive(t){return t.path==this.$route.path}}},P=e(89);const z=(0,P.Z)(x,[["render",M],["__scopeId","data-v-791ee9b0"]]);var j=z;const A=t=>((0,i.dD)("data-v-495a71ea"),t=t(),(0,i.Cn)(),t),V={class:"main"},$=A((()=>(0,i._)("div",{class:"static-bar"},null,-1))),F=A((()=>(0,i._)("div",{class:"move-bar"},null,-1))),N=[$,F];function K(t,a,e,n,o,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",V,N,512),[[s.F8,o.data.isLoading]])])),_:1})])}var W={name:"LoadingEffect",data(){return{data:U.getAll()}}};const O=(0,P.Z)(W,[["render",K],["__scopeId","data-v-495a71ea"]]);var E=O,I={name:"App",components:{AppMenu:j,LoadingEffect:E},created(){this.data.isLogin||"/login"===location.pathname||"/register"===location.pathname||(U.set("redirect",location.pathname),this.$router.push("/login")),innerWidth>768&&(this.isMenuOpen=!0),window.addEventListener("resize",(()=>{innerWidth>768?this.isMenuOpen=!0:this.isMenuOpen=!1})),sessionStorage.clear()},data(){return{isMenuOpen:!1,data:U.getAll()}},watch:{$route:{immediate:!0,handler(t){document.title=t.meta.title||"MTLKMS",innerWidth<768&&(this.isMenuOpen=!1)}}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen}}};const H=(0,P.Z)(I,[["render",r]]);var B=H,R=e(5431);(0,R.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var q=e(678);const Z={class:"container container-md"},Y=(0,i._)("h3",null,"Home Page",-1),X=[Y];function G(t,a,e,s,n,o){return(0,i.wg)(),(0,i.iD)("div",Z,X)}var J={name:"HomeView"};const Q=(0,P.Z)(J,[["render",G]]);var tt=Q;const at=t=>((0,i.dD)("data-v-09e31b13"),t=t(),(0,i.Cn)(),t),et={class:"container container-sm"},st=at((()=>(0,i._)("h2",{class:"mb-4"},"Đăng nhập",-1))),it={class:"input"},nt=at((()=>(0,i._)("span",{class:"material-icons"},"person",-1))),ot=at((()=>(0,i._)("p",null,"Username",-1))),lt={class:"input"},rt=at((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),ht=at((()=>(0,i._)("p",null,"Password",-1))),dt={class:"footer"},ct=at((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"login"),(0,i.Uk)(" Đăng nhập ")],-1))),ut=(0,i.Uk)("Chưa có tài khoản? "),gt=(0,i.Uk)("[Đăng Ký]"),pt=(0,i.Uk)("[Quên Mật Khẩu]");function mt(t,a,e,o,l,r){const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",et,[(0,i._)("form",{action:"",method:"POST",onSubmit:a[2]||(a[2]=(0,s.iM)((t=>r.submitForm()),["prevent"]))},[st,(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:(0,n.C_)(["log",l.isSuccess?"success":"error"])},[(0,i._)("p",null,(0,n.zw)(l.apiLog),1),(0,i._)("p",null,(0,n.zw)(l.log),1)],2),[[s.F8,l.log]])])),_:1}),(0,i._)("label",it,[nt,(0,i.wy)((0,i._)("input",{type:"text",name:"username",required:"",placeholder:"Username","onUpdate:modelValue":a[0]||(a[0]=t=>l.form.username=t)},null,512),[[s.nr,l.form.username]]),ot]),(0,i._)("label",lt,[rt,(0,i.wy)((0,i._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":a[1]||(a[1]=t=>l.form.password=t)},null,512),[[s.nr,l.form.password]]),ht]),(0,i._)("div",dt,[ct,(0,i._)("div",null,[(0,i._)("p",null,[ut,(0,i.Wm)(h,{to:"/register"},{default:(0,i.w5)((()=>[gt])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(h,{to:""},{default:(0,i.w5)((()=>[pt])),_:1})])])])],32)])}e(1703);class _t{constructor(){this.host="https://cuikho.cf"}get(t){return fetch(this.host+t,{method:"GET",credentials:"include"})}setAvatarURL(){let t=U.get("user").username,a=this.getAvatarURL(t);U.set("avatarURL",a)}getAvatarURL(t){return this.host+"/user/"+t+"/avatar"}post(t,a){return fetch(this.host+t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}put(t,a){return fetch(this.host+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}delete(t,a){return fetch(this.host+t,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}updateAvatar(t){let a=U.get("user").username;return fetch(`${this.host}/user/${a}/avatar`,{method:"PUT",credentials:"include",body:t})}async getLearningDiary(){let t=await this.get("/study-diary/diary/"+U.get("user").id),a=await t.json();if(200==t.status)return a.data;throw new Error(a.error)}}var wt=new _t,yt={name:"LoginView",created(){this.checkLogin()},data(){return{data:U.getAll(),form:{username:"",password:""},isSuccess:!1,apiLog:"",log:""}},methods:{submitForm(){this.data.isLoading=!0,wt.post("/login",this.form).then((t=>{this.data.isLoading=!1,200===t.status?t.json().then((t=>{this.isSuccess=!0,this.apiLog="",this.log="Đăng ký thành công",U.set("user",t.user),U.set("isLogin",!0),wt.setAvatarURL(),this.$router.push("/")})):t.json().then((t=>{this.isSuccess=!1,this.apiLog=t.error,this.showLog()}))})).catch((t=>{this.data.isLoading=!1,console.log(t)}))},showLog(){"Username not found or password is incorrect"==this.apiLog?this.log="Tên đăng nhập hoặc mật khẩu không chính xác":this.log="Đã có lỗi xảy ra"},redirect(){U.get("redirect")&&"/login"!=U.get("redirect")&&"/register"!=U.get("redirect")?(this.$router.push(U.get("redirect")),U.set("redirect",null)):this.$router.push("/")},async checkLogin(){U.get("isLogin")&&this.redirect(),this.data.isLoading=!0;let t=await wt.get("/check-login"),a=await t.json();if(this.data.isLoading=!1,200!==t.status)throw new Error("Check login failed");U.set("user",a.user),U.set("isLogin",!0),wt.setAvatarURL();try{let t=await wt.getLearningDiary();U.set("learningDiary",t)}catch(e){console.log(e)}this.redirect()}}};const vt=(0,P.Z)(yt,[["render",mt],["__scopeId","data-v-09e31b13"]]);var Dt=vt;const ft=t=>((0,i.dD)("data-v-d1532384"),t=t(),(0,i.Cn)(),t),Tt={class:"container container-sm"},kt=ft((()=>(0,i._)("h2",{class:"mb-4"},"Đăng ký",-1))),bt={class:"input"},Lt=ft((()=>(0,i._)("span",{class:"material-icons"},"label",-1))),Mt=ft((()=>(0,i._)("p",null,"Tên hiển thị",-1))),Ct={class:"input"},St=ft((()=>(0,i._)("span",{class:"material-icons"},"person",-1))),Ut=ft((()=>(0,i._)("p",null,"Tên đăng nhập",-1))),xt={class:"input"},Pt=ft((()=>(0,i._)("span",{class:"material-icons"},"email",-1))),zt=ft((()=>(0,i._)("p",null,"Email",-1))),jt={class:"input"},At=ft((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),Vt=ft((()=>(0,i._)("p",null,"Mật khẩu",-1))),$t={class:"input"},Ft=ft((()=>(0,i._)("span",{class:"material-icons"},"lock",-1))),Nt=ft((()=>(0,i._)("p",null,"Re-password",-1))),Kt={class:"footer"},Wt=ft((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"send"),(0,i.Uk)(" Đăng ký ")],-1))),Ot=(0,i.Uk)("Đã có tài khoản? "),Et=(0,i.Uk)("[Đăng Nhập]"),It=(0,i.Uk)("[Quên Mật Khẩu]");function Ht(t,a,e,o,l,r){const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Tt,[(0,i._)("form",{action:"",method:"POST",onSubmit:a[5]||(a[5]=(0,s.iM)((t=>r.submitForm()),["prevent"]))},[kt,(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",{class:(0,n.C_)(["log",l.isSuccess?"success":"error"])},[(0,i._)("p",null,(0,n.zw)(l.apiLog),1),(0,i._)("p",null,(0,n.zw)(l.log),1)],2),[[s.F8,l.log]])])),_:1}),(0,i._)("label",bt,[Lt,(0,i.wy)((0,i._)("input",{type:"text",name:"name",required:"",placeholder:"Tên hiển thị","onUpdate:modelValue":a[0]||(a[0]=t=>l.form.name=t)},null,512),[[s.nr,l.form.name]]),Mt]),(0,i._)("label",Ct,[St,(0,i.wy)((0,i._)("input",{type:"text",name:"username",required:"",placeholder:"Tên đăng nhập","onUpdate:modelValue":a[1]||(a[1]=t=>l.form.username=t)},null,512),[[s.nr,l.form.username]]),Ut]),(0,i._)("label",xt,[Pt,(0,i.wy)((0,i._)("input",{type:"email",name:"email",required:"",placeholder:"Email","onUpdate:modelValue":a[2]||(a[2]=t=>l.form.email=t)},null,512),[[s.nr,l.form.email]]),zt]),(0,i._)("label",jt,[At,(0,i.wy)((0,i._)("input",{type:"password",name:"password",required:"",placeholder:"Mật khẩu","onUpdate:modelValue":a[3]||(a[3]=t=>l.form.password=t)},null,512),[[s.nr,l.form.password]]),Vt]),(0,i._)("label",$t,[Ft,(0,i.wy)((0,i._)("input",{type:"password",name:"repassword",required:"",placeholder:"Nhập lại mật khẩu","onUpdate:modelValue":a[4]||(a[4]=t=>l.form.repassword=t)},null,512),[[s.nr,l.form.repassword]]),Nt]),(0,i._)("div",Kt,[Wt,(0,i._)("div",null,[(0,i._)("p",null,[Ot,(0,i.Wm)(h,{to:"/login"},{default:(0,i.w5)((()=>[Et])),_:1})]),(0,i._)("p",null,[(0,i.Wm)(h,{to:""},{default:(0,i.w5)((()=>[It])),_:1})])])])],32)])}var Bt={name:"RegisterView",data(){return{data:U.getAll(),form:{name:"",username:"",email:"",password:"",repassword:""},apiLog:"",log:"",isSuccess:!1}},methods:{submitForm(){if(this.form.password!==this.form.repassword)return this.log="Mật khẩu không khớp",void(this.isSuccess=!1);this.data.isLoading=!0,wt.post("/register",this.form).then((t=>{this.data.isLoading=!1,200===t.status?t.json().then((t=>{this.isSuccess=!0,this.apiLog="",this.log="Đăng ký thành công",U.set("user",t.user),U.set("isLogin",!0),wt.setAvatarURL(),this.$router.push("/")})):t.json().then((t=>{this.isSuccess=!1,this.apiLog=t.error,this.showLog()}))})).catch((t=>{this.data.isLoading=!1,console.log(t)}))},showLog(){"Invalid name"==this.apiLog?this.log="Tên phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Invalid email"==this.apiLog?this.log="Email không đúng định dạng":"Invalid username"==this.apiLog?this.log="Tên đăng nhập phải từ 3 đến 20 kí tự, không bao gồm khoảng trống và kí tự đặc biệt":"Invalid password"==this.apiLog?this.log="Mật khẩu phải lớn hơn 6 kí tự, bao gồm chữ cái viết thường, viết hoa, số và kí tự đặc biệt":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'username')/gi.test(this.apiLog)?this.log="Tên đăng nhập đã tồn tại":/(ER_DUP_ENTRY: Duplicate entry ').+(' for key 'email')/gi.test(this.apiLog)?this.log="Email đã tồn tại":this.log="Đã có lỗi xảy ra"}}};const Rt=(0,P.Z)(Bt,[["render",Ht],["__scopeId","data-v-d1532384"]]);var qt=Rt;const Zt={class:"container container-sm"},Yt=(0,i._)("h2",{class:"mb-4"},"Đăng xuất",-1),Xt=(0,i._)("p",null,"Bạn có chắc muốn đăng xuất không?",-1),Gt=(0,i._)("span",{class:"material-icons mr-2"},"logout",-1),Jt=(0,i.Uk)(" Đăng xuất "),Qt=[Gt,Jt];function ta(t,a,e,s,n,o){return(0,i.wg)(),(0,i.iD)("div",Zt,[Yt,Xt,(0,i._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...t)=>o.logout&&o.logout(...t))},Qt)])}var aa={name:"LogoutView",data(){return{data:U.getAll()}},methods:{logout(){this.data.isLoading=!0,wt.get("/logout").then((()=>{this.data.isLoading=!1,U.set("isLogin",!1),U.set("user",{}),this.$router.push("/login")})).catch((()=>{this.data.isLoading=!1}))}}};const ea=(0,P.Z)(aa,[["render",ta]]);var sa=ea;const ia={class:"container container-md"},na=(0,i._)("hr",null,null,-1),oa=(0,i._)("h3",{class:"mb-4"},"Nhật ký thời gian học",-1);function la(t,a,e,s,n,o){const l=(0,i.up)("Profile"),r=(0,i.up)("ContributionDiary");return(0,i.wg)(),(0,i.iD)("div",ia,[(0,i.Wm)(l),na,oa,(0,i.Wm)(r)])}const ra={class:"main"},ha=["src","alt"],da={class:"text-secondary"},ca=(0,i.Uk)("[Edit Profile]");function ua(t,a,e,s,o,l){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ra,[(0,i._)("img",{src:o.data.avatarURL,alt:o.data.user.username,class:"avatar-xl"},null,8,ha),(0,i._)("div",null,[(0,i._)("h3",null,(0,n.zw)(o.data.user.name),1),(0,i._)("p",da,(0,n.zw)(o.data.user.username)+" - Tham gia lúc "+(0,n.zw)(l.convertTimestampToLocalDate(o.data.user.created_at)),1),(0,i._)("p",null,(0,n.zw)(o.data.user.slogan),1),(0,i._)("p",null,[(0,i.Wm)(r,{to:"/profile/edit"},{default:(0,i.w5)((()=>[ca])),_:1})])])])}var ga={name:"UserProfile",data(){return{data:U.getAll(),api:wt}},methods:{convertTimestampToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})}}};const pa=(0,P.Z)(ga,[["render",ua],["__scopeId","data-v-66e9c496"]]);var ma=pa;const _a=t=>((0,i.dD)("data-v-9e6f53f8"),t=t(),(0,i.Cn)(),t),wa={class:"text-center"},ya={class:"date"},va={class:"mr-2"},Da=_a((()=>(0,i._)("tr",null,[(0,i._)("th",null,"Sun"),(0,i._)("th",null,"Mon"),(0,i._)("th",null,"Tue"),(0,i._)("th",null,"Wed"),(0,i._)("th",null,"Thu"),(0,i._)("th",null,"Fri"),(0,i._)("th",null,"Sat")],-1))),fa=["title","onClick"],Ta=_a((()=>(0,i._)("hr",null,null,-1))),ka={class:"mb-4"},ba={key:0},La=(0,i.Uk)(" Bạn không học gì vào ngày này "),Ma=_a((()=>(0,i._)("br",null,null,-1))),Ca=_a((()=>(0,i._)("br",null,null,-1))),Sa=[La,Ma,Ca],Ua={class:"ml-3"},xa={key:0},Pa=(0,i.Uk)(" Đã học: "),za={key:1},ja=(0,i.Uk)(" Đã học: "),Aa=(0,i.Uk)("Bắt đầu: "),Va=(0,i.Uk)("Kết thúc: "),$a=["innerHTML"],Fa=_a((()=>(0,i._)("br",null,null,-1))),Na=_a((()=>(0,i._)("hr",null,null,-1))),Ka=_a((()=>(0,i._)("br",null,null,-1)));function Wa(t,a,e,o,l,r){const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",wa,[(0,i._)("div",ya,[(0,i._)("p",va,"Tháng "+(0,n.zw)(l.month),1),(0,i._)("p",null,"Năm "+(0,n.zw)(l.year),1)]),(0,i.wy)((0,i._)("input",{type:"month","onUpdate:modelValue":a[0]||(a[0]=t=>l.date=t)},null,512),[[s.nr,l.date]])]),(0,i._)("table",null,[Da,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.diaries,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,((t,e)=>((0,i.wg)(),(0,i.iD)("td",{key:e},[""!=t.day?((0,i.wg)(),(0,i.iD)("p",{key:0,title:"Ngày "+t.day,onClick:s=>r.setShowDay(a,e,t.day),style:(0,n.j5)({backgroundColor:r.dayBackground(t.diary.length),outline:t.isActive?"1px solid #000":"none"})},(0,n.zw)(t.day),13,fa)):(0,i.kq)("",!0)])))),128))])))),128))]),Ta,(0,i._)("div",null,[(0,i._)("h3",ka,(0,n.zw)(l.showDay.title),1),0==l.showDay.diary.length?((0,i.wg)(),(0,i.iD)("div",ba,Sa)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(l.showDay.diary,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[(0,i._)("div",Ua,[0==e.tag?((0,i.wg)(),(0,i.iD)("p",xa,[Pa,(0,i._)("b",null,[(0,i.Uk)((0,n.zw)(r.caculateTime(t.start_at,t.stop_at))+" ",1),(0,i.Wm)(h,{to:"/study-diary/"+t.sdtag},{default:(0,i.w5)((()=>[(0,i.Uk)(" trong môn "+(0,n.zw)(t.name),1)])),_:2},1032,["to"])])])):((0,i.wg)(),(0,i.iD)("p",za,[ja,(0,i._)("b",null,(0,n.zw)(r.caculateTime(t.start_at,t.stop_at)),1)])),(0,i._)("p",null,[Aa,(0,i._)("b",null,(0,n.zw)(new Date(t.start_at).toLocaleString("vi-VN")),1)]),(0,i._)("p",null,[Va,(0,i._)("b",null,(0,n.zw)(new Date(t.stop_at).toLocaleString("vi-VN")),1)]),(0,i._)("p",{class:"quote",innerHTML:r.parseMarkdown(t.log)},null,8,$a)]),Fa,Na,Ka])))),128))])])}var Oa=e(5068),Ea={name:"ContributionDiary",props:{user:{type:Number,default:0},tag:{type:Number,default:0},refeshToogle:{type:Boolean,default:!1}},created(){this.getDiaries()},data(){return{data:U.getAll(),diaries:[],showDay:{title:"Hôm nay",day:0,diary:[]},month:(new Date).getMonth()+1,year:(new Date).getFullYear(),date:""}},methods:{async getDiaries(){let t="/study-diary/diary/";0!=this.user?t+=`${this.user}/${this.year}/${this.month}`:0!=this.tag?t+=`${this.data.user.id}/${this.year}/${this.month}/${this.tag}`:t+=`${this.data.user.id}/${this.year}/${this.month}`,this.data.isLoading=!0;let a=await wt.get(t),e=await a.json();if(this.data.isLoading=!1,200!=a.status)throw new Error(e.error);e.data.length>0?this.putDiary(e.data):(this.showDay.diary=[],this.diaries=[])},putDiary(t){let a=[[],[],[],[],[],[],[]],e=[[[],[0],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],[[],[],[],[],[],[],[]],a],s=new Date(t[0].start_at),i=new Date(s.getFullYear(),s.getMonth(),1).getDay(),n=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),o=1;for(let d=0;d<e.length;d++)for(let t=0;t<e[d].length;t++){let a=o-i;e[d][t]=a>0&&a<=n?{day:a,isActive:!1,diary:[]}:{day:"",diary:[]},o++}let l=0,r=0,h=0;t.forEach((t=>{let a=new Date(t.stop_at),s=a.getDate(),i=a.getDay(),n=new Date(a.getFullYear(),a.getMonth(),1).getDay(),o=Math.ceil((s+n)/7)-1;e[o][i].diary.push(t),a.toDateString()==(new Date).toDateString()&&(l=o,r=i,h=s)})),this.diaries=e,this.setShowDay(l,r,h)},parseMarkdown(t){return Oa.TU.parse(t)},caculateTime(t,a){let e=new Date(t),s=new Date(a),i=s.getTime()-e.getTime(),n=Math.round(i/6e4),o=(n/60).toFixed(2);return`${n} phút (${o} giờ)`},setShowDay(t,a,e){this.showDay.diary=this.diaries[t][a].diary,this.showDay.day=e,this.showDay.title=`${e}/${this.month}/${this.year}`;for(let s=0;s<this.diaries.length;s++)for(let t=0;t<this.diaries[s].length;t++)this.diaries[s][t].isActive=!1;this.diaries[t][a].isActive=!0},dayBackground(t){switch(t){case 0:return"#ffffff";case 1:return"#aaffd7";case 2:return"#56ffb0";case 3:return"#00ff87";case 4:return"#29e96c";case 5:return"#06cd4b";case 6:return"#00b23e";case 7:return"#009935";case 8:return"#007f2c";case 9:return"#00661b";case 10:return"#004c14";case 11:return"#00330d";default:return"#002601"}}},watch:{refeshToogle:{handler(){this.getDiaries()},deep:!0},date:{handler(t){let a=t.split("-");this.year=a[0],this.month=a[1],this.getDiaries()}}}};const Ia=(0,P.Z)(Ea,[["render",Wa],["__scopeId","data-v-9e6f53f8"]]);var Ha=Ia,Ba={name:"ProfileView",components:{Profile:ma,ContributionDiary:Ha},data(){return{data:U.getAll()}},methods:{}};const Ra=(0,P.Z)(Ba,[["render",la]]);var qa=Ra;const Za={class:"container container-sm"},Ya={class:"breadcrumb"},Xa=(0,i.Uk)("Cá Nhân"),Ga=(0,i.Uk)("Sửa Thông Tin Cá Nhân"),Ja=["src","alt"],Qa=(0,i._)("br",null,null,-1),te=(0,i._)("p",null,"Cập nhật ảnh đại diện",-1),ae={class:"input"},ee=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"file_upload"),(0,i.Uk)(" Upload ")],-1),se=(0,i._)("hr",null,null,-1),ie=(0,i._)("p",null,"Cập nhật thông tin cá nhân",-1),ne={class:"input"},oe=(0,i._)("span",{class:"material-icons"},"label",-1),le=(0,i._)("p",null,"Tên hiển thị",-1),re={class:"input"},he=(0,i._)("span",{class:"material-icons"},"favorite",-1),de=(0,i._)("p",null,"Châm ngôn",-1),ce=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Save ")],-1),ue=(0,i._)("hr",null,null,-1),ge=(0,i._)("p",null,"Cập nhật mật khẩu",-1),pe={class:"input"},me=(0,i._)("span",{class:"material-icons"},"lock",-1),_e=(0,i._)("p",null,"Mật khẩu cũ",-1),we={class:"input"},ye=(0,i._)("span",{class:"material-icons"},"lock",-1),ve=(0,i._)("p",null,"Mật khẩu mới",-1),De={class:"input"},fe=(0,i._)("span",{class:"material-icons"},"lock",-1),Te=(0,i._)("p",null,"Xác nhận mật khẩu",-1),ke=(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Save ")],-1);function be(t,a,e,n,o,l){const r=(0,i.up)("router-link"),h=(0,i.up)("message-popup");return(0,i.wg)(),(0,i.iD)("div",Za,[(0,i._)("div",Ya,[(0,i.Wm)(r,{to:"/profile"},{default:(0,i.w5)((()=>[Xa])),_:1}),(0,i.Wm)(r,{to:"/profile/edit"},{default:(0,i.w5)((()=>[Ga])),_:1})]),(0,i._)("form",{action:"",onSubmit:a[1]||(a[1]=(0,s.iM)((t=>l.updateAvatar()),["prevent"]))},[(0,i._)("img",{src:o.avatarPreview,alt:o.data.user.username,class:"d-block mx-auto avatar-xl"},null,8,Ja),Qa,te,(0,i._)("label",ae,[(0,i._)("input",{type:"file",onChange:a[0]||(a[0]=(...t)=>l.onchangeAvatar&&l.onchangeAvatar(...t))},null,32)]),ee],32),se,(0,i._)("form",{action:"",onSubmit:a[4]||(a[4]=(0,s.iM)((t=>l.updateProfile()),["prevent"]))},[ie,(0,i._)("label",ne,[oe,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=t=>o.form.name=t),placeholder:"Tên hiển thị"},null,512),[[s.nr,o.form.name]]),le]),(0,i._)("label",re,[he,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=t=>o.form.slogan=t),placeholder:"Châm ngôn"},null,512),[[s.nr,o.form.slogan]]),de]),ce],32),ue,(0,i._)("form",{action:"",onSubmit:a[8]||(a[8]=(0,s.iM)((t=>l.updatePassword()),["prevent"]))},[ge,(0,i._)("label",pe,[me,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":a[5]||(a[5]=t=>o.passwordForm.oldPassword=t),placeholder:"Mật khẩu cũ"},null,512),[[s.nr,o.passwordForm.oldPassword]]),_e]),(0,i._)("label",we,[ye,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":a[6]||(a[6]=t=>o.passwordForm.newPassword=t),placeholder:"Mật khẩu mới"},null,512),[[s.nr,o.passwordForm.newPassword]]),ve]),(0,i._)("label",De,[fe,(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":a[7]||(a[7]=t=>o.rePassword=t),placeholder:"Xác nhận mật khẩu"},null,512),[[s.nr,o.rePassword]]),Te]),ke],32),(0,i.Wm)(h,{title:o.message.title,message:o.message.message,type:o.message.type,"is-display":o.message.isDisplay},null,8,["title","message","type","is-display"])])}const Le={class:"popup"},Me={class:"container container-sm"},Ce={class:"d-flex justify-content-center align-items-center"},Se={class:"material-icons mr-2"};function Ue(t,a,e,o,l,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",Le,[(0,i._)("div",{class:"popup-bg",onClick:a[0]||(a[0]=t=>r.close())}),(0,i._)("div",Me,[(0,i._)("div",{class:(0,n.C_)(e.type)},[(0,i._)("div",Ce,[(0,i._)("span",Se,(0,n.zw)(r.icon),1),(0,i._)("h3",null,(0,n.zw)(e.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:a[1]||(a[1]=t=>r.close())},"close")],2),(0,i._)("div",null,[(0,i._)("p",null,(0,n.zw)(e.message),1)])])],512),[[s.F8,l.display]])])),_:1})])}var xe={name:"MessagePopup",props:{title:{type:String,default:""},message:{type:String,default:""},type:{type:String,default:"success"},isDisplay:{type:Boolean,default:!1}},data(){return{display:!1}},methods:{close(){this.display=!1}},watch:{isDisplay(){this.display=!0}},computed:{icon(){switch(this.type){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";default:return"check_circle"}}}};const Pe=(0,P.Z)(xe,[["render",Ue]]);var ze=Pe,je={name:"EditProfileView",components:{MessagePopup:ze},data(){return{data:U.getAll(),form:{name:U.get("user").name,slogan:U.get("user").slogan},passwordForm:{oldPassword:"",newPassword:""},rePassword:"",avatarPreview:wt.getAvatarURL(U.get("user").username),avatarFile:null,isLoading:!1,message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{updateAvatar(){if(!this.avatarFile)return void this.showMessage("Lỗi","Vui lòng chọn ảnh đại diện","error");let t=new FormData;t.append("avatar",this.avatarFile),this.data.isLoading=!0,wt.updateAvatar(t).then((t=>{this.data.isLoading=!1,200==t.status?location.reload():this.showMessage("Lỗi!","Có lỗi xảy ra, vui lòng thử lại","error")})).catch((t=>{this.data.isLoading=!1,console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))},updateProfile(){this.form.name&&this.form.slogan?(this.data.isLoading=!0,wt.put("/user",this.form).then((t=>{this.data.isLoading=!1,200==t.status?t.json().then((t=>{this.data.user=t.user,this.showMessage("Thành công","Cập nhật thông tin cá nhân thành công","success")})):t.json().then((t=>{console.log(t.error);let a="";a="Invalid name"==t.error?"Tên hiển thị phải lớn hơn 2 và nhỏ hơn 50 kí tự":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",a,"error")}))})).catch((t=>{this.data.isLoading=!1,console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))):this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning")},updatePassword(){this.passwordForm.oldPassword&&this.passwordForm.newPassword?this.passwordForm.newPassword==this.rePassword?(this.data.isLoading=!0,wt.put("/user/password",this.passwordForm).then((t=>{this.data.isLoading=!1,200==t.status?(t.json().then((()=>{this.showMessage("Thành công","Cập nhật mật khẩu thành công","success")})),this.$router.push("/profile")):t.json().then((t=>{console.log(t.error);let a="";a="Invalid password"==t.error?"Mật khẩu phải từ 6 kí tự, bao gồm chữ in hoa, chữ in thường, số và kí tự đặc biệt":"Old password is incorrect"==t.error?"Mật khẩu cũ không chính xác":"Có lỗi xảy ra, vui lòng thử lại",this.showMessage("Lỗi!",a,"error")}))})).catch((t=>{this.data.isLoading=!1,console.log(t),this.showMessage("Lỗi!","Không thể kết nối đến máy chủ","error")}))):this.showMessage("Lỗi","Mật khẩu mới và xác nhận mật khẩu không khớp","warning"):this.showMessage("Lỗi","Vui lòng nhập đầy đủ thông tin","warning")},onchangeAvatar(t){let a=t.target.files||t.dataTransfer.files;a.length&&this.convertAvatar(a[0])},convertAvatar(t){let a=document.createElement("canvas"),e=a.getContext("2d"),s=document.createElement("img"),i=256;a.width=i,a.height=i,s.src=URL.createObjectURL(t),s.onload=()=>{if(URL.revokeObjectURL(s.src),s.width>s.height){let t=s.height/i,a=s.width/t;e.drawImage(s,0,0,a,i)}else{let t=s.width/i,a=s.height/t;e.drawImage(s,0,0,i,a)}this.avatarPreview=a.toDataURL(),fetch(this.avatarPreview).then((t=>{t.arrayBuffer().then((t=>{this.avatarFile=new File([t],"avatar",{type:"image/png"})}))}))}},showMessage(t,a,e){this.message.title=t,this.message.message=a,this.message.type=e,this.message.isDisplay=!this.message.isDisplay}}};const Ae=(0,P.Z)(je,[["render",be]]);var Ve=Ae;const $e=t=>((0,i.dD)("data-v-69cb2b7c"),t=t(),(0,i.Cn)(),t),Fe={class:"container"},Ne=$e((()=>(0,i._)("h3",null,"Đang học",-1))),Ke={key:0},We={key:1,class:"grid-list"},Oe={class:"title"},Ee={class:"material-icons mr-2"},Ie=$e((()=>(0,i._)("div",null,[(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"edit")]),(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"delete_forever")])],-1))),He={class:"body"},Be={class:"d-flex justify-space-between align-items-center"},Re=$e((()=>(0,i._)("h3",null,"Thẻ Lĩnh Vực",-1))),qe=$e((()=>(0,i._)("span",{class:"material-icons mr-2"},"add",-1))),Ze=(0,i.Uk)(" Thêm "),Ye=[qe,Ze],Xe={key:2},Ge={key:3,class:"grid-list"},Je={class:"title"},Qe={class:"material-icons mr-2"},ts=["onClick"],as=$e((()=>(0,i._)("span",{class:"material-icons"},"edit",-1))),es=[as],ss=["onClick"],is=$e((()=>(0,i._)("span",{class:"material-icons"},"delete_forever",-1))),ns=[is],os={class:"body"},ls={class:"popup"},rs={class:"container container-sm"},hs={class:"d-flex justify-content-center align-items-center"},ds=$e((()=>(0,i._)("span",{class:"material-icons mr-2"},"edit",-1))),cs=$e((()=>(0,i._)("p",null,"Preview: ",-1))),us={class:"title"},gs={class:"d-flex align-items-center"},ps={class:"material-icons mr-2"},ms=$e((()=>(0,i._)("button",null,[(0,i._)("span",{class:"material-icons"},"edit")],-1))),_s={class:"body"},ws=$e((()=>(0,i._)("br",null,null,-1))),ys=$e((()=>(0,i._)("hr",null,null,-1))),vs={class:"mb-3 mt-3"},Ds={class:"mr-3"},fs=$e((()=>(0,i._)("span",{class:"mr-3"},"Màu nền",-1))),Ts=$e((()=>(0,i._)("span",{class:"mr-3"},"Màu chữ",-1))),ks=$e((()=>(0,i._)("hr",null,null,-1))),bs={class:"mt-3 mb-3"},Ls=$e((()=>(0,i._)("p",null,"Icon: ",-1))),Ms=["onClick"],Cs=$e((()=>(0,i._)("hr",null,null,-1))),Ss={class:"mt-3 mb-4"},Us=$e((()=>(0,i._)("p",null,"Tên: ",-1))),xs={class:"input"},Ps=$e((()=>(0,i._)("span",{class:"material-icons"},"tag",-1))),zs=$e((()=>(0,i._)("p",null,"Tên thẻ",-1))),js=$e((()=>(0,i._)("button",{class:"btn btn-primary"},[(0,i._)("span",{class:"material-icons mr-2"},"save"),(0,i.Uk)(" Lưu ")],-1))),As={class:"popup"},Vs={class:"container container-sm"},$s={class:"d-flex justify-content-center align-items-center"},Fs=$e((()=>(0,i._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),Ns=(0,i.Uk)("Bạn có chắc muốn xóa thẻ "),Ks=(0,i.Uk)(" không?"),Ws=$e((()=>(0,i._)("p",null,"Thẻ này sẽ bị xóa vĩnh viễn.",-1))),Os={class:"mt-3 mb-3"},Es=$e((()=>(0,i._)("span",{class:"material-icons mr-2"},"delete_forever",-1))),Is=(0,i.Uk)(" Xóa "),Hs=[Es,Is];function Bs(t,a,e,o,l,r){const h=(0,i.up)("router-link"),d=(0,i.up)("MessagePopup");return(0,i.wg)(),(0,i.iD)("div",Fe,[Ne,0==l.learningTags.length?((0,i.wg)(),(0,i.iD)("div",Ke," Bạn hiện chưa học gì ")):((0,i.wg)(),(0,i.iD)("div",We,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.learningTags,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,i._)("div",Oe,[(0,i.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("span",Ee,(0,n.zw)(t.icon),1),(0,i._)("b",null,(0,n.zw)(t.name),1)])),_:2},1032,["to","id"]),Ie]),(0,i._)("div",He,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(r.showTime(t.time_today)),1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(r.showTime(t.time_week)),1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(r.showTime(t.time_month)),1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(r.showTime(t.time_year)),1),(0,i._)("p",null,"Tổng thời gian học: "+(0,n.zw)(r.showTime(t.time_total)),1)])],4)])))),128))])),(0,i._)("div",Be,[Re,(0,i._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...t)=>r.openCreateTagPopup&&r.openCreateTagPopup(...t))},Ye)]),0==l.tags.length?((0,i.wg)(),(0,i.iD)("div",Xe," Bạn chưa tạo thẻ nào ")):((0,i.wg)(),(0,i.iD)("div",Ge,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.tags,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:t.bg_color,color:t.text_color})},[(0,i._)("div",Je,[(0,i.Wm)(h,{class:"d-flex align-items-center",to:`/study-diary/${t.id}`,id:`sdtag_${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("span",Qe,(0,n.zw)(t.icon),1),(0,i._)("b",null,(0,n.zw)(t.name),1)])),_:2},1032,["to","id"]),(0,i._)("div",null,[(0,i._)("button",{onClick:t=>r.openEditTagPopup(a)},es,8,ts),(0,i._)("button",{onClick:t=>r.openDeleteTagPopup(a)},ns,8,ss)])]),(0,i._)("div",os,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(r.showTime(t.time_today)),1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(r.showTime(t.time_week)),1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(r.showTime(t.time_month)),1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(r.showTime(t.time_year)),1),(0,i._)("p",null,"Tổng: "+(0,n.zw)(r.showTime(t.time_total)),1)])],4)])))),128))])),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",ls,[(0,i._)("div",{class:"popup-bg",onClick:a[1]||(a[1]=t=>l.editTagData.isDisplay=!1)}),(0,i._)("div",rs,[(0,i._)("div",null,[(0,i._)("div",hs,[ds,(0,i._)("h3",null,(0,n.zw)(l.editTagData.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:a[2]||(a[2]=t=>l.editTagData.isDisplay=!1)},"close")]),(0,i._)("div",null,[cs,(0,i._)("div",{class:"grid-item",style:(0,n.j5)({backgroundColor:l.editTagData.bgColor,color:l.editTagData.textColor})},[(0,i._)("div",us,[(0,i._)("div",gs,[(0,i._)("span",ps,(0,n.zw)(l.editTagData.icon),1),(0,i._)("b",null,(0,n.zw)(l.editTagData.name),1)]),ms]),(0,i._)("div",_s,[(0,i._)("p",null,"Hôm nay: "+(0,n.zw)(l.editTagData.times.today)+" giờ",1),(0,i._)("p",null,"Tuần này: "+(0,n.zw)(l.editTagData.times.week)+" giờ",1),(0,i._)("p",null,"Tháng này: "+(0,n.zw)(l.editTagData.times.month)+" giờ",1),(0,i._)("p",null,"Năm nay: "+(0,n.zw)(l.editTagData.times.year)+" giờ",1),(0,i._)("p",null,"Tổng: "+(0,n.zw)(l.editTagData.times.total)+" giờ",1)])],4),ws,ys,(0,i._)("form",{action:"",onSubmit:a[6]||(a[6]=(0,s.iM)(((...t)=>r.submitEditTag&&r.submitEditTag(...t)),["prevent"]))},[(0,i._)("div",vs,[(0,i._)("span",Ds,[fs,(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":a[3]||(a[3]=t=>l.editTagData.bgColor=t),required:""},null,512),[[s.nr,l.editTagData.bgColor]])]),(0,i._)("span",null,[Ts,(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":a[4]||(a[4]=t=>l.editTagData.textColor=t),required:""},null,512),[[s.nr,l.editTagData.textColor]])])]),ks,(0,i._)("div",bs,[Ls,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.icons,((t,a)=>((0,i.wg)(),(0,i.iD)("span",{key:a},[(0,i._)("span",{class:"material-icons btn-icon",onClick:a=>l.editTagData.icon=t},(0,n.zw)(t),9,Ms)])))),128))]),Cs,(0,i._)("div",Ss,[Us,(0,i._)("label",xs,[Ps,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=t=>l.editTagData.name=t),placeholder:"Tên thẻ",required:""},null,512),[[s.nr,l.editTagData.name]]),zs])]),js],32)])])],512),[[s.F8,l.editTagData.isDisplay]])])),_:1}),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",As,[(0,i._)("div",{class:"popup-bg",onClick:a[7]||(a[7]=t=>l.deleteTagData.isDisplay=!1)}),(0,i._)("div",Vs,[(0,i._)("div",null,[(0,i._)("div",$s,[Fs,(0,i._)("h3",null,(0,n.zw)(l.deleteTagData.title),1)]),(0,i._)("span",{class:"material-icons btn-close",onClick:a[8]||(a[8]=t=>l.deleteTagData.isDisplay=!1)},"close")]),(0,i._)("div",null,[(0,i._)("p",null,[Ns,(0,i._)("b",null,(0,n.zw)(l.deleteTagData.name),1),Ks]),Ws,(0,i._)("div",Os,[(0,i._)("button",{class:"btn btn-primary",onClick:a[9]||(a[9]=(...t)=>r.deleteTag&&r.deleteTag(...t))},Hs)])])])],512),[[s.F8,l.deleteTagData.isDisplay]])])),_:1}),(0,i.Wm)(d,{title:l.message.title,message:l.message.message,type:l.message.type,"is-display":l.message.isDisplay},null,8,["title","message","type","is-display"])])}var Rs={name:"SDListView",components:{MessagePopup:ze},created(){this.loadSessionData()||this.getTags()},data(){return{data:U.getAll(),tags:[],learningTags:[],editTagData:{title:"Sửa thẻ",index:0,id:0,icon:"",name:"",textColor:"",bgColor:"",times:{today:0,week:0,month:0,year:0,total:0},isDisplay:!1},deleteTagData:{title:"Xóa thẻ",isDisplay:!1,index:0,id:0,name:""},icons:["school","sports_esports","cake","self_improvement","water","nights_stay","sports_gymnastics","piano","music_note","movie","equalizer","shopping_cart","credit_card","receipt_long","attach_money","sell","work","calculate","edit_notifications","mail","notifications","hub","smartphone","print","computer","desktop_windows","headphones","smart_toy","keyboard","memory","menu_book","star","library_books","auto_stories","local_library","import_contacts","sticky_note_2","note","laptop_chromebook","style","edit","construction","draw","mic","palette","code","terminal","data_object","data_array"],message:{title:"",message:"",type:"",isDisplay:!1}}},methods:{getTags(){this.data.isLoading=!0,wt.get("/study-diary/"+this.data.user.id).then((t=>{this.data.isLoading=!1,200===t.status?t.json().then((t=>{this.data.learningDiary?t.data.forEach((t=>{t.id==this.data.learningDiary.sdtag?this.learningTags.push(t):this.tags.push(t)})):this.tags=t.data,this.saveSessionData()})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Không thể lấy dữ liệu","error")}))})).catch((t=>{console.log(t),this.data.isLoading=!1,this.showMessage("Lỗi","Lỗi kết nối đến server","error")}))},openCreateTagPopup(){this.editTagData.title="Tạo thẻ",this.editTagData.id=0,this.editTagData.icon="star",this.editTagData.name="New Tag",this.editTagData.textColor="#000000",this.editTagData.bgColor="#ffa799",this.editTagData.times={today:0,week:0,month:0,year:0,total:0},this.editTagData.isDisplay=!0},openEditTagPopup(t){this.editTagData.title="Sửa thẻ "+this.tags[t].id,this.editTagData.index=t,this.editTagData.id=this.tags[t].id,this.editTagData.icon=this.tags[t].icon,this.editTagData.name=this.tags[t].name,this.editTagData.textColor=this.tags[t].text_color,this.editTagData.bgColor=this.tags[t].bg_color,this.editTagData.times.today=this.tags[t].time_today,this.editTagData.times.week=this.tags[t].time_week,this.editTagData.times.month=this.tags[t].time_month,this.editTagData.times.year=this.tags[t].time_year,this.editTagData.times.total=this.tags[t].time_total,this.editTagData.isDisplay=!0},openDeleteTagPopup(t){this.deleteTagData.title="Xóa thẻ "+this.tags[t].id,this.deleteTagData.index=t,this.deleteTagData.id=this.tags[t].id,this.deleteTagData.name=this.tags[t].name,this.deleteTagData.isDisplay=!0},submitEditTag(){0===this.editTagData.id?this.createTag():this.updateTag()},createTag(){this.data.isLoading=!0,wt.post("/study-diary",{name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.data.isLoading=!1,200==t.status?t.json().then((t=>{this.tags.push(t.result),this.saveSessionData(),this.showMessage("Thành công","Thêm thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Thêm thẻ thất bại","error")}))})).catch((t=>{this.data.isLoading=!1,this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},updateTag(){this.data.isLoading=!0,wt.put("/study-diary",{id:this.editTagData.id,name:this.editTagData.name,icon:this.editTagData.icon,bg_color:this.editTagData.bgColor,text_color:this.editTagData.textColor}).then((t=>{this.data.isLoading=!1,200==t.status?t.json().then((t=>{this.tags[this.editTagData.index]=t.result,this.saveSessionData(),this.showMessage("Thành công","Cập nhật thẻ thành công","success"),this.editTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Cập nhật thẻ thất bại","error")}))})).catch((t=>{this.data.isLoading=!1,this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.editTagData.isDisplay=!1,console.log(t)}))},deleteTag(){this.data.isLoading=!0,wt["delete"]("/study-diary",{id:this.deleteTagData.id}).then((t=>{this.data.isLoading=!1,200==t.status?t.json().then((()=>{this.tags.splice(this.deleteTagData.index,1),this.saveSessionData(),this.showMessage("Thành công","Xóa thẻ thành công","success"),this.deleteTagData.isDisplay=!1})):t.json().then((t=>{console.log(t.error),this.showMessage("Lỗi","Xóa thẻ thất bại","error")}))})).catch((t=>{this.data.isLoading=!1,this.showMessage("Lỗi","Không thể kết nối đến máy chủ","error"),this.deleteTagData.isDisplay=!1,console.log(t)}))},showMessage(t,a,e){this.message.title=t,this.message.message=a,this.message.type=e,this.message.isDisplay=!this.message.isDisplay},showTime(t){let a=(t/60).toFixed(2);return`${a} giờ (${t} phút)`},saveSessionData(){sessionStorage.setItem("tags",JSON.stringify({tags:this.tags,learningTags:this.learningTags}))},loadSessionData(){let t=sessionStorage.getItem("tags");if(t){let a=JSON.parse(t);return this.tags=a.tags,this.learningTags=a.learningTags,!0}return!1}}};const qs=(0,P.Z)(Rs,[["render",Bs],["__scopeId","data-v-69cb2b7c"]]);var Zs=qs;const Ys=t=>((0,i.dD)("data-v-495c6444"),t=t(),(0,i.Cn)(),t),Xs={class:"container"},Gs={class:"breadcrumb"},Js=(0,i.Uk)("Nhật Ký T.Gian Học"),Qs={key:0},ti=Ys((()=>(0,i._)("span",{class:"material-icons"},"stop",-1))),ai=[ti],ei=(0,i.Uk)("Bắt đầu: "),si=(0,i.Uk)("Đang học "),ii=Ys((()=>(0,i._)("span",{class:"material-icons"},"play_arrow",-1))),ni=[ii],oi={class:"d-flex justify-content-center align-items-center"},li={class:"material-icons mr-2"},ri=(0,i.Uk)("Hôm nay: "),hi=(0,i.Uk)("Tuần này: "),di=(0,i.Uk)("Tháng này: "),ci=(0,i.Uk)("Năm nay: "),ui=(0,i.Uk)("Tổng thời gian học: "),gi={class:"popup"},pi={class:"container container-md"},mi=Ys((()=>(0,i._)("div",{class:"d-flex justify-content-center align-items-center"},[(0,i._)("span",{class:"material-icons mr-2"},"delete_forever"),(0,i._)("h3",null,"Không học nữa à?")],-1))),_i=Ys((()=>(0,i._)("p",null,"Bạn đã học được gì rồi? Viết xuống đây nhé!",-1))),wi={class:"text-secondary"},yi=(0,i.Uk)(" (Cú pháp viết chuẩn "),vi=(0,i.Uk)("Markdown"),Di=(0,i.Uk)(") "),fi=Ys((()=>(0,i._)("p",null,"Preview: ",-1))),Ti=["innerHTML"],ki=Ys((()=>(0,i._)("span",{class:"material-icons"},"save",-1))),bi=(0,i.Uk)(" Lưu "),Li=[ki,bi],Mi=Ys((()=>(0,i._)("h3",null,"Nhật Ký Học Tập",-1)));function Ci(t,a,e,o,l,r){const h=(0,i.up)("router-link"),d=(0,i.up)("TextArea"),c=(0,i.up)("ContributionDiary"),u=(0,i.up)("MessagePopup");return(0,i.wg)(),(0,i.iD)("div",Xs,[(0,i._)("div",Gs,[(0,i.Wm)(h,{to:"/study-diary"},{default:(0,i.w5)((()=>[Js])),_:1}),(0,i.Wm)(h,{to:"/study-diary/"+l.tagData.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(l.tagData.name),1)])),_:1},8,["to"])]),(0,i._)("div",{class:"header mb-4",style:(0,n.j5)({backgroundColor:l.tagData.bg_color,color:l.tagData.text_color})},[(0,i._)("div",null,[1==l.learningDiaryData.is_learning?((0,i.wg)(),(0,i.iD)("div",Qs,[(0,i._)("div",{class:"icon",onClick:a[0]||(a[0]=t=>l.stopLearnPopup.isDisplay=!0)},ai),(0,i._)("p",null,[ei,(0,i._)("b",null,(0,n.zw)(r.convertISOTimeToLocalDate(l.learningDiaryData.start_at)),1)]),(0,i._)("p",null,[si,(0,i._)("b",null,(0,n.zw)(r.showStopwatchTime),1)])])):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"icon",onClick:a[1]||(a[1]=t=>r.startLearn())},ni))]),(0,i._)("div",null,[(0,i._)("div",oi,[(0,i._)("span",li,(0,n.zw)(l.tagData.icon),1),(0,i._)("h3",null,(0,n.zw)(l.tagData.name),1)]),(0,i._)("p",null,[ri,(0,i._)("b",null,(0,n.zw)(r.minutesToStr(l.tagData.time_today)),1)]),(0,i._)("p",null,[hi,(0,i._)("b",null,(0,n.zw)(r.minutesToStr(l.tagData.time_week)),1)]),(0,i._)("p",null,[di,(0,i._)("b",null,(0,n.zw)(r.minutesToStr(l.tagData.time_month)),1)]),(0,i._)("p",null,[ci,(0,i._)("b",null,(0,n.zw)(r.minutesToStr(l.tagData.time_year)),1)]),(0,i._)("p",null,[ui,(0,i._)("b",null,(0,n.zw)(r.minutesToStr(l.tagData.time_total)),1)])])],4),(0,i.Wm)(s.uT,{name:"fade-in"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",gi,[(0,i._)("div",{class:"popup-bg",onClick:a[2]||(a[2]=t=>l.stopLearnPopup.isDisplay=!1)}),(0,i._)("div",pi,[(0,i._)("div",null,[mi,(0,i._)("span",{class:"material-icons btn-close",onClick:a[3]||(a[3]=t=>l.stopLearnPopup.isDisplay=!1)},"close")]),(0,i._)("div",null,[_i,(0,i._)("p",wi,[yi,(0,i.Wm)(h,{to:"/"},{default:(0,i.w5)((()=>[vi])),_:1}),Di]),(0,i.Wm)(d,{modelValue:l.stopLearnPopup.log,"onUpdate:modelValue":a[4]||(a[4]=t=>l.stopLearnPopup.log=t),rows:20,placeholder:"Viết những gì bạn vừa học xuống đây nhé!"},null,8,["modelValue"]),fi,(0,i._)("div",{class:"quote",innerHTML:l.stopLearnPopup.preview},null,8,Ti),(0,i._)("button",{class:"btn btn-primary",onClick:a[5]||(a[5]=t=>r.stopLearn())},Li)])])],512),[[s.F8,l.stopLearnPopup.isDisplay]])])),_:1}),(0,i._)("div",null,[Mi,0!=l.tagData.id?((0,i.wg)(),(0,i.j4)(c,{key:0,tag:l.tagData.id,"refesh-toogle":l.refeshToggle},null,8,["tag","refesh-toogle"])):(0,i.kq)("",!0)]),(0,i.Wm)(u,{title:l.message.title,message:l.message.message,type:l.message.type,"is-display":l.message.isDisplay},null,8,["title","message","type","is-display"])])}const Si={class:"header"},Ui=["rows","placeholder"];function xi(t,a,e,n,o,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Si,[(0,i._)("span",{onClick:a[0]||(a[0]=t=>l.insert("**Bold text**")),class:"material-icons btn-icon",title:"In đậm"},"format_bold"),(0,i._)("span",{onClick:a[1]||(a[1]=t=>l.insert("*Italic text*")),class:"material-icons btn-icon",title:"In nghiêng"},"format_italic"),(0,i._)("span",{onClick:a[2]||(a[2]=t=>l.insert("> Quote")),class:"material-icons btn-icon",title:"Quote"},"format_quote"),(0,i._)("span",{onClick:a[3]||(a[3]=t=>l.insert("* List Item")),class:"material-icons btn-icon",title:"Generic List"},"format_list_bulleted"),(0,i._)("span",{onClick:a[4]||(a[4]=t=>l.insert("1. List Item")),class:"material-icons btn-icon",title:"Numbered List"},"format_list_numbered"),(0,i._)("span",{onClick:a[5]||(a[5]=t=>l.insert("[Alias](https://)")),class:"material-icons btn-icon",title:"Link"},"insert_link"),(0,i._)("span",{onClick:a[6]||(a[6]=t=>l.insert("![alt](https://)")),class:"material-icons btn-icon",title:"Image"},"insert_photo")]),(0,i.wy)((0,i._)("textarea",{rows:e.rows,placeholder:e.placeholder,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value=t)},null,8,Ui),[[s.nr,l.value]])])}var Pi={name:"TextArea",props:{modelValue:{type:String},placeholder:{type:String},rows:{type:Number,default:30}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{insert(t){this.value=this.value+t}}};const zi=(0,P.Z)(Pi,[["render",xi],["__scopeId","data-v-285c7a72"]]);var ji=zi,Ai={name:"SDTagView",created(){this.getTagData()},components:{MessagePopup:ze,TextArea:ji,ContributionDiary:Ha},data(){return{data:U.getAll(),tagData:{id:0,name:"",bg_color:"inherit",text_color:"inherit",icon:"",time_today:0,time_week:0,time_month:0,time_year:0,time_total:0},learningDiaryData:{id:0,sdtag:0,user:0,log:"",is_learning:0,start_at:"",stop_at:""},stopLearnPopup:{isDisplay:!1,log:"",preview:""},message:{title:"",message:"",type:"",isDisplay:!1},stopwatch:0,refeshToggle:!1}},methods:{async getTagData(){let t,a;this.data.isLoading=!0;try{if(t=await wt.get("/study-diary/tag/"+this.$route.params.id),a=await t.json(),200!=t.status)throw this.$router.push("/study-diary"),new Error(a.error)}catch(e){throw this.$router.push("/study-diary"),e}this.tagData=a.data,this.data.learningDiary.sdtag==this.tagData.id&&(this.learningDiaryData=this.data.learningDiary,this.startStopwatch()),this.data.isLoading=!1},startLearn(){this.data.learningDiary?this.showMessage("Lỗi","Bạn đang học môn khác rồi!","warning"):(this.data.isLoading=!0,wt.post("/study-diary/diary",{sdtag:this.tagData.id}).then((t=>{this.data.isLoading=!1,t.json().then((a=>{200===t.status?(this.learningDiaryData=a.data,this.data.learningDiary=this.learningDiaryData,sessionStorage.removeItem("tags"),this.startStopwatch()):(console.log(a.error),this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"))}))})).catch((t=>{console.log(t),this.data.isLoading=!1,this.showMessage("Lỗi","Không thể kết nối đến máy chủ, vui lòng thử lại sau","error")})))},async stopLearn(){if(0===this.stopLearnPopup.log.length)return void this.showMessage("Lỗi","Bạn chưa viết gì","warning");this.data.isLoading=!0;let t=await wt.put("/study-diary/diary",{id:this.learningDiaryData.id,log:this.stopLearnPopup.log}),a=await t.json();if(200!==t.status)throw this.showMessage("Lỗi","Đã có lỗi xảy ra, vui lòng thử lại sau","error"),new Error(a.error);this.learningDiaryData.is_learning=0,this.data.learningDiary=!1,this.stopLearnPopup.isDisplay=!1,this.stopLearnPopup.log="",this.tagData=a.data,sessionStorage.removeItem("tags"),this.refeshToggle=!this.refeshToggle,this.showMessage("Thành công","Lưu thành công","success"),this.data.isLoading=!1},minutesToStr(t){let a=(t/60).toFixed(2);return`${a} giờ (${t} phút)`},showMessage(t,a,e){this.message.title=t,this.message.message=a,this.message.type=e,this.message.isDisplay=!this.message.isDisplay},convertISOTimeToLocalDate(t){return new Date(t).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh"})},startStopwatch(){let t=this.learningDiaryData.start_at,a=(new Date).toISOString(),e=new Date(a)-new Date(t),s=Math.round(e/1e3);this.stopwatch=s,this.loopStopwatch()},loopStopwatch(){this.learningDiaryData.is_learning&&setTimeout((()=>{this.stopwatch++,this.loopStopwatch()}),1e3)}},watch:{"stopLearnPopup.log"(t){this.stopLearnPopup.preview=Oa.TU.parse(t)}},computed:{showStopwatchTime(){let t=Math.floor(this.stopwatch/60),a=this.stopwatch%60,e=(t/60).toFixed(2);return`${t} phút ${a} giây (${e} giờ)`}}};const Vi=(0,P.Z)(Ai,[["render",Ci],["__scopeId","data-v-495c6444"]]);var $i=Vi;const Fi=[{path:"/",name:"home",component:tt,meta:{title:"Trang Chủ - MTLKMS"}},{path:"/login",name:"login",component:Dt,meta:{title:"Đăng Nhập - MTLKMS"}},{path:"/register",name:"register",component:qt,meta:{title:"Đăng Ký - MTLKMS"}},{path:"/logout",name:"logout",component:sa,meta:{title:"Đăng Xuất - MTLKMS"}},{path:"/profile",name:"profile",component:qa,meta:{title:"Thông Tin Cá Nhân - MTLKMS"}},{path:"/profile/edit",name:"edit-profile",component:Ve,meta:{title:"Chỉnh Sửa Thông Tin Cá Nhân - MTLKMS"}},{path:"/study-diary",name:"study-diary",component:Zs,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}},{path:"/study-diary/:id",name:"study-diary-tag",component:$i,meta:{title:"Nhật Ký Thời Gian Học - MTLKMS"}}],Ni=(0,q.p7)({history:(0,q.PO)("/"),routes:Fi,scrollBehavior(t,a,e){return new Promise((t=>{setTimeout((()=>{t(e||{top:0})}),500)}))}});var Ki=Ni;(0,s.ri)(B).use(Ki).mount("#app")}},a={};function e(s){var i=a[s];if(void 0!==i)return i.exports;var n=a[s]={exports:{}};return t[s](n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(a,s,i,n){if(!s){var o=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],n=t[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||o>=n)&&Object.keys(e.O).every((function(t){return e.O[t](s[r])}))?s.splice(r--,1):(l=!1,n<o&&(o=n));if(l){t.splice(d--,1);var h=i();void 0!==h&&(a=h)}}return a}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,i,n]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,s){var i,n,o=s[0],l=s[1],r=s[2],h=0;if(o.some((function(a){return 0!==t[a]}))){for(i in l)e.o(l,i)&&(e.m[i]=l[i]);if(r)var d=r(e)}for(a&&a(s);h<o.length;h++)n=o[h],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(d)},s=self["webpackChunkmtlkms"]=self["webpackChunkmtlkms"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(4137)}));s=e.O(s)})();
//# sourceMappingURL=app.b61dc6e9.js.map